(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,796830,e=>{"use strict";var t=e.i(843476);let a=e.i(271645).forwardRef(function({className:e="",type:a="text",...r},s){return(0,t.jsx)("input",{ref:s,type:a,className:"h-11 w-full rounded-xl border border-[var(--v2-border)] bg-[var(--v2-surface)] px-3 text-[14px] text-[var(--v2-text)] shadow-[var(--v2-shadow-sm)] outline-none placeholder:text-[color-mix(in_srgb,var(--v2-muted)_70%,transparent)] focus:ring-2 focus:ring-[var(--v2-ring)] "+e,...r})});e.s(["V2Input",0,a])},184724,e=>{"use strict";var t=e.i(843476);function a(e){let t=e?.variant??"secondary",a=e?.size??"md";return["inline-flex select-none items-center justify-center gap-2 whitespace-nowrap rounded-xl transition focus:outline-none focus:ring-2 focus:ring-[var(--v2-ring)] disabled:pointer-events-none disabled:opacity-55","lg"===a?"h-12 px-5 text-[15px]":"sm"===a?"h-9 px-3 text-[13px]":"h-11 px-4 text-[14px]","primary"===t?"bg-[var(--v2-accent)] text-white font-semibold shadow-[var(--v2-shadow-sm)] hover:brightness-105":"danger"===t?"bg-[var(--down)] text-white font-semibold shadow-[var(--v2-shadow-sm)] hover:brightness-105":"ghost"===t?"bg-transparent text-[var(--v2-text)] font-semibold hover:bg-[var(--v2-surface-2)]":"border border-[var(--v2-border)] bg-[var(--v2-surface)] text-[var(--v2-text)] font-semibold shadow-[var(--v2-shadow-sm)] hover:bg-[var(--v2-surface-2)]",e?.fullWidth?"w-full":"",e?.className??""].filter(Boolean).join(" ")}let r=e.i(271645).forwardRef(function({variant:e,size:r,fullWidth:s,className:i,type:l,...n},d){return(0,t.jsx)("button",{ref:d,type:l??"button",className:a({variant:e,size:r,fullWidth:s,className:i}),...n})});e.s(["V2Button",0,r,"v2ButtonClassName",()=>a])},283538,e=>{"use strict";var t=e.i(843476);function a({children:e,className:a=""}){return(0,t.jsx)("section",{className:"rounded-[var(--v2-radius-lg)] border border-[var(--v2-border)] bg-[var(--v2-surface)] shadow-[var(--v2-shadow-sm)] "+a,children:e})}function r({title:e,subtitle:a,right:r}){return(0,t.jsxs)("header",{className:"flex items-start justify-between gap-3 px-4 pt-4",children:[(0,t.jsxs)("div",{className:"min-w-0",children:[(0,t.jsx)("div",{className:"text-[15px] font-semibold text-[var(--v2-text)]",children:e}),a?(0,t.jsx)("div",{className:"mt-0.5 text-[13px] text-[var(--v2-muted)]",children:a}):null]}),r?(0,t.jsx)("div",{className:"shrink-0",children:r}):null]})}function s({children:e}){return(0,t.jsx)("div",{className:"px-4 pb-4 pt-3",children:e})}e.s(["V2Card",()=>a,"V2CardBody",()=>s,"V2CardHeader",()=>r])},59298,e=>{"use strict";var t=e.i(843476);function a({className:e=""}){return(0,t.jsx)("div",{className:"animate-pulse rounded-xl border border-[var(--v2-border)] bg-[var(--v2-surface-2)] "+e,"aria-hidden":"true"})}e.s(["V2Skeleton",()=>a])},882277,e=>{"use strict";var t=e.i(843476);function a({tabs:e,activeId:a,onChange:r}){return(0,t.jsx)("div",{className:"grid gap-1 rounded-2xl border border-[var(--v2-border)] bg-[var(--v2-surface)] p-1 shadow-[var(--v2-shadow-sm)]",style:{gridTemplateColumns:`repeat(${Math.max(1,e.length)}, minmax(0, 1fr))`},role:"tablist",children:e.map(e=>{let s=e.id===a;return(0,t.jsx)("button",{type:"button",role:"tab","aria-selected":s,className:"h-10 rounded-xl text-[13px] font-semibold transition "+(s?"bg-[var(--v2-surface-2)] text-[var(--v2-text)]":"text-[var(--v2-muted)] hover:bg-[var(--v2-surface-2)]/70"),onClick:()=>r(e.id),children:e.label},e.id)})})}e.s(["V2Tabs",()=>a])},355506,e=>{"use strict";var t=e.i(843476),a=e.i(271645);function r({open:e,title:r,onClose:s,children:i}){return((0,a.useEffect)(()=>{if(!e)return;let t=e=>{"Escape"===e.key&&s()};document.addEventListener("keydown",t);let a=document.documentElement.style.overflow;return document.documentElement.style.overflow="hidden",()=>{document.removeEventListener("keydown",t),document.documentElement.style.overflow=a}},[e,s]),e)?(0,t.jsxs)("div",{className:"fixed inset-0 z-[100]",children:[(0,t.jsx)("button",{type:"button",className:"absolute inset-0 bg-black/40","aria-label":"Close",onClick:s}),(0,t.jsxs)("div",{className:"absolute inset-x-0 bottom-0 mx-auto w-full max-w-xl rounded-t-[28px] border border-[var(--v2-border)] bg-[var(--v2-surface)] shadow-[var(--v2-shadow-md)]",style:{paddingBottom:"env(safe-area-inset-bottom)"},role:"dialog","aria-modal":"true",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between gap-3 px-4 pb-2 pt-3",children:[(0,t.jsx)("div",{className:"min-w-0",children:r?(0,t.jsx)("div",{className:"truncate text-[15px] font-semibold text-[var(--v2-text)]",children:r}):null}),(0,t.jsx)("button",{type:"button",onClick:s,className:"h-9 rounded-xl px-3 text-[13px] font-semibold text-[var(--v2-muted)] hover:bg-[var(--v2-surface-2)]",children:"Close"})]}),(0,t.jsx)("div",{className:"max-h-[70dvh] overflow-auto px-4 pb-4 pt-2",children:i})]})]}):null}e.s(["V2Sheet",()=>r])},21485,e=>{"use strict";var t=e.i(843476),a=e.i(271645),r=e.i(618566),s=e.i(184724),i=e.i(283538),l=e.i(796830),n=e.i(355506),d=e.i(59298),o=e.i(882277);function c(e){let t="number"==typeof e?e:Number(String(e));return Number.isFinite(t)?t:null}function u(e,t){let a=c(e),r=c(t);return null==a||null==r||a<=0?null:(r-a)/a*100}function v(e){let t=c(e);if(null==t)return"—";if(0===t)return"0";let a=Math.abs(t);return t.toLocaleString(void 0,{maximumFractionDigits:a>=1e3?2:a>=1?4:a>=.01?6:8})}let m={base:"BTC",quote:"USDT"};function x(){let e,x,h=(0,r.useSearchParams)(),p=(e=String(h?.get("base")??"").trim().toUpperCase(),x=String(h?.get("quote")??"").trim().toUpperCase(),e&&x?{base:e,quote:x}:m),[b,f]=(0,a.useState)(p),[g,y]=(0,a.useState)(!1),[j,w]=(0,a.useState)("chart"),[N,S]=(0,a.useState)(!0),[k,C]=(0,a.useState)(null),[_,E]=(0,a.useState)([]),[q,V]=(0,a.useState)(""),[U,$]=(0,a.useState)(!1),[B,T]=(0,a.useState)(null),[I,L]=(0,a.useState)(null),[M,O]=(0,a.useState)(!1),[R,A]=(0,a.useState)(null),[D,P]=(0,a.useState)(null),[H,F]=(0,a.useState)("1h"),[W,J]=(0,a.useState)(!1),[z,K]=(0,a.useState)(null),[G,Q]=(0,a.useState)(null),[X,Y]=(0,a.useState)("buy"),[Z,ee]=(0,a.useState)("market"),[et,ea]=(0,a.useState)(""),[er,es]=(0,a.useState)(""),[ei,el]=(0,a.useState)({kind:"idle"}),en=(0,a.useRef)(0),ed=(0,a.useRef)(null),eo=`${b.base}/${b.quote}`;(0,a.useEffect)(()=>{try{localStorage.setItem("cw:v2:lastPair",JSON.stringify({base:b.base,quote:b.quote}))}catch{}},[b.base,b.quote]),(0,a.useEffect)(()=>{let e=String(h?.get("base")??"").trim().toUpperCase(),t=String(h?.get("quote")??"").trim().toUpperCase();e&&t&&(e!==b.base||t!==b.quote)&&f({base:e,quote:t})},[h]),(0,a.useEffect)(()=>{let e=!1,t=async()=>{C(null);try{let t=await fetch("/api/exchange/markets/overview?fiat=USD",{cache:"no-store"}),a=await t.json().catch(()=>null);if(!t.ok)throw Error("markets_unavailable");let r=(Array.isArray(a?.markets)?a.markets:[]).filter(e=>"USDT"===String(e.quote_symbol).toUpperCase());e||E(r)}catch(t){e||C(t instanceof Error?t.message:String(t))}finally{e||S(!1)}};t();let a=window.setInterval(()=>void t(),15e3);return()=>{e=!0,window.clearInterval(a)}},[]);let ec=(0,a.useMemo)(()=>{let e=b.base.toUpperCase(),t=b.quote.toUpperCase();return _.find(a=>String(a.base_symbol).toUpperCase()===e&&String(a.quote_symbol).toUpperCase()===t)??null},[_,b.base,b.quote]),eu=ec?.id??null,ev=ec?.stats?.last??null,em=u(ec?.stats?.open??null,ec?.stats?.last??null),ex=null==em?"—":`${em>=0?"+":""}${em.toFixed(2)}%`,eh=null==em?"text-[var(--v2-muted)]":em>=0?"text-[var(--up)]":"text-[var(--down)]",ep=ec?.stats&&ec.stats.high?String(ec.stats.high):null,eb=ec?.stats&&ec.stats.low?String(ec.stats.low):null,ef=ec?.stats?.quote_volume??null,eg=(0,a.useMemo)(()=>[{id:"chart",label:"Chart"},{id:"book",label:"Book"},{id:"trades",label:"Trades"}],[]),ey=async(e,t)=>{T(null),$(!0);try{let a=await fetch(`/api/exchange/marketdata/depth?market_id=${encodeURIComponent(e)}&levels=12`,{cache:"no-store",signal:t}),r=await a.json().catch(()=>null);if(!a.ok)throw Error("depth_unavailable");L(r)}catch(e){if(e instanceof DOMException&&"AbortError"===e.name)return;T(e instanceof Error?e.message:String(e))}finally{$(!1)}},ej=async(e,t)=>{A(null),O(!0);try{let a=await fetch(`/api/exchange/marketdata/trades?market_id=${encodeURIComponent(e)}&limit=30`,{cache:"no-store",signal:t}),r=await a.json().catch(()=>null);if(!a.ok)throw Error("trades_unavailable");P(r)}catch(e){if(e instanceof DOMException&&"AbortError"===e.name)return;A(e instanceof Error?e.message:String(e))}finally{O(!1)}},ew=async(e,t,a)=>{K(null),J(!0);try{let r=await fetch(`/api/exchange/marketdata/candles?market_id=${encodeURIComponent(e)}&interval=1m&limit=${encodeURIComponent(String(t))}`,{cache:"no-store",signal:a}),s=await r.json().catch(()=>null);if(!r.ok)throw Error("candles_unavailable");Q(s)}catch(e){if(e instanceof DOMException&&"AbortError"===e.name)return;K(e instanceof Error?e.message:String(e))}finally{J(!1)}};(0,a.useEffect)(()=>{if(!eu)return;let e=new AbortController,t=null,a=null,r=()=>{try{ed.current?.close()}catch{}ed.current=null},s=()=>{t&&(window.clearInterval(t),t=null)},i=()=>{a&&(window.clearTimeout(a),a=null)},l=()=>{"book"===j?("visible"===document.visibilityState&&ey(eu,e.signal),t=window.setInterval(()=>{"visible"===document.visibilityState&&ey(eu,e.signal)},2200)):"trades"===j&&("visible"===document.visibilityState&&ej(eu,e.signal),t=window.setInterval(()=>{"visible"===document.visibilityState&&ej(eu,e.signal)},2800))},n=e=>{"visible"!==document.visibilityState||"book"!==j&&"trades"!==j||"u"<typeof EventSource||ed.current||a||(a=window.setTimeout(()=>{a=null,"visible"===document.visibilityState&&("book"===j?o():"trades"===j&&c())},e))},d=()=>{"visible"!==document.visibilityState||t||l()},o=()=>{if("visible"===document.visibilityState){r(),i(),s(),T(null),$(!0);try{let e=`/api/exchange/marketdata/stream?market_id=${encodeURIComponent(eu)}&topics=depth&levels=12&poll_ms=1000&heartbeat_ms=15000`,t=new EventSource(e);t.addEventListener("depth",e=>{try{let t=JSON.parse(String(e.data??"{}"));L(t)}catch{}finally{$(!1)}}),t.onerror=()=>{r(),$(!1),d(),n(4500)},ed.current=t}catch{r(),$(!1),d(),n(4500)}}},c=()=>{if("visible"===document.visibilityState){r(),i(),s(),A(null),O(!0);try{let e=`/api/exchange/marketdata/stream?market_id=${encodeURIComponent(eu)}&topics=trades&trades_limit=30&trades_delta=1&poll_ms=1200&heartbeat_ms=15000`,t=new EventSource(e);t.addEventListener("trades",e=>{try{let t=JSON.parse(String(e.data??"{}")),a=Array.isArray(t?.trades)?t.trades:[],r=String(t?.mode??"snapshot");"delta"===r?P(e=>{let t=e?.trades??[],r=[...a,...t],s=new Set,i=[];for(let e of r){let t=String(e?.id??"");if(!(!t||s.has(t))&&(s.add(t),i.push(e),i.length>=30))break}return{trades:i}}):P({trades:a})}catch{}finally{O(!1)}}),t.onerror=()=>{r(),O(!1),d(),n(4500)},ed.current=t}catch{r(),O(!1),d(),n(4500)}}},u=()=>{if("visible"===document.visibilityState)if("book"===j)"u">typeof EventSource?o():l();else if("trades"===j)"u">typeof EventSource?c():l();else if("chart"===j){let a;r(),i(),a="6h"===H?360:"8h"===H?500:60,"visible"===document.visibilityState&&ew(eu,a,e.signal),t=window.setInterval(()=>{"visible"===document.visibilityState&&ew(eu,a,e.signal)},15e3)}else r(),i()},v=()=>{r(),i(),s()},m=()=>{"visible"===document.visibilityState?(v(),u()):v()};return document.addEventListener("visibilitychange",m),u(),()=>{document.removeEventListener("visibilitychange",m),v(),e.abort()}},[eu,j,H]),(0,a.useEffect)(()=>{L(null),P(null),Q(null),T(null),A(null),K(null)},[eu]);let eN=(0,a.useMemo)(()=>(G?.candles??[]).map(e=>c(e.close)).filter(e=>"number"==typeof e&&Number.isFinite(e)),[G]),eS=(0,a.useMemo)(()=>{if(eN.length<2)return null;let e=Math.min(...eN),t=Math.max(...eN),a=t-e||1,r=100/(eN.length-1);return{d:eN.map((t,s)=>`${0===s?"M":"L"}${(s*r).toFixed(2)} ${(40-(t-e)/a*40).toFixed(2)}`).join(" "),up:eN[eN.length-1]>=eN[0],min:e,max:t,first:eN[0],last:eN[eN.length-1]}},[eN]),ek=async()=>{if(!eu)return void el({kind:"error",message:"Market not available."});if(ec?.is_halted)return void el({kind:"error",message:"This market is halted."});let e=et.trim();if(!e)return void el({kind:"error",message:"Enter an amount."});if("limit"===Z&&!er.trim())return void el({kind:"error",message:"Enter a limit price."});let t=Date.now();if(!(t-en.current<900)){en.current=t,el({kind:"placing"});try{let t="limit"===Z?{market_id:eu,side:X,type:"limit",price:er.trim(),quantity:e}:{market_id:eu,side:X,type:"market",quantity:e},a=await fetch("/api/exchange/orders",{method:"POST",credentials:"include",headers:{"content-type":"application/json"},body:JSON.stringify(t)}),r=await a.text(),s=null;try{s=JSON.parse(r)}catch{s={_raw:r}}if(!a.ok){let e="string"==typeof s?.error?s.error:`http_${a.status}`;el({kind:"error",message:e});return}el({kind:"ok",message:"Order placed"}),ea("")}catch(e){el({kind:"error",message:e instanceof Error?e.message:String(e)})}}};return(0,t.jsxs)("main",{className:"space-y-4",children:[(0,t.jsx)("header",{className:"space-y-2",children:(0,t.jsxs)("div",{className:"flex items-start justify-between gap-3",children:[(0,t.jsxs)("div",{className:"min-w-0",children:[(0,t.jsx)("div",{className:"text-[11px] font-bold uppercase tracking-widest text-[var(--v2-muted)]",children:"Trade"}),(0,t.jsxs)("div",{className:"mt-0.5 flex items-center gap-2",children:[(0,t.jsx)("button",{type:"button",onClick:()=>y(!0),className:"truncate rounded-xl bg-[var(--v2-surface)] px-2 py-1 text-xl font-extrabold tracking-tight shadow-[var(--v2-shadow-sm)] hover:bg-[var(--v2-surface-2)]",title:"Change pair",children:eo}),(0,t.jsx)("span",{className:"rounded-full border border-[var(--v2-border)] bg-[var(--v2-surface)] px-2 py-1 text-[12px] font-semibold text-[var(--v2-muted)]",children:"Spot"})]}),(0,t.jsxs)("div",{className:"mt-1 flex flex-wrap items-center gap-3 text-[13px]",children:[(0,t.jsx)("span",{className:"font-semibold text-[var(--v2-text)]",children:N?"…":v(ev)}),(0,t.jsx)("span",{className:`font-semibold ${eh}`,children:N?"…":ex}),ec?.is_halted?(0,t.jsx)("span",{className:"rounded-full border border-[var(--v2-border)] bg-[var(--warn-bg)] px-2 py-0.5 text-[11px] font-semibold text-[var(--warn)]",children:"Halted"}):null,k?(0,t.jsx)("span",{className:"text-[12px] text-[var(--down)]",children:"Live data unavailable"}):null]}),(0,t.jsxs)("div",{className:"mt-2 flex flex-wrap items-center gap-3 text-[12px] text-[var(--v2-muted)]",children:[(0,t.jsxs)("span",{children:["24h H ",N?"…":v(ep)]}),(0,t.jsxs)("span",{children:["24h L ",N?"…":v(eb)]}),(0,t.jsxs)("span",{children:["Vol ",N?"…":v(ef)," ",String(b.quote).toUpperCase()]})]})]}),(0,t.jsx)(s.V2Button,{variant:"primary",size:"sm",onClick:()=>y(!0),children:"Pairs"})]})}),(0,t.jsx)(o.V2Tabs,{tabs:eg,activeId:j,onChange:e=>w(e)}),(0,t.jsxs)(i.V2Card,{children:[(0,t.jsx)(i.V2CardHeader,{title:"chart"===j?"Chart":"book"===j?"Order book":"Recent trades",subtitle:"chart"===j?"Price action":"book"===j?"Liquidity":"Latest fills"}),(0,t.jsx)(i.V2CardBody,{children:"chart"===j?z?(0,t.jsx)("div",{className:"text-sm text-[var(--down)]",children:"Chart unavailable."}):W&&!G?(0,t.jsx)(d.V2Skeleton,{className:"h-48 w-full"}):eS?(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsx)("div",{className:"grid grid-cols-3 gap-2",children:[{id:"1h",label:"1H"},{id:"6h",label:"6H"},{id:"8h",label:"8H"}].map(e=>{let a=H===e.id;return(0,t.jsx)("button",{type:"button",onClick:()=>F(e.id),className:"h-10 rounded-xl border px-3 text-[13px] font-semibold shadow-[var(--v2-shadow-sm)] "+(a?"border-[var(--v2-border)] bg-[var(--v2-surface-2)] text-[var(--v2-text)]":"border-[var(--v2-border)] bg-[var(--v2-surface)] text-[var(--v2-muted)] hover:bg-[var(--v2-surface-2)]"),children:e.label},e.id)})}),(0,t.jsxs)("div",{className:"rounded-2xl border border-[var(--v2-border)] bg-[var(--v2-surface-2)] p-3",children:[(0,t.jsx)("svg",{viewBox:"0 0 100 40",width:"100%",height:"180",preserveAspectRatio:"none","aria-label":"Price chart",children:(0,t.jsx)("path",{d:eS.d,fill:"none",stroke:eS.up?"var(--up)":"var(--down)",strokeWidth:"2",strokeLinejoin:"round",strokeLinecap:"round"})}),(0,t.jsxs)("div",{className:"mt-2 flex items-center justify-between gap-3 text-[12px]",children:[(0,t.jsxs)("div",{className:"text-[var(--v2-muted)]",children:["min ",v(String(eS.min))]}),(0,t.jsxs)("div",{className:`font-semibold ${eS.up?"text-[var(--up)]":"text-[var(--down)]"}`,children:["last ",v(String(eS.last))]}),(0,t.jsxs)("div",{className:"text-[var(--v2-muted)]",children:["max ",v(String(eS.max))]})]})]})]}):(0,t.jsx)("div",{className:"text-[12px] text-[var(--v2-muted)]",children:"No trades yet."}):"book"===j?B?(0,t.jsx)("div",{className:"text-sm text-[var(--down)]",children:"Order book unavailable."}):U&&!I?(0,t.jsx)(d.V2Skeleton,{className:"h-48 w-full"}):(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"mb-2 text-[12px] font-semibold text-[var(--v2-muted)]",children:"Bids"}),(0,t.jsxs)("div",{className:"grid gap-1",children:[(I?.depth?.bids??[]).slice(0,12).map((e,a)=>(0,t.jsxs)("div",{className:"flex items-center justify-between gap-2 rounded-xl bg-[var(--v2-surface-2)] px-2 py-1",children:[(0,t.jsx)("div",{className:"font-mono text-[12px] font-semibold text-[var(--up)]",children:v(e.price)}),(0,t.jsx)("div",{className:"font-mono text-[12px] text-[var(--v2-text)]",children:v(e.quantity)})]},`b:${a}`)),0===(I?.depth?.bids??[]).length?(0,t.jsx)("div",{className:"text-[12px] text-[var(--v2-muted)]",children:"No bids."}):null]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"mb-2 text-[12px] font-semibold text-[var(--v2-muted)]",children:"Asks"}),(0,t.jsxs)("div",{className:"grid gap-1",children:[(I?.depth?.asks??[]).slice(0,12).map((e,a)=>(0,t.jsxs)("div",{className:"flex items-center justify-between gap-2 rounded-xl bg-[var(--v2-surface-2)] px-2 py-1",children:[(0,t.jsx)("div",{className:"font-mono text-[12px] font-semibold text-[var(--down)]",children:v(e.price)}),(0,t.jsx)("div",{className:"font-mono text-[12px] text-[var(--v2-text)]",children:v(e.quantity)})]},`a:${a}`)),0===(I?.depth?.asks??[]).length?(0,t.jsx)("div",{className:"text-[12px] text-[var(--v2-muted)]",children:"No asks."}):null]})]})]}):R?(0,t.jsx)("div",{className:"text-sm text-[var(--down)]",children:"Trades unavailable."}):M&&!D?(0,t.jsx)(d.V2Skeleton,{className:"h-48 w-full"}):(0,t.jsxs)("div",{className:"grid gap-1",children:[(D?.trades??[]).slice(0,30).map(e=>{let a=e.created_at?new Date(e.created_at).toLocaleTimeString():"";return(0,t.jsxs)("div",{className:"flex items-center justify-between gap-2 rounded-xl bg-[var(--v2-surface-2)] px-2 py-1",children:[(0,t.jsx)("div",{className:"font-mono text-[12px] text-[var(--v2-muted)]",children:a}),(0,t.jsx)("div",{className:"font-mono text-[12px] font-semibold text-[var(--v2-text)]",children:v(e.price)}),(0,t.jsx)("div",{className:"font-mono text-[12px] text-[var(--v2-text)]",children:v(e.quantity)})]},e.id)}),0===(D?.trades??[]).length?(0,t.jsx)("div",{className:"text-[12px] text-[var(--v2-muted)]",children:"No trades yet."}):null]})})]}),(0,t.jsxs)(i.V2Card,{children:[(0,t.jsx)(i.V2CardHeader,{title:"Place order",subtitle:ec?.is_halted?"Market halted":"Market / Limit"}),(0,t.jsx)(i.V2CardBody,{children:(0,t.jsxs)("div",{className:"grid gap-3",children:[(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,t.jsx)(s.V2Button,{variant:"buy"===X?"primary":"secondary",fullWidth:!0,onClick:()=>Y("buy"),children:"Buy"}),(0,t.jsx)(s.V2Button,{variant:"sell"===X?"danger":"secondary",fullWidth:!0,onClick:()=>Y("sell"),children:"Sell"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,t.jsx)(s.V2Button,{variant:"market"===Z?"primary":"secondary",fullWidth:!0,onClick:()=>ee("market"),children:"Market"}),(0,t.jsx)(s.V2Button,{variant:"limit"===Z?"primary":"secondary",fullWidth:!0,onClick:()=>ee("limit"),children:"Limit"})]}),"limit"===Z?(0,t.jsxs)("div",{className:"grid gap-2",children:[(0,t.jsxs)("div",{className:"text-[12px] font-semibold text-[var(--v2-muted)]",children:["Limit price (",b.quote,")"]}),(0,t.jsx)(l.V2Input,{inputMode:"decimal",placeholder:`0.00 ${b.quote}`,value:er,onChange:e=>es(e.target.value)})]}):null,(0,t.jsxs)("div",{className:"grid gap-2",children:[(0,t.jsx)("div",{className:"text-[12px] font-semibold text-[var(--v2-muted)]",children:"Amount"}),(0,t.jsx)(l.V2Input,{inputMode:"decimal",placeholder:`0.00 ${b.base}`,value:et,onChange:e=>ea(e.target.value)})]}),(0,t.jsx)(s.V2Button,{variant:"buy"===X?"primary":"danger",size:"lg",fullWidth:!0,disabled:"placing"===ei.kind||!eu||!!ec?.is_halted,onClick:()=>void ek(),children:"placing"===ei.kind?"Placing…":"buy"===X?"Buy":"Sell"}),"ok"===ei.kind?(0,t.jsx)("div",{className:"rounded-2xl border border-[var(--v2-border)] bg-[var(--up-bg)] px-3 py-2 text-[13px] font-semibold text-[var(--up)]",children:ei.message??"Order placed"}):"error"===ei.kind?(0,t.jsx)("div",{className:"rounded-2xl border border-[var(--v2-border)] bg-[var(--down-bg)] px-3 py-2 text-[13px] font-semibold text-[var(--down)]",children:ei.message??"Order failed"}):null,(0,t.jsx)("div",{className:"text-[12px] text-[var(--v2-muted)]",children:"Next: fee preview, balance checks, and one-tap confirm."})]})})]}),(0,t.jsx)(n.V2Sheet,{open:g,title:"Select a pair",onClose:()=>y(!1),children:(0,t.jsxs)("div",{className:"grid gap-3",children:[(0,t.jsx)(l.V2Input,{value:q,onChange:e=>V(e.target.value),placeholder:"Search BTC, ETH…"}),(0,t.jsx)("div",{className:"grid gap-2",children:(_.length?_:[{id:"fallback",symbol:"BTC/USDT",is_halted:!1,base_symbol:b.base,quote_symbol:b.quote,stats:null}]).filter(e=>{let t=q.trim().toUpperCase();return!t||`${String(e.base_symbol).toUpperCase()}/${String(e.quote_symbol).toUpperCase()}`.includes(t)||String(e.symbol).toUpperCase().includes(t)}).slice(0,60).map(e=>{let a={base:String(e.base_symbol).toUpperCase(),quote:String(e.quote_symbol).toUpperCase()},r=`${a.base}/${a.quote}`,s=a.base===b.base&&a.quote===b.quote,i=e.stats?.last??null,l=u(e.stats?.open??null,e.stats?.last??null),n=null==l?"—":`${l>=0?"+":""}${l.toFixed(2)}%`,d=null==l?"text-[var(--v2-muted)]":l>=0?"text-[var(--up)]":"text-[var(--down)]";return(0,t.jsxs)("button",{type:"button",onClick:()=>{f(a),y(!1)},className:"flex h-12 items-center justify-between rounded-2xl border px-4 text-left shadow-[var(--v2-shadow-sm)] transition "+(s?"border-[color-mix(in_srgb,var(--v2-accent)_55%,transparent)] bg-[color-mix(in_srgb,var(--v2-accent)_10%,transparent)]":"border-[var(--v2-border)] bg-[var(--v2-surface)] hover:bg-[var(--v2-surface-2)]"),children:[(0,t.jsx)("div",{className:"text-[15px] font-semibold text-[var(--v2-text)]",children:r}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsx)("div",{className:"text-[12px] font-semibold text-[var(--v2-text)]",children:N?"…":v(i)}),(0,t.jsx)("div",{className:`text-[11px] font-semibold ${d}`,children:N?"…":n})]})]},r)})})]})})]})}e.s(["TradeClient",()=>x])}]);