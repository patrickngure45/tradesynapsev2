(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,283538,e=>{"use strict";var t=e.i(843476);function s({children:e,className:s=""}){return(0,t.jsx)("section",{className:"rounded-[var(--v2-radius-lg)] border border-[var(--v2-border)] bg-[var(--v2-surface)] shadow-[var(--v2-shadow-sm)] "+s,children:e})}function r({title:e,subtitle:s,right:r}){return(0,t.jsxs)("header",{className:"flex items-start justify-between gap-3 px-4 pt-4",children:[(0,t.jsxs)("div",{className:"min-w-0",children:[(0,t.jsx)("div",{className:"text-[15px] font-semibold text-[var(--v2-text)]",children:e}),s?(0,t.jsx)("div",{className:"mt-0.5 text-[13px] text-[var(--v2-muted)]",children:s}):null]}),r?(0,t.jsx)("div",{className:"shrink-0",children:r}):null]})}function a({children:e}){return(0,t.jsx)("div",{className:"px-4 pb-4 pt-3",children:e})}e.s(["V2Card",()=>s,"V2CardBody",()=>a,"V2CardHeader",()=>r])},59298,e=>{"use strict";var t=e.i(843476);function s({className:e=""}){return(0,t.jsx)("div",{className:"animate-pulse rounded-xl border border-[var(--v2-border)] bg-[var(--v2-surface-2)] "+e,"aria-hidden":"true"})}e.s(["V2Skeleton",()=>s])},261238,e=>{"use strict";class t extends Error{code;details;status;requestId;constructor(e,t){super(t?.requestId?`${e} (req ${t.requestId})`:e),this.name="ApiError",this.code=e,this.details=t?.details,this.status=t?.status,this.requestId=t?.requestId}}function s(e){return new Promise(t=>setTimeout(t,Math.max(0,Math.floor(e))))}async function r(e,r){let a=r?{...r,credentials:r.credentials??"same-origin"}:{credentials:"same-origin"},i=(a?.method??"GET").toUpperCase();if(("GET"===i||"HEAD"===i)&&function(e){try{let t=window.location.origin,s="string"==typeof e?new URL(e,t):e instanceof URL?e:e instanceof Request?new URL(e.url):null;if(!s||s.origin!==t)return!1;return s.pathname.startsWith("/api/")}catch{return!1}}(e)){let e=function(){try{return(new URL(window.location.href).searchParams.get("user_id")??"").trim()||null}catch{return null}}();if(e){let t=new Headers(a?.headers);t.has("x-impersonate-user-id")||t.set("x-impersonate-user-id",e),a.headers=t}}if(["POST","PUT","PATCH","DELETE"].includes(i)){let e=function(){if("u"<typeof document)return null;let e=document.cookie.match(/(?:^|;\s*)__csrf=([^;]+)/);return e?.[1]??null}();if(e){let t=new Headers(a?.headers);t.has("x-csrf-token")||t.set("x-csrf-token",e),a.headers=t}}let n=(a?.method??"GET").toUpperCase(),l="GET"===n||"HEAD"===n,d=2*!!l,o=null;for(let r=0;r<=d;r+=1)try{let i=await fetch(e,a),n=i.headers.get("x-request-id")??void 0;try{n&&window.sessionStorage.setItem("ts.last_request_id",n)}catch{}let o=await i.text().catch(()=>""),c=(i.headers.get("content-type")??"").includes("text/html")||function(e){let t=String(e??"").trimStart();return t.startsWith("<!DOCTYPE html")||t.startsWith("<html")||t.startsWith("<!doctype html")}(o),u=c?{_raw:"<html/>"}:function(e){try{return e?JSON.parse(e):null}catch{return{_raw:e}}}(o);if(!i.ok){if(l&&(502===i.status||503===i.status||504===i.status)&&r<d){await s(250*Math.pow(2,r));continue}if(u&&"object"==typeof u&&"error"in u){let e="string"==typeof u.error?u.error:`http_${i.status}`,s=void 0!==u.details?u.details:"string"==typeof u.message?u.message:c?{message:`Upstream error (HTTP ${i.status}). Please retry.`}:void 0;throw new t(e,{details:s,status:i.status,requestId:n})}if(u&&"object"==typeof u&&"message"in u){let e="string"==typeof u.message?u.message:u;throw new t(`http_${i.status}`,{details:e,status:i.status,requestId:n})}let e=c?{message:`Upstream error (HTTP ${i.status}). Please retry.`}:u;throw new t(`http_${i.status}`,{details:e,status:i.status,requestId:n})}return u}catch(e){if(o=e,l&&r<d){await s(250*Math.pow(2,r));continue}throw e}throw o}e.s(["ApiError",()=>t,"fetchJsonOrThrow",()=>r])},366130,e=>{"use strict";var t=e.i(843476),s=e.i(271645),r=e.i(261238),a=e.i(283538),i=e.i(59298);function n(e){if(!Number.isFinite(e)||e<=0)return"0s";if(e<1)return`${Math.round(1e3*e)}ms`;if(e<60)return`${Math.round(10*e)/10}s`;let t=Math.floor(e/60),s=Math.round(e-60*t);if(t<60)return`${t}m ${s}s`;let r=Math.floor(t/60);return`${r}h ${t-60*r}m`}function l(){let[e,l]=(0,s.useState)(!0),[d,o]=(0,s.useState)(null),[c,u]=(0,s.useState)(null);function x(e){let t=c?.[e]?.distribution_all_time??[],s=t.reduce((e,t)=>e+(Number.isFinite(t.count)?t.count:0),0);return{rows:t,total:s}}(0,s.useEffect)(()=>{let e=!1;return(async()=>{l(!0),o(null);try{let t=await (0,r.fetchJsonOrThrow)("/api/admin/arcade/transparency",{cache:"no-store"});e||u(t)}catch(t){if(e)return;t instanceof r.ApiError?o(t.code):o("Network error")}finally{e||l(!1)}})(),()=>{e=!0}},[]);let v=(0,s.useMemo)(()=>x("daily_drop"),[c]),m=(0,s.useMemo)(()=>x("calendar_daily"),[c]),h=(0,s.useMemo)(()=>x("time_vault"),[c]),p=(0,s.useMemo)(()=>x("boost_draft"),[c]),f=(0,s.useMemo)(()=>x("ai_oracle"),[c]),b=(0,s.useMemo)(()=>{let e=(c?.latency_7d??[]).map(e=>({module:e.module,n:Number(e.n)||0,p50_s:Number(e.p50_s)||0,p95_s:Number(e.p95_s)||0,avg_s:Number(e.avg_s)||0})).filter(e=>e.n>0);return e.sort((e,t)=>t.p95_s-e.p95_s),e},[c]),g=(0,s.useMemo)(()=>{let e=(c?.overdue??[]).map(e=>({module:e.module,count:Number(e.count)||0})).filter(e=>e.count>0);return e.sort((e,t)=>t.count-e.count),e},[c]);return e?(0,t.jsx)(i.V2Skeleton,{className:"h-40"}):d?(0,t.jsxs)("div",{className:"rounded-2xl border border-[var(--v2-border)] bg-[var(--warn-bg)] px-6 py-5 text-[13px] font-semibold text-[var(--v2-text)]",children:["Error: ",(0,t.jsx)("span",{className:"font-extrabold",children:d})]}):c?(0,t.jsxs)("div",{className:"grid gap-6",children:[(0,t.jsx)("section",{className:"grid gap-4 md:grid-cols-4",children:[{k:"Actions",v:c.counts.actions_total,sub:"Total commits"},{k:"Resolved",v:c.counts.actions_resolved,sub:"Reveals completed"},{k:"Inventory",v:c.counts.inventory_quantity,sub:"Total items"},{k:"Stacks",v:c.counts.inventory_rows,sub:"Unique items"}].map(e=>(0,t.jsxs)(a.V2Card,{className:"p-4",children:[(0,t.jsx)("div",{className:"text-[11px] font-extrabold uppercase tracking-widest text-[var(--v2-muted)]",children:e.k}),(0,t.jsx)("div",{className:"mt-2 text-2xl font-extrabold tracking-tight text-[var(--v2-text)]",children:e.v}),(0,t.jsx)("div",{className:"mt-1 text-[12px] text-[var(--v2-muted)]",children:e.sub})]},e.k))}),[{key:"daily_drop",title:"Daily drop distribution",dist:v},{key:"calendar_daily",title:"Calendar distribution",dist:m},{key:"time_vault",title:"Time vault distribution",dist:h},{key:"boost_draft",title:"Boost draft distribution",dist:p},{key:"ai_oracle",title:"AI Oracle tier distribution",dist:f}].map(e=>(0,t.jsxs)(a.V2Card,{className:"p-5",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsxs)("span",{className:"relative inline-flex h-2.5 w-2.5 shrink-0 items-center justify-center",children:[(0,t.jsx)("span",{className:"absolute inline-flex h-2.5 w-2.5 rounded-full bg-[var(--v2-accent)]"}),(0,t.jsx)("span",{className:"absolute inline-flex h-4.5 w-4.5 rounded-full bg-[var(--v2-ring)]"})]}),(0,t.jsx)("div",{className:"text-[11px] font-extrabold uppercase tracking-widest text-[var(--v2-muted)]",children:e.title}),(0,t.jsx)("div",{className:"h-px flex-1 bg-[var(--v2-border)]"})]}),0===e.dist.total?(0,t.jsx)("div",{className:"mt-5 text-[13px] text-[var(--v2-muted)]",children:"No resolved actions yet."}):(0,t.jsx)("div",{className:"mt-5 grid gap-3",children:e.dist.rows.map(s=>{let r,a=Math.round(1e4*s.count/Math.max(1,e.dist.total))/100,i="legendary"===(r=String(s.rarity??"").toLowerCase())?{dot:"bg-[var(--warn)]",bg:"bg-[var(--warn-bg)]",text:"text-[var(--warn)]"}:"epic"===r?{dot:"bg-[var(--v2-accent-2)]",bg:"bg-[color-mix(in_srgb,var(--v2-accent-2)_12%,transparent)]",text:"text-[var(--v2-accent-2)]"}:"rare"===r?{dot:"bg-[var(--v2-accent)]",bg:"bg-[color-mix(in_srgb,var(--v2-accent)_10%,transparent)]",text:"text-[var(--v2-accent)]"}:{dot:"bg-[var(--v2-border)]",bg:"bg-[var(--v2-surface-2)]",text:"text-[var(--v2-muted)]"};return(0,t.jsxs)("div",{className:"rounded-xl border border-[var(--v2-border)] bg-[var(--v2-surface-2)] p-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between gap-3",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:`h-2.5 w-2.5 rounded-full ${i.dot}`,"aria-hidden":!0}),(0,t.jsx)("div",{className:"text-[13px] font-semibold text-[var(--v2-text)]",children:s.rarity})]}),(0,t.jsxs)("div",{className:"text-[12px] text-[var(--v2-muted)]",children:[s.count," · ",a,"%"]})]}),(0,t.jsx)("div",{className:"mt-3 h-2 w-full overflow-hidden rounded-full bg-[var(--v2-surface)]",children:(0,t.jsx)("div",{className:`h-full ${i.bg}`,style:{width:`${Math.min(100,Math.max(0,a))}%`}})})]},s.rarity)})})]},e.key)),(0,t.jsxs)(a.V2Card,{className:"p-5",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsxs)("span",{className:"relative inline-flex h-2.5 w-2.5 shrink-0 items-center justify-center",children:[(0,t.jsx)("span",{className:"absolute inline-flex h-2.5 w-2.5 rounded-full bg-[var(--v2-accent)]"}),(0,t.jsx)("span",{className:"absolute inline-flex h-4.5 w-4.5 rounded-full bg-[var(--v2-ring)]"})]}),(0,t.jsx)("div",{className:"text-[11px] font-extrabold uppercase tracking-widest text-[var(--v2-muted)]",children:"Resolution latency (7d)"}),(0,t.jsx)("div",{className:"h-px flex-1 bg-[var(--v2-border)]"})]}),0===b.length?(0,t.jsx)("div",{className:"mt-5 text-[13px] text-[var(--v2-muted)]",children:"No resolved actions in the last 7 days."}):(0,t.jsx)("div",{className:"mt-5 grid gap-2",children:b.map(e=>(0,t.jsxs)("div",{className:"grid gap-2 rounded-xl border border-[var(--v2-border)] bg-[var(--v2-surface-2)] p-4 md:grid-cols-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-[12px] font-semibold text-[var(--v2-text)]",children:e.module}),(0,t.jsxs)("div",{className:"mt-1 text-[12px] text-[var(--v2-muted)]",children:["n=",e.n]})]}),(0,t.jsxs)("div",{className:"text-[12px] text-[var(--v2-muted)]",children:[(0,t.jsx)("span",{className:"font-semibold text-[var(--v2-text)]",children:"p50"})," ",n(e.p50_s)]}),(0,t.jsxs)("div",{className:"text-[12px] text-[var(--v2-muted)]",children:[(0,t.jsx)("span",{className:"font-semibold text-[var(--v2-text)]",children:"p95"})," ",n(e.p95_s)]}),(0,t.jsxs)("div",{className:"text-[12px] text-[var(--v2-muted)]",children:[(0,t.jsx)("span",{className:"font-semibold text-[var(--v2-text)]",children:"avg"})," ",n(e.avg_s)]})]},e.module))})]}),(0,t.jsxs)(a.V2Card,{className:"p-5",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsxs)("span",{className:"relative inline-flex h-2.5 w-2.5 shrink-0 items-center justify-center",children:[(0,t.jsx)("span",{className:"absolute inline-flex h-2.5 w-2.5 rounded-full bg-[var(--warn)]"}),(0,t.jsx)("span",{className:"absolute inline-flex h-4.5 w-4.5 rounded-full bg-[var(--v2-ring)]"})]}),(0,t.jsx)("div",{className:"text-[11px] font-extrabold uppercase tracking-widest text-[var(--v2-muted)]",children:"Overdue actions"}),(0,t.jsx)("div",{className:"h-px flex-1 bg-[var(--v2-border)]"})]}),0===g.length?(0,t.jsx)("div",{className:"mt-5 text-[13px] text-[var(--v2-muted)]",children:"No overdue actions right now."}):(0,t.jsx)("div",{className:"mt-5 grid gap-2",children:g.map(e=>(0,t.jsxs)("div",{className:"flex items-center justify-between gap-3 rounded-xl border border-[var(--v2-border)] bg-[var(--v2-surface-2)] px-4 py-3",children:[(0,t.jsx)("div",{className:"text-[13px] font-semibold text-[var(--v2-text)]",children:e.module}),(0,t.jsxs)("div",{className:"text-[12px] font-extrabold text-[var(--v2-muted)]",children:["×",e.count]})]},e.module))})]})]}):(0,t.jsx)("div",{className:"rounded-2xl border border-[var(--v2-border)] bg-[var(--v2-surface)] px-6 py-10 text-center text-[13px] text-[var(--v2-muted)] shadow-[var(--v2-shadow-sm)]",children:"No data yet."})}e.s(["AdminArcadeTransparencyClient",()=>l])}]);