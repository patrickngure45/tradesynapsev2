(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,233525,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"warnOnce",{enumerable:!0,get:function(){return s}});let s=e=>{}},261238,e=>{"use strict";class t extends Error{code;details;status;requestId;constructor(e,t){super(t?.requestId?`${e} (req ${t.requestId})`:e),this.name="ApiError",this.code=e,this.details=t?.details,this.status=t?.status,this.requestId=t?.requestId}}function r(e){return new Promise(t=>setTimeout(t,Math.max(0,Math.floor(e))))}async function s(e,s){let a=s?{...s,credentials:s.credentials??"same-origin"}:{credentials:"same-origin"},n=(a?.method??"GET").toUpperCase();if(("GET"===n||"HEAD"===n)&&function(e){try{let t=window.location.origin,r="string"==typeof e?new URL(e,t):e instanceof URL?e:e instanceof Request?new URL(e.url):null;if(!r||r.origin!==t)return!1;return r.pathname.startsWith("/api/")}catch{return!1}}(e)){let e=function(){try{return(new URL(window.location.href).searchParams.get("user_id")??"").trim()||null}catch{return null}}();if(e){let t=new Headers(a?.headers);t.has("x-impersonate-user-id")||t.set("x-impersonate-user-id",e),a.headers=t}}if(["POST","PUT","PATCH","DELETE"].includes(n)){let e=function(){if("u"<typeof document)return null;let e=document.cookie.match(/(?:^|;\s*)__csrf=([^;]+)/);return e?.[1]??null}();if(e){let t=new Headers(a?.headers);t.has("x-csrf-token")||t.set("x-csrf-token",e),a.headers=t}}let i=(a?.method??"GET").toUpperCase(),o="GET"===i||"HEAD"===i,l=2*!!o,d=null;for(let s=0;s<=l;s+=1)try{let n=await fetch(e,a),i=n.headers.get("x-request-id")??void 0;try{i&&window.sessionStorage.setItem("ts.last_request_id",i)}catch{}let d=await n.text().catch(()=>""),c=(n.headers.get("content-type")??"").includes("text/html")||function(e){let t=String(e??"").trimStart();return t.startsWith("<!DOCTYPE html")||t.startsWith("<html")||t.startsWith("<!doctype html")}(d),u=c?{_raw:"<html/>"}:function(e){try{return e?JSON.parse(e):null}catch{return{_raw:e}}}(d);if(!n.ok){if(o&&(502===n.status||503===n.status||504===n.status)&&s<l){await r(250*Math.pow(2,s));continue}if(u&&"object"==typeof u&&"error"in u){let e="string"==typeof u.error?u.error:`http_${n.status}`,r=void 0!==u.details?u.details:"string"==typeof u.message?u.message:c?{message:`Upstream error (HTTP ${n.status}). Please retry.`}:void 0;throw new t(e,{details:r,status:n.status,requestId:i})}if(u&&"object"==typeof u&&"message"in u){let e="string"==typeof u.message?u.message:u;throw new t(`http_${n.status}`,{details:e,status:n.status,requestId:i})}let e=c?{message:`Upstream error (HTTP ${n.status}). Please retry.`}:u;throw new t(`http_${n.status}`,{details:e,status:n.status,requestId:i})}return u}catch(e){if(d=e,o&&s<l){await r(250*Math.pow(2,s));continue}throw e}throw d}e.s(["ApiError",()=>t,"fetchJsonOrThrow",()=>s])},184724,e=>{"use strict";var t=e.i(843476);function r(e){let t=e?.variant??"secondary",r=e?.size??"md";return["inline-flex select-none items-center justify-center gap-2 whitespace-nowrap rounded-xl transition focus:outline-none focus:ring-2 focus:ring-[var(--v2-ring)] disabled:pointer-events-none disabled:opacity-55","lg"===r?"h-12 px-5 text-[15px]":"sm"===r?"h-9 px-3 text-[13px]":"h-11 px-4 text-[14px]","primary"===t?"bg-[var(--v2-accent)] text-white font-semibold shadow-[var(--v2-shadow-sm)] hover:brightness-105":"danger"===t?"bg-[var(--down)] text-white font-semibold shadow-[var(--v2-shadow-sm)] hover:brightness-105":"ghost"===t?"bg-transparent text-[var(--v2-text)] font-semibold hover:bg-[var(--v2-surface-2)]":"border border-[var(--v2-border)] bg-[var(--v2-surface)] text-[var(--v2-text)] font-semibold shadow-[var(--v2-shadow-sm)] hover:bg-[var(--v2-surface-2)]",e?.fullWidth?"w-full":"",e?.className??""].filter(Boolean).join(" ")}let s=e.i(271645).forwardRef(function({variant:e,size:s,fullWidth:a,className:n,type:i,...o},l){return(0,t.jsx)("button",{ref:l,type:i??"button",className:r({variant:e,size:s,fullWidth:a,className:n}),...o})});e.s(["V2Button",0,s,"v2ButtonClassName",()=>r])},283538,e=>{"use strict";var t=e.i(843476);function r({children:e,className:r=""}){return(0,t.jsx)("section",{className:"rounded-[var(--v2-radius-lg)] border border-[var(--v2-border)] bg-[var(--v2-surface)] shadow-[var(--v2-shadow-sm)] "+r,children:e})}function s({title:e,subtitle:r,right:s}){return(0,t.jsxs)("header",{className:"flex items-start justify-between gap-3 px-4 pt-4",children:[(0,t.jsxs)("div",{className:"min-w-0",children:[(0,t.jsx)("div",{className:"text-[15px] font-semibold text-[var(--v2-text)]",children:e}),r?(0,t.jsx)("div",{className:"mt-0.5 text-[13px] text-[var(--v2-muted)]",children:r}):null]}),s?(0,t.jsx)("div",{className:"shrink-0",children:s}):null]})}function a({children:e}){return(0,t.jsx)("div",{className:"px-4 pb-4 pt-3",children:e})}e.s(["V2Card",()=>r,"V2CardBody",()=>a,"V2CardHeader",()=>s])},796830,e=>{"use strict";var t=e.i(843476);let r=e.i(271645).forwardRef(function({className:e="",type:r="text",...s},a){return(0,t.jsx)("input",{ref:a,type:r,className:"h-11 w-full rounded-xl border border-[var(--v2-border)] bg-[var(--v2-surface)] px-3 text-[14px] text-[var(--v2-text)] shadow-[var(--v2-shadow-sm)] outline-none placeholder:text-[color-mix(in_srgb,var(--v2-muted)_70%,transparent)] focus:ring-2 focus:ring-[var(--v2-ring)] "+e,...s})});e.s(["V2Input",0,r])},998183,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var s={assign:function(){return l},searchParamsToUrlQuery:function(){return n},urlQueryToSearchParams:function(){return o}};for(var a in s)Object.defineProperty(r,a,{enumerable:!0,get:s[a]});function n(e){let t={};for(let[r,s]of e.entries()){let e=t[r];void 0===e?t[r]=s:Array.isArray(e)?e.push(s):t[r]=[e,s]}return t}function i(e){return"string"==typeof e?e:("number"!=typeof e||isNaN(e))&&"boolean"!=typeof e?"":String(e)}function o(e){let t=new URLSearchParams;for(let[r,s]of Object.entries(e))if(Array.isArray(s))for(let e of s)t.append(r,i(e));else t.set(r,i(s));return t}function l(e,...t){for(let r of t){for(let t of r.keys())e.delete(t);for(let[t,s]of r.entries())e.append(t,s)}return e}},195057,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var s={formatUrl:function(){return o},formatWithValidation:function(){return d},urlObjectKeys:function(){return l}};for(var a in s)Object.defineProperty(r,a,{enumerable:!0,get:s[a]});let n=e.r(190809)._(e.r(998183)),i=/https?|ftp|gopher|file/;function o(e){let{auth:t,hostname:r}=e,s=e.protocol||"",a=e.pathname||"",o=e.hash||"",l=e.query||"",d=!1;t=t?encodeURIComponent(t).replace(/%3A/i,":")+"@":"",e.host?d=t+e.host:r&&(d=t+(~r.indexOf(":")?`[${r}]`:r),e.port&&(d+=":"+e.port)),l&&"object"==typeof l&&(l=String(n.urlQueryToSearchParams(l)));let c=e.search||l&&`?${l}`||"";return s&&!s.endsWith(":")&&(s+=":"),e.slashes||(!s||i.test(s))&&!1!==d?(d="//"+(d||""),a&&"/"!==a[0]&&(a="/"+a)):d||(d=""),o&&"#"!==o[0]&&(o="#"+o),c&&"?"!==c[0]&&(c="?"+c),a=a.replace(/[?#]/g,encodeURIComponent),c=c.replace("#","%23"),`${s}${d}${a}${c}${o}`}let l=["auth","hash","host","hostname","href","path","pathname","port","protocol","query","search","slashes"];function d(e){return o(e)}},818581,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"useMergedRef",{enumerable:!0,get:function(){return a}});let s=e.r(271645);function a(e,t){let r=(0,s.useRef)(null),a=(0,s.useRef)(null);return(0,s.useCallback)(s=>{if(null===s){let e=r.current;e&&(r.current=null,e());let t=a.current;t&&(a.current=null,t())}else e&&(r.current=n(e,s)),t&&(a.current=n(t,s))},[e,t])}function n(e,t){if("function"!=typeof e)return e.current=t,()=>{e.current=null};{let r=e(t);return"function"==typeof r?r:()=>e(null)}}("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},718967,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var s={DecodeError:function(){return v},MiddlewareNotFoundError:function(){return b},MissingStaticPage:function(){return _},NormalizeError:function(){return x},PageNotFoundError:function(){return y},SP:function(){return h},ST:function(){return g},WEB_VITALS:function(){return n},execOnce:function(){return i},getDisplayName:function(){return u},getLocationOrigin:function(){return d},getURL:function(){return c},isAbsoluteUrl:function(){return l},isResSent:function(){return p},loadGetInitialProps:function(){return m},normalizeRepeatedSlashes:function(){return f},stringifyError:function(){return w}};for(var a in s)Object.defineProperty(r,a,{enumerable:!0,get:s[a]});let n=["CLS","FCP","FID","INP","LCP","TTFB"];function i(e){let t,r=!1;return(...s)=>(r||(r=!0,t=e(...s)),t)}let o=/^[a-zA-Z][a-zA-Z\d+\-.]*?:/,l=e=>o.test(e);function d(){let{protocol:e,hostname:t,port:r}=window.location;return`${e}//${t}${r?":"+r:""}`}function c(){let{href:e}=window.location,t=d();return e.substring(t.length)}function u(e){return"string"==typeof e?e:e.displayName||e.name||"Unknown"}function p(e){return e.finished||e.headersSent}function f(e){let t=e.split("?");return t[0].replace(/\\/g,"/").replace(/\/\/+/g,"/")+(t[1]?`?${t.slice(1).join("?")}`:"")}async function m(e,t){let r=t.res||t.ctx&&t.ctx.res;if(!e.getInitialProps)return t.ctx&&t.Component?{pageProps:await m(t.Component,t.ctx)}:{};let s=await e.getInitialProps(t);if(r&&p(r))return s;if(!s)throw Object.defineProperty(Error(`"${u(e)}.getInitialProps()" should resolve to an object. But found "${s}" instead.`),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});return s}let h="u">typeof performance,g=h&&["mark","measure","getEntriesByName"].every(e=>"function"==typeof performance[e]);class v extends Error{}class x extends Error{}class y extends Error{constructor(e){super(),this.code="ENOENT",this.name="PageNotFoundError",this.message=`Cannot find module for page: ${e}`}}class _ extends Error{constructor(e,t){super(),this.message=`Failed to load static file for page: ${e} ${t}`}}class b extends Error{constructor(){super(),this.code="ENOENT",this.message="Cannot find the middleware module"}}function w(e){return JSON.stringify({message:e.message,stack:e.stack})}},573668,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"isLocalURL",{enumerable:!0,get:function(){return n}});let s=e.r(718967),a=e.r(652817);function n(e){if(!(0,s.isAbsoluteUrl)(e))return!0;try{let t=(0,s.getLocationOrigin)(),r=new URL(e,t);return r.origin===t&&(0,a.hasBasePath)(r.pathname)}catch(e){return!1}}},284508,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"errorOnce",{enumerable:!0,get:function(){return s}});let s=e=>{}},522016,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var s={default:function(){return v},useLinkStatus:function(){return y}};for(var a in s)Object.defineProperty(r,a,{enumerable:!0,get:s[a]});let n=e.r(190809),i=e.r(843476),o=n._(e.r(271645)),l=e.r(195057),d=e.r(8372),c=e.r(818581),u=e.r(718967),p=e.r(405550);e.r(233525);let f=e.r(91949),m=e.r(573668),h=e.r(509396);function g(e){return"string"==typeof e?e:(0,l.formatUrl)(e)}function v(t){var r;let s,a,n,[l,v]=(0,o.useOptimistic)(f.IDLE_LINK_STATUS),y=(0,o.useRef)(null),{href:_,as:b,children:w,prefetch:j=null,passHref:N,replace:k,shallow:T,scroll:S,onClick:C,onMouseEnter:P,onTouchStart:E,legacyBehavior:O=!1,onNavigate:A,ref:R,unstable_dynamicOnHover:I,...$}=t;s=w,O&&("string"==typeof s||"number"==typeof s)&&(s=(0,i.jsx)("a",{children:s}));let U=o.default.useContext(d.AppRouterContext),q=!1!==j,B=!1!==j?null===(r=j)||"auto"===r?h.FetchStrategy.PPR:h.FetchStrategy.Full:h.FetchStrategy.PPR,{href:M,as:V}=o.default.useMemo(()=>{let e=g(_);return{href:e,as:b?g(b):e}},[_,b]);if(O){if(s?.$$typeof===Symbol.for("react.lazy"))throw Object.defineProperty(Error("`<Link legacyBehavior>` received a direct child that is either a Server Component, or JSX that was loaded with React.lazy(). This is not supported. Either remove legacyBehavior, or make the direct child a Client Component that renders the Link's `<a>` tag."),"__NEXT_ERROR_CODE",{value:"E863",enumerable:!1,configurable:!0});a=o.default.Children.only(s)}let L=O?a&&"object"==typeof a&&a.ref:R,D=o.default.useCallback(e=>(null!==U&&(y.current=(0,f.mountLinkInstance)(e,M,U,B,q,v)),()=>{y.current&&((0,f.unmountLinkForCurrentNavigation)(y.current),y.current=null),(0,f.unmountPrefetchableInstance)(e)}),[q,M,U,B,v]),F={ref:(0,c.useMergedRef)(D,L),onClick(t){O||"function"!=typeof C||C(t),O&&a.props&&"function"==typeof a.props.onClick&&a.props.onClick(t),!U||t.defaultPrevented||function(t,r,s,a,n,i,l){if("u">typeof window){let d,{nodeName:c}=t.currentTarget;if("A"===c.toUpperCase()&&((d=t.currentTarget.getAttribute("target"))&&"_self"!==d||t.metaKey||t.ctrlKey||t.shiftKey||t.altKey||t.nativeEvent&&2===t.nativeEvent.which)||t.currentTarget.hasAttribute("download"))return;if(!(0,m.isLocalURL)(r)){n&&(t.preventDefault(),location.replace(r));return}if(t.preventDefault(),l){let e=!1;if(l({preventDefault:()=>{e=!0}}),e)return}let{dispatchNavigateAction:u}=e.r(699781);o.default.startTransition(()=>{u(s||r,n?"replace":"push",i??!0,a.current)})}}(t,M,V,y,k,S,A)},onMouseEnter(e){O||"function"!=typeof P||P(e),O&&a.props&&"function"==typeof a.props.onMouseEnter&&a.props.onMouseEnter(e),U&&q&&(0,f.onNavigationIntent)(e.currentTarget,!0===I)},onTouchStart:function(e){O||"function"!=typeof E||E(e),O&&a.props&&"function"==typeof a.props.onTouchStart&&a.props.onTouchStart(e),U&&q&&(0,f.onNavigationIntent)(e.currentTarget,!0===I)}};return(0,u.isAbsoluteUrl)(V)?F.href=V:O&&!N&&("a"!==a.type||"href"in a.props)||(F.href=(0,p.addBasePath)(V)),n=O?o.default.cloneElement(a,F):(0,i.jsx)("a",{...$,...F,children:s}),(0,i.jsx)(x.Provider,{value:l,children:n})}e.r(284508);let x=(0,o.createContext)(f.IDLE_LINK_STATUS),y=()=>(0,o.useContext)(x);("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},618566,(e,t,r)=>{t.exports=e.r(976562)},85222,470928,780827,238488,707709,783036,e=>{"use strict";var t=e.i(843476),r=e.i(271645);let s={missing_acting_user_id:{title:"Select an acting user",message:"Pick an acting user first (scopes the trade list)."},missing_or_invalid_users:{title:"Select buyer and seller",message:"Choose a buyer and a different seller before creating a trade."},missing_file:{title:"Missing file",message:"Choose a file to upload."},missing_submitted_by_user_id:{title:"Missing submitter",message:"Pick who is submitting this evidence."},missing_opened_by_user_id:{title:"Missing opener",message:"Pick who is opening the dispute."},missing_decided_by:{title:"Missing reviewer identity",message:"Enter a reviewer identity (decided_by)."},missing_x_user_id:{title:"Missing acting user",message:"This endpoint requires an acting user (session cookie or x-user-id)."},missing_user_id:{title:"Missing acting user",message:"Provide an acting user (session cookie, x-user-id, or user_id)."},session_user_mismatch:{title:"Signed-in user mismatch",message:"Your session is signed in as a different user. Sign in as the user for this action, or switch to header auth."},x_user_id_mismatch:{title:"Acting user mismatch",message:"The acting user does not match the user for this action."},arcade_key_required:{title:"Key required",message:"This action requires a Gate Key. Earn one from Arcade drops, then try again."},user_not_found:{title:"User not found",message:"That user id does not exist."},user_not_active:{title:"User not active",message:"That user is not active and cannot act on trades."},not_party:{title:"Not a party",message:"Only the buyer or seller can access this trade."},opened_by_not_party:{title:"Not a party",message:"Only the buyer or seller can open a dispute."},actor_not_allowed:{title:"Not allowed",message:"The signed-in user is not allowed to perform this action."},email_not_verified:{title:"Email not verified",message:"Verify your email to continue."},totp_setup_required:{title:"2FA required",message:"Set up 2FA (authenticator app) to continue."},totp_required:{title:"2FA code required",message:"Enter your 6-digit authenticator code to continue."},invalid_totp_code:{title:"Invalid 2FA code",message:"That code is invalid. Try again."},stepup_required:{title:"Passkey confirmation required",message:"Confirm with your passkey to continue."},passkey_not_configured:{title:"No passkeys enrolled",message:"Add a passkey in Account settings to use passkey confirmation."},webauthn_verification_failed:{title:"Passkey verification failed",message:"Passkey verification failed. Please try again."},invalid_or_expired_token:{title:"Expired",message:"This request expired. Please try again."},p2p_country_not_supported:{title:"Country not supported",message:"P2P is not available in your country yet."},p2p_open_orders_limit:{title:"Too many open trades",message:"You already have too many open P2P orders awaiting payment. Finish or cancel an existing order and try again."},p2p_order_duplicate_open:{title:"Order already open",message:"You already have an open order for this ad. Open the existing order to continue."},p2p_order_create_cooldown:{title:"Temporarily blocked",message:"You have too many recent payment timeouts. Please wait a bit before creating a new P2P order."},not_found:{title:"Not found",message:"The requested resource was not found."},trade_not_found:{title:"Trade not found",message:"That trade id was not found."},trade_transition_not_allowed:{title:"Invalid transition",message:"That action is not allowed for the trade's current status."},trade_not_cancelable:{title:"Cannot cancel",message:"This trade can't be canceled in its current state. If it's disputed, resolve it via a reviewer decision."},dispute_not_found:{title:"Dispute not found",message:"No dispute exists for this trade."},invalid_input:{title:"Invalid input",message:"Some fields were invalid. Check your inputs and try again."},internal_error:{title:"Server error",message:"The server hit an unexpected error. Try again in a moment."},upstream_unavailable:{title:"Service unavailable",message:"A required dependency is unavailable (typically the database). Try again shortly."},invalid_metadata_json:{title:"Invalid metadata",message:"Metadata JSON must be a valid JSON object."},unsupported_version:{title:"Unsupported version",message:"That API version is not supported."},dispute_already_exists:{title:"Dispute already exists",message:"This trade already has a dispute."},trade_not_disputable:{title:"Trade not disputable",message:"This trade can't be disputed in its current state."},dispute_not_open:{title:"Dispute not open",message:"This dispute is not open (already resolved or closed)."},trade_not_resolvable:{title:"Trade not resolvable",message:"This trade can't be resolved from dispute in its current state."},trade_not_disputed:{title:"Trade not in dispute",message:"This decision requires the trade to be in the disputed state."},trade_state_conflict:{title:"State changed",message:"The trade/dispute state changed while processing. Refresh and try again."},insufficient_balance:{title:"Insufficient balance",message:"You don't have enough available balance for this action."},recipient_not_found:{title:"Recipient not found",message:"No user exists with that email. Check for typos and try again."},recipient_inactive:{title:"Recipient unavailable",message:"That recipient account is not active and cannot receive transfers."},recipient_same_as_sender:{title:"Invalid recipient",message:"You cannot send a transfer to yourself."},transfer_not_found:{title:"Transfer not found",message:"That transfer could not be found."},transfer_not_reversible:{title:"Transfer not reversible",message:"This transfer cannot be reversed automatically."},transfer_already_reversed:{title:"Already reversed",message:"This transfer has already been reversed."},recipient_insufficient_balance_for_reversal:{title:"Cannot reverse transfer",message:"The recipient no longer has enough available balance to reverse this transfer."},withdrawal_address_not_allowlisted:{title:"Address not allowlisted",message:"Withdrawals are allowlist-only. Add this destination address to your allowlist first."},withdrawal_allowlist_cooldown:{title:"Address cooling down",message:"This address was added recently. Wait for the cooldown period before using it."},kyc_required_for_asset:{title:"Verification required",message:"This asset requires additional verification to withdraw."},withdrawal_requires_kyc:{title:"Verification required",message:"This withdrawal requires a higher verification tier."},reviewer_key_invalid:{title:"Reviewer key invalid",message:"Provide the correct reviewer key (x-reviewer-key)."},reviewer_key_not_configured:{title:"Reviewer key not configured",message:"Server is missing reviewer key configuration."},admin_key_invalid:{title:"Admin key invalid",message:"Provide the correct admin key (x-admin-key)."},admin_key_not_configured:{title:"Admin key not configured",message:"Server is missing exchange admin key configuration."},session_secret_not_configured:{title:"Session not configured",message:"Server is missing PROOFPACK_SESSION_SECRET."},session_bootstrap_not_configured:{title:"Bootstrap not configured",message:"Server is missing PROOFPACK_SESSION_BOOTSTRAP_KEY."},session_bootstrap_key_invalid:{title:"Unauthorized",message:"Missing or invalid session bootstrap key."},buyer_not_found:{title:"Buyer not found",message:"The buyer user id does not exist."},seller_not_found:{title:"Seller not found",message:"The seller user id does not exist."},buyer_not_active:{title:"Buyer not active",message:"The buyer user is not active."},seller_not_active:{title:"Seller not active",message:"The seller user is not active."},load_failed:{title:"Load failed",message:"Failed to load this page. Try again."},refresh_failed:{title:"Refresh failed",message:"Failed to refresh data. Try again."},create_trade_failed:{title:"Create trade failed",message:"Failed to create the trade. Try again."},users_failed:{title:"Load users failed",message:"Failed to load users. Try again."},upload_failed:{title:"Upload failed",message:"Failed to upload evidence. Try again."},evacuation_failed:{title:"Add funds failed",message:"Could not pull funds from connected exchanges. Check connection status and try again."},open_dispute_failed:{title:"Open dispute failed",message:"Failed to open dispute. Try again."},submit_decision_failed:{title:"Submit decision failed",message:"Failed to submit reviewer decision. Try again."},risk_failed:{title:"Risk assessment failed",message:"Failed to run risk assessment. Try again."},rate_limit_exceeded:{title:"Too many requests",message:"You're sending too many requests. Please wait a moment and try again."},session_token_expired:{title:"Session expired",message:"Your session has expired. Please sign in again."},dispute_transition_not_allowed:{title:"Invalid dispute transition",message:"That action is not allowed for the dispute's current status."},order_not_found:{title:"Order not found",message:"That order id was not found."},post_only_would_take:{title:"Post-only rejected",message:"This order would immediately take liquidity. Adjust the price or disable post-only."},fok_insufficient_liquidity:{title:"Fill-or-kill failed",message:"There is not enough liquidity to fill the entire order immediately."},idempotency_key_conflict:{title:"Duplicate request key",message:"This idempotency key was already used for a different order payload. Use a new key and try again."},open_orders_limit:{title:"Too many open orders",message:"You have too many open orders. Cancel an existing order and try again."},order_notional_too_large:{title:"Order too large",message:"This order exceeds the current maximum order size limit."},exchange_price_out_of_band:{title:"Price out of band",message:"That limit price is too far from the current market price band. Adjust the price and try again."},market_halted:{title:"Market temporarily halted",message:"This market is temporarily halted due to risk controls. Please try again shortly."},stp_cancel_newest:{title:"Self-trade prevented",message:"This order would cross against your own resting order(s). Adjust your orders and try again."},stp_cancel_both:{title:"Self-trade prevented",message:"This order would cross against your own resting order(s). Your crossing order(s) were canceled."},market_not_found:{title:"Market not found",message:"That market was not found."},market_disabled:{title:"Market disabled",message:"This market is currently disabled for trading."},order_state_conflict:{title:"Order state changed",message:"The order's state changed while processing. Refresh and try again."},price_not_multiple_of_tick:{title:"Invalid price",message:"Price must be a multiple of the market's tick size."},quantity_not_multiple_of_lot:{title:"Invalid quantity",message:"Quantity must be a multiple of the market's lot size."},withdrawal_risk_blocked:{title:"Withdrawal blocked",message:"This withdrawal was flagged by risk controls. Contact support if you believe this is an error."}};function a({error:e,onRetry:a,className:n}){let[i,o]=(0,r.useState)(null),l=(0,r.useMemo)(()=>e?function(e){let t=(e??"").trim();if(!t)return{title:"Error",message:"Something went wrong.",code:"unknown"};if(t.startsWith("http_")){let e=t.match(/^http_(\d{3})$/);if(!e)return{title:"Request failed",message:"Request failed.",code:t};let r=Number(e[1]);return 401===r?{title:"Unauthorized",message:"You are not authenticated for this action.",code:t}:403===r?{title:"Forbidden",message:"You are not allowed to perform this action.",code:t}:404===r?{title:"Not found",message:"The requested resource was not found.",code:t}:409===r?{title:"Conflict",message:"The request conflicts with current state.",code:t}:{title:"Request failed",message:`Request failed with HTTP ${r}.`,code:t}}let r=s[t];return r?{...r,code:t}:{title:"Error",message:t.length>180?t.slice(0,180)+"…":t,code:t}}(e.code):null,[e]),d=(0,r.useMemo)(()=>e?function(e){if(!e)return null;if(Array.isArray(e)){let t=[];for(let r of e){if(!r||"object"!=typeof r)continue;let e=r.path,s=r.message,a=Array.isArray(e)?e.map(e=>String(e)).filter(Boolean).join("."):"",n="string"==typeof s?s:null;n&&t.push(a?`${a}: ${n}`:n)}return t.length?t:null}if("string"==typeof e)return[e];if(e&&"object"==typeof e){let t=[],r="string"==typeof e.message?e.message:null,s="string"==typeof e.error?e.error:null;if(r&&t.push(r),s&&s!==r&&t.push(`error: ${s}`),t.length>0)return t}try{return[JSON.stringify(e,null,2)]}catch{return[String(e)]}}(e.details):null,[e]);if(!l)return null;let c="rounded border border-red-300 bg-red-50 p-4 text-sm text-red-800 dark:border-red-900 dark:bg-red-950 dark:text-red-200",u=n?`${c} ${n}`:c,p=!!(e&&i===e.code);return(0,t.jsxs)("div",{className:u,children:[(0,t.jsx)("div",{className:"font-semibold",children:l.title}),(0,t.jsx)("div",{className:"mt-1",children:l.message}),d?(0,t.jsxs)("div",{className:"mt-2 rounded border border-red-200 bg-white/50 p-2 text-xs dark:border-red-900/50 dark:bg-black/20",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,t.jsx)("div",{className:"font-semibold",children:"Details"}),d.length>6?(0,t.jsx)("button",{type:"button",className:"text-xs underline",onClick:()=>{e&&o(t=>t===e.code?null:e.code)},children:p?"Show less":`Show all (${d.length})`}):null]}),(0,t.jsx)("ul",{className:"mt-1 list-disc pl-5",children:(p?d:d.slice(0,6)).map((e,r)=>(0,t.jsx)("li",{className:"whitespace-pre-wrap break-words font-mono",children:e},r))})]}):null,(0,t.jsx)("div",{className:"mt-2 font-mono text-xs opacity-80",children:l.code}),a?(0,t.jsx)("button",{type:"button",className:"mt-3 rounded bg-zinc-900 px-3 py-2 text-white dark:bg-zinc-100 dark:text-black",onClick:a,children:"Retry"}):null]})}e.s(["ApiErrorBanner",()=>a],85222);let n={created:["awaiting_payment","disputed","canceled"],awaiting_payment:["paid_marked","disputed","canceled"],paid_marked:["released","disputed","resolved","canceled"],released:["resolved","disputed"],disputed:["resolved"],resolved:[],canceled:[]};function i(e,t){return("created"===e||"awaiting_payment"===e||"paid_marked"===e||"released"===e||"disputed"===e||"resolved"===e||"canceled"===e)&&n[e].includes(t)}function o(e){return i(e,"disputed")}e.s(["canOpenDispute",()=>o,"canTransitionTrade",()=>i],470928);var l=e.i(261238);async function d(){return await (0,l.fetchJsonOrThrow)("/api/whoami",{cache:"no-store"})}async function c(e){let t={"Content-Type":"application/json"};return e.bootstrapKey&&(t["x-session-bootstrap-key"]=e.bootstrapKey),await (0,l.fetchJsonOrThrow)("/api/auth/session",{method:"POST",headers:t,body:JSON.stringify({user_id:e.userId,ttl_seconds:e.ttlSeconds})})}async function u(){return await (0,l.fetchJsonOrThrow)("/api/auth/session",{method:"DELETE"})}e.s(["clearSessionCookie",()=>u,"createSessionCookie",()=>c,"fetchWhoAmI",()=>d],780827);let p="proofpack.acting_user_id";function f(e=window.location.href){let t="";try{t=new URL(e).searchParams.get("user_id")??""}catch{}let r="";try{r=window.localStorage.getItem(p)??""}catch{}return t||r}function m(e,t=window.location.href){if(e){try{window.localStorage.setItem(p,e)}catch{}try{let r=new URL(t);r.searchParams.set("user_id",e),window.history.replaceState(null,"",r.toString())}catch{}}}async function h(e){if(!e)return!1;try{let t=globalThis.navigator;if(t?.clipboard?.writeText)return await t.clipboard.writeText(e),!0}catch{}try{let t=globalThis.document;if(!t)return!1;let r=t.createElement("textarea");r.value=e,r.setAttribute("readonly","true"),r.style.position="fixed",r.style.left="-9999px",r.style.top="-9999px",t.body.appendChild(r),r.focus(),r.select();let s=t.execCommand?.("copy")??!1;return t.body.removeChild(r),!!s}catch{return!1}}function g({message:e,kind:s="info",durationMs:a=1500,onDone:n}){if((0,r.useEffect)(()=>{if(!e)return;let t=window.setTimeout(()=>n?.(),a);return()=>window.clearTimeout(t)},[e,a,n]),!e)return null;let i="pointer-events-none fixed bottom-4 left-4 right-4 z-50 rounded-xl border px-3 py-2 text-sm shadow-[var(--shadow)] sm:left-auto sm:right-4 sm:w-[420px] overflow-hidden",o="success"===s?`${i} border-[color-mix(in_srgb,var(--up)_25%,var(--border))] bg-[color-mix(in_srgb,var(--up-bg)_70%,var(--card))] text-[var(--foreground)]`:"error"===s?`${i} border-[color-mix(in_srgb,var(--down)_25%,var(--border))] bg-[color-mix(in_srgb,var(--down-bg)_70%,var(--card))] text-[var(--foreground)]`:`${i} border-[var(--border)] bg-[var(--card)] text-[var(--foreground)]`;return(0,t.jsxs)("div",{role:"status","aria-live":"polite",className:o,children:[(0,t.jsx)("div",{className:"pointer-events-none absolute inset-0 opacity-60",style:{background:"radial-gradient(420px 140px at 10% 0%, color-mix(in oklab, var(--accent) 18%, transparent) 0%, transparent 60%), radial-gradient(260px 140px at 90% 10%, color-mix(in oklab, var(--accent-2) 12%, transparent) 0%, transparent 55%)"}}),(0,t.jsxs)("div",{className:"relative flex items-start gap-2",children:[(0,t.jsx)("div",{className:"mt-0.5 h-2.5 w-2.5 rounded-full "+("success"===s?"bg-[var(--up)]":"error"===s?"bg-[var(--down)]":"bg-[var(--accent)]")}),(0,t.jsxs)("div",{className:"min-w-0",children:[(0,t.jsx)("div",{className:"text-[11px] font-semibold text-[var(--muted)]",children:"success"===s?"Signal":"error"===s?"Error":"Update"}),(0,t.jsx)("div",{className:"mt-0.5 text-sm leading-snug text-[var(--foreground)] break-words",children:e})]})]})]})}e.s(["persistActingUserIdPreference",()=>m,"readActingUserIdPreference",()=>f],238488),e.s(["copyToClipboard",()=>h],707709),e.s(["Toast",()=>g],783036)},261186,e=>{"use strict";var t=e.i(843476),r=e.i(522016),s=e.i(618566),a=e.i(271645),n=e.i(261238),i=e.i(85222),o=e.i(470928),l=e.i(780827),d=e.i(238488),c=e.i(707709),u=e.i(783036),p=e.i(184724),f=e.i(283538),m=e.i(796830);function h({initialTrades:e}){let h=(0,s.useRouter)(),[g,v]=(0,a.useState)([]),[x,y]=(0,a.useState)(e),[_,b]=(0,a.useState)(!1),[w,j]=(0,a.useState)(null),[N,k]=(0,a.useState)("session"),[T,S]=(0,a.useState)(null),[C,P]=(0,a.useState)(""),[E,O]=(0,a.useState)(!1),[A,R]=(0,a.useState)(""),[I,$]=(0,a.useState)(null),[U,q]=(0,a.useState)("info"),[B,M]=(0,a.useState)(null),V=(e,t)=>{if(B===e.id)return"Working…";if(!ev)return"Select an acting user.";if("dispute"===t.kind)return(0,o.canOpenDispute)(e.status)?"Open dispute (reason=non_payment)":`Not allowed from status: ${e.status}`;if(t.to){if(!(0,o.canTransitionTrade)(e.status,t.to))return`Not allowed from status: ${e.status}`;if("buyer"===t.role&&ev!==e.buyer_user_id)return"Buyer only.";if("seller"===t.role&&ev!==e.seller_user_id)return"Seller only.";if("canceled"===t.to&&"disputed"===e.status)return"Use reviewer decision to cancel disputed trades."}return t.label},[L,D]=(0,a.useState)(""),[F,z]=(0,a.useState)(""),[J,K]=(0,a.useState)("USD"),[W,Y]=(0,a.useState)("BTC"),[H,G]=(0,a.useState)("1000"),[Q,Z]=(0,a.useState)("0.01"),[X,ee]=(0,a.useState)("100000"),[et,er]=(0,a.useState)("bank transfer"),[es,ea]=(0,a.useState)("unknown"),[en,ei]=(0,a.useState)(!0),[eo,el]=(0,a.useState)(!0),[ed,ec]=(0,a.useState)("binance"),[eu,ep]=(0,a.useState)("BTCUSDT"),[ef,em]=(0,a.useState)(!0),[eh,eg]=(0,a.useState)("0.01"),ev=(0,a.useMemo)(()=>"session"===N?T??A:A,[N,T,A]),ex=(0,a.useMemo)(()=>!!L&&!!F&&L!==F,[L,F]),ey=e=>{let t=`/api/trades/${e}/proof-pack`;return ev?`${t}?user_id=${encodeURIComponent(ev)}`:t},e_=e=>{let t=`/trades/${e}`;return ev?`${t}?user_id=${encodeURIComponent(ev)}`:t};async function eb(){try{let e=await (0,l.fetchWhoAmI)();S(e.user_id)}catch(e){if(e instanceof n.ApiError&&"missing_x_user_id"===e.code)return void S(null);S(null)}}async function ew(e){if(!e)return!1;O(!0),j(null);try{return await (0,l.createSessionCookie)({userId:e,bootstrapKey:C||void 0}),await eb(),R(e),q("success"),$("Session cookie set."),!0}catch(e){return e instanceof n.ApiError?j({code:e.code,details:e.details}):j({code:e instanceof Error?e.message:"session_failed"}),!1}finally{O(!1)}}async function ej(){O(!0),j(null);try{await (0,l.clearSessionCookie)(),await eb(),q("success"),$("Signed out.")}catch(e){e instanceof n.ApiError?j({code:e.code,details:e.details}):j({code:e instanceof Error?e.message:"signout_failed"})}finally{O(!1)}}async function eN(e){try{j(null);let t=e??("session"===N?T??A:A);if(!t){y([]),j({code:"missing_acting_user_id"});return}if("session"===N){let e=!!C;if(T!==t){if(e&&!E){if(!await ew(t))return}else if(T){y([]),j({code:"session_user_mismatch"});return}}}let r=await (0,n.fetchJsonOrThrow)(`/api/trades?user_id=${encodeURIComponent(t)}`,{cache:"no-store",headers:"header"===N?{"x-user-id":t}:void 0});y(r.trades??[])}catch(e){e instanceof n.ApiError?j({code:e.code,details:e.details}):j({code:e instanceof Error?e.message:"refresh_failed"})}}async function ek(e,t){let r="session"===N?T??A:A;if(!r)return void j({code:"missing_acting_user_id"});M(e),j(null);try{if("session"===N){let e=!!C;if(T!==r){if(e&&!E){if(!await ew(r))return}else if(T)return void j({code:"session_user_mismatch"})}}let s={created:"",awaiting_payment:"awaiting-payment",paid_marked:"paid-marked",released:"released",disputed:"",resolved:"resolved",canceled:"canceled"}[t];if(!s)return void j({code:"trade_transition_not_allowed"});let a={method:"POST"};"header"===N&&(a.headers={"x-user-id":r}),await (0,n.fetchJsonOrThrow)(`/api/trades/${e}/status/${s}`,a),q("success"),$(`Trade ${e.slice(0,8)}… moved to ${t}.`),await eN(r)}catch(e){e instanceof n.ApiError?j({code:e.code,details:e.details}):j({code:e instanceof Error?e.message:"transition_failed"})}finally{M(null)}}async function eT(e){let t="session"===N?T??A:A;if(!t)return void j({code:"missing_acting_user_id"});M(e),j(null);try{if("session"===N){let e=!!C;if(T!==t){if(e&&!E){if(!await ew(t))return}else if(T)return void j({code:"session_user_mismatch"})}}let r={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({opened_by_user_id:t,reason_code:"non_payment"})};"header"===N&&(r.headers={...r.headers??{},"x-user-id":t}),await (0,n.fetchJsonOrThrow)(`/api/trades/${e}/dispute`,r),q("success"),$(`Dispute opened for ${e.slice(0,8)}…`),await eN(t)}catch(e){e instanceof n.ApiError?j({code:e.code,details:e.details}):j({code:e instanceof Error?e.message:"open_dispute_failed"})}finally{M(null)}}async function eS(){try{let e=(await (0,n.fetchJsonOrThrow)("/api/dev/users",{cache:"no-store"})).users??[];v(e);let t=e[0]?.id??"",r=e[1]?.id??t;D(e=>e||t),z(e=>e||r);let s=(0,d.readActingUserIdPreference)()||t;R(e=>e||s)}catch(e){e instanceof n.ApiError?j({code:e.code,details:e.details}):j({code:e instanceof Error?e.message:"users_failed"})}}async function eC(){j(null),b(!0);try{await (0,n.fetchJsonOrThrow)("/api/dev/users",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:"active",kyc_level:"basic",country:"US"})}),await eS()}catch(e){e instanceof n.ApiError?j({code:e.code,details:e.details}):j({code:e instanceof Error?e.message:"create_user_failed"})}finally{b(!1)}}async function eP(){if(!ex)return void j({code:"missing_or_invalid_users"});j(null),b(!0);try{if("session"===N&&L&&T!==L&&!await ew(L))return;let e={buyer_user_id:L,seller_user_id:F,fiat_currency:J,crypto_asset:W,fiat_amount:H,crypto_amount:Q,price:X,payment_method_label:et,payment_method_risk_class:es,assess_risk:en};eo&&(e.reference_market={exchange:ed,symbol:eu,persist:ef,pct:eh});let t=(await (0,n.fetchJsonOrThrow)("/api/trades",{method:"POST",headers:{"Content-Type":"application/json",..."header"===N?{"x-user-id":L}:{}},body:JSON.stringify(e)})).trade.id;R(L),await eN(L),h.push(`/trades/${t}?user_id=${encodeURIComponent(L)}`),h.refresh()}catch(e){e instanceof n.ApiError?j({code:e.code,details:e.details}):j({code:e instanceof Error?e.message:"create_trade_failed"})}finally{b(!1)}}return(0,a.useEffect)(()=>{eS(),eb()},[]),(0,a.useEffect)(()=>{A&&((0,d.persistActingUserIdPreference)(A),eN(A))},[A]),(0,t.jsxs)("div",{className:"mt-6 grid gap-6",children:[(0,t.jsx)(u.Toast,{message:I,kind:U,onDone:()=>$(null)}),(0,t.jsx)(i.ApiErrorBanner,{error:w}),(0,t.jsxs)(f.V2Card,{children:[(0,t.jsx)(f.V2CardHeader,{title:"Create trade",right:(0,t.jsx)(p.V2Button,{variant:"ghost",size:"sm",onClick:()=>void eN(),children:"Refresh trades"})}),(0,t.jsxs)(f.V2CardBody,{children:[(0,t.jsxs)("div",{className:"grid gap-1",children:[(0,t.jsx)("span",{className:"text-[12px] font-semibold text-[var(--v2-muted)]",children:"Acting user (scopes trade list)"}),(0,t.jsxs)("select",{className:"h-11 w-full rounded-xl border border-[var(--v2-border)] bg-[var(--v2-surface)] px-3 font-mono text-[12px] text-[var(--v2-text)] shadow-[var(--v2-shadow-sm)] outline-none focus:ring-2 focus:ring-[var(--v2-ring)]",value:A,onChange:e=>{let t=e.target.value;"session"!==N?R(t):(R(t),C&&t&&T!==t&&(async()=>{await ew(t)||R(A)})())},children:[(0,t.jsx)("option",{value:"",children:"(select user)"}),g.map(e=>(0,t.jsx)("option",{value:e.id,children:e.id},e.id))]}),(0,t.jsxs)("div",{className:"mt-2 flex flex-wrap items-center gap-3",children:[(0,t.jsxs)("label",{className:"flex items-center gap-2 text-[12px] text-[var(--v2-muted)]",children:[(0,t.jsx)("span",{className:"font-semibold",children:"Auth mode"}),(0,t.jsxs)("select",{className:"h-9 rounded-xl border border-[var(--v2-border)] bg-[var(--v2-surface)] px-3 text-[12px] font-semibold text-[var(--v2-text)] shadow-[var(--v2-shadow-sm)] outline-none focus:ring-2 focus:ring-[var(--v2-ring)]",value:N,onChange:e=>{let t=e.target.value;k(t),"session"!==t||!A||T===A||C&&ew(A)},children:[(0,t.jsx)("option",{value:"session",children:"session cookie"}),(0,t.jsx)("option",{value:"header",children:"x-user-id header"})]})]}),"session"===N?(0,t.jsxs)("div",{className:"flex flex-wrap items-center gap-2 text-[12px] text-[var(--v2-muted)]",children:[(0,t.jsx)("span",{className:"font-semibold",children:"Session"}),(0,t.jsx)("span",{className:"font-mono",children:T?`${T.slice(0,8)}…`:"(none)"}),(0,t.jsx)(p.V2Button,{size:"sm",variant:"secondary",disabled:!A||E,onClick:()=>void ew(A),children:"Sign in"}),(0,t.jsx)(p.V2Button,{size:"sm",variant:"secondary",disabled:E,onClick:()=>void ej(),children:"Sign out"}),(0,t.jsxs)("details",{children:[(0,t.jsx)("summary",{className:"cursor-pointer text-[11px] font-semibold text-[var(--v2-muted)]",children:"prod bootstrap"}),(0,t.jsx)("div",{className:"mt-2 grid gap-1",children:(0,t.jsxs)("label",{className:"grid gap-1",children:[(0,t.jsx)("span",{className:"text-[11px] font-semibold text-[var(--v2-muted)]",children:"x-session-bootstrap-key"}),(0,t.jsx)(m.V2Input,{className:"h-10 font-mono text-[12px]",value:C,type:"password",placeholder:"(only needed in production)",onChange:e=>P(e.target.value)})]})})]})]}):(0,t.jsx)("div",{className:"text-[12px] text-[var(--v2-muted)]",children:"Requests send x-user-id."})]})]}),(0,t.jsxs)("div",{className:"mt-4 grid gap-3",children:[(0,t.jsxs)("div",{className:"flex flex-wrap items-center gap-3",children:[(0,t.jsx)(p.V2Button,{variant:"secondary",disabled:_,onClick:()=>void eC(),children:"+ Dev user"}),(0,t.jsx)("div",{className:"text-[13px] text-[var(--v2-muted)]",children:"Need users? Create two, then submit."})]}),(0,t.jsxs)("div",{className:"grid gap-3 md:grid-cols-2",children:[(0,t.jsxs)("label",{className:"grid gap-1",children:[(0,t.jsx)("span",{className:"text-[12px] font-semibold text-[var(--v2-muted)]",children:"Buyer"}),(0,t.jsx)("select",{className:"h-11 w-full rounded-xl border border-[var(--v2-border)] bg-[var(--v2-surface)] px-3 font-mono text-[12px] text-[var(--v2-text)] shadow-[var(--v2-shadow-sm)] outline-none focus:ring-2 focus:ring-[var(--v2-ring)]",value:L,onChange:e=>D(e.target.value),children:g.map(e=>(0,t.jsx)("option",{value:e.id,children:e.id},e.id))})]}),(0,t.jsxs)("label",{className:"grid gap-1",children:[(0,t.jsx)("span",{className:"text-[12px] font-semibold text-[var(--v2-muted)]",children:"Seller"}),(0,t.jsx)("select",{className:"h-11 w-full rounded-xl border border-[var(--v2-border)] bg-[var(--v2-surface)] px-3 font-mono text-[12px] text-[var(--v2-text)] shadow-[var(--v2-shadow-sm)] outline-none focus:ring-2 focus:ring-[var(--v2-ring)]",value:F,onChange:e=>z(e.target.value),children:g.map(e=>(0,t.jsx)("option",{value:e.id,children:e.id},e.id))})]})]}),(0,t.jsxs)("div",{className:"grid gap-3 md:grid-cols-3",children:[(0,t.jsxs)("label",{className:"grid gap-1",children:[(0,t.jsx)("span",{className:"text-[12px] font-semibold text-[var(--v2-muted)]",children:"Fiat"}),(0,t.jsx)(m.V2Input,{className:"font-mono",value:J,onChange:e=>K(e.target.value)})]}),(0,t.jsxs)("label",{className:"grid gap-1",children:[(0,t.jsx)("span",{className:"text-[12px] font-semibold text-[var(--v2-muted)]",children:"Asset"}),(0,t.jsx)(m.V2Input,{className:"font-mono",value:W,onChange:e=>Y(e.target.value)})]}),(0,t.jsxs)("label",{className:"grid gap-1",children:[(0,t.jsx)("span",{className:"text-[12px] font-semibold text-[var(--v2-muted)]",children:"Price"}),(0,t.jsx)(m.V2Input,{className:"font-mono",value:X,onChange:e=>ee(e.target.value)})]})]}),(0,t.jsxs)("div",{className:"grid gap-3 md:grid-cols-2",children:[(0,t.jsxs)("label",{className:"grid gap-1",children:[(0,t.jsx)("span",{className:"text-[12px] font-semibold text-[var(--v2-muted)]",children:"Fiat amount"}),(0,t.jsx)(m.V2Input,{className:"font-mono",value:H,onChange:e=>G(e.target.value)})]}),(0,t.jsxs)("label",{className:"grid gap-1",children:[(0,t.jsx)("span",{className:"text-[12px] font-semibold text-[var(--v2-muted)]",children:"Crypto amount"}),(0,t.jsx)(m.V2Input,{className:"font-mono",value:Q,onChange:e=>Z(e.target.value)})]})]}),(0,t.jsxs)("div",{className:"grid gap-3 md:grid-cols-2",children:[(0,t.jsxs)("label",{className:"grid gap-1",children:[(0,t.jsx)("span",{className:"text-[12px] font-semibold text-[var(--v2-muted)]",children:"Payment label"}),(0,t.jsx)(m.V2Input,{value:et,onChange:e=>er(e.target.value)})]}),(0,t.jsxs)("label",{className:"grid gap-1",children:[(0,t.jsx)("span",{className:"text-[12px] font-semibold text-[var(--v2-muted)]",children:"Payment risk"}),(0,t.jsxs)("select",{className:"h-11 w-full rounded-xl border border-[var(--v2-border)] bg-[var(--v2-surface)] px-3 text-[14px] font-semibold text-[var(--v2-text)] shadow-[var(--v2-shadow-sm)] outline-none focus:ring-2 focus:ring-[var(--v2-ring)]",value:es,onChange:e=>ea(e.target.value),children:[(0,t.jsx)("option",{value:"unknown",children:"unknown"}),(0,t.jsx)("option",{value:"irreversible",children:"irreversible"}),(0,t.jsx)("option",{value:"reversible",children:"reversible"})]})]})]}),(0,t.jsxs)("div",{className:"flex flex-wrap items-center gap-4 text-[13px] text-[var(--v2-text)]",children:[(0,t.jsxs)("label",{className:"flex items-center gap-2",children:[(0,t.jsx)("input",{type:"checkbox",checked:en,onChange:e=>ei(e.target.checked),className:"accent-[var(--v2-accent)]"}),"Assess risk (v0)"]}),(0,t.jsxs)("label",{className:"flex items-center gap-2",children:[(0,t.jsx)("input",{type:"checkbox",checked:eo,onChange:e=>el(e.target.checked),className:"accent-[var(--v2-accent)]"}),"Attach reference market"]})]}),eo?(0,t.jsxs)("div",{className:"grid gap-3 md:grid-cols-4",children:[(0,t.jsxs)("label",{className:"grid gap-1",children:[(0,t.jsx)("span",{className:"text-[12px] font-semibold text-[var(--v2-muted)]",children:"Exchange"}),(0,t.jsxs)("select",{className:"h-11 w-full rounded-xl border border-[var(--v2-border)] bg-[var(--v2-surface)] px-3 text-[14px] font-semibold text-[var(--v2-text)] shadow-[var(--v2-shadow-sm)] outline-none focus:ring-2 focus:ring-[var(--v2-ring)]",value:ed,onChange:e=>ec(e.target.value),children:[(0,t.jsx)("option",{value:"binance",children:"binance"}),(0,t.jsx)("option",{value:"bybit",children:"bybit"})]})]}),(0,t.jsxs)("label",{className:"grid gap-1 md:col-span-2",children:[(0,t.jsx)("span",{className:"text-[12px] font-semibold text-[var(--v2-muted)]",children:"Symbol"}),(0,t.jsx)(m.V2Input,{className:"font-mono",value:eu,onChange:e=>ep(e.target.value)})]}),(0,t.jsxs)("label",{className:"grid gap-1",children:[(0,t.jsx)("span",{className:"text-[12px] font-semibold text-[var(--v2-muted)]",children:"Band pct"}),(0,t.jsx)(m.V2Input,{className:"font-mono",value:eh,onChange:e=>eg(e.target.value)})]}),(0,t.jsxs)("label",{className:"flex items-center gap-2 text-[13px] text-[var(--v2-text)] md:col-span-4",children:[(0,t.jsx)("input",{type:"checkbox",checked:ef,onChange:e=>em(e.target.checked),className:"accent-[var(--v2-accent)]"}),"Persist snapshot to DB"]})]}):null,(0,t.jsx)(p.V2Button,{variant:"primary",disabled:_||!ex,onClick:()=>void eP(),children:_?"Working…":"Create trade"}),ex?null:(0,t.jsx)("div",{className:"text-[13px] text-[var(--v2-muted)]",children:"Select two different users to submit."})]})]})]}),(0,t.jsxs)(f.V2Card,{children:[(0,t.jsx)(f.V2CardHeader,{title:"Recent trades",right:(0,t.jsx)(r.default,{className:"text-[13px] font-semibold text-[var(--v2-accent-2)] underline",href:"/",children:"Home"})}),(0,t.jsx)(f.V2CardBody,{children:(0,t.jsx)("div",{className:"overflow-x-auto rounded-2xl border border-[var(--v2-border)] bg-[var(--v2-surface)]",children:(0,t.jsxs)("table",{className:"w-full text-[13px]",children:[(0,t.jsx)("thead",{className:"bg-[var(--v2-surface-2)] text-left text-[var(--v2-muted)]",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"px-3 py-2",children:"ID"}),(0,t.jsx)("th",{className:"px-3 py-2",children:"Pair"}),(0,t.jsx)("th",{className:"px-3 py-2",children:"Price"}),(0,t.jsx)("th",{className:"px-3 py-2",children:"Deviation"}),(0,t.jsx)("th",{className:"px-3 py-2",children:"Status"}),(0,t.jsx)("th",{className:"px-3 py-2",children:"Actions"}),(0,t.jsx)("th",{className:"px-3 py-2",children:"Created"}),(0,t.jsx)("th",{className:"px-3 py-2",children:"Proof pack"})]})}),(0,t.jsxs)("tbody",{children:[x.map(e=>(0,t.jsxs)("tr",{className:"border-t border-[var(--v2-border)]",children:[(0,t.jsx)("td",{className:"px-3 py-2 font-mono",children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)(r.default,{className:"font-semibold text-[var(--v2-accent-2)] underline",href:e_(e.id),children:[e.id.slice(0,8),"…"]}),(0,t.jsx)(p.V2Button,{size:"sm",variant:"secondary",onClick:async()=>{try{let t=e_(e.id),r=new URL(t,window.location.origin).toString(),s=await (0,c.copyToClipboard)(r);q(s?"success":"error"),$(s?"Trade link copied.":"Copy failed.")}catch{q("error"),$("Copy failed.")}},children:"Copy"})]})}),(0,t.jsxs)("td",{className:"px-3 py-2",children:[e.crypto_asset,"/",e.fiat_currency]}),(0,t.jsx)("td",{className:"px-3 py-2 font-mono",children:e.price}),(0,t.jsx)("td",{className:"px-3 py-2 font-mono",children:e.price_deviation_pct??"—"}),(0,t.jsx)("td",{className:"px-3 py-2",children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"font-semibold text-[var(--v2-text)]",children:e.status}),(e=>{if(!ev)return null;let r=ev===e.buyer_user_id?"buyer":ev===e.seller_user_id?"seller":null;if(!r)return null;let s="buyer"===r?"border-[color-mix(in_srgb,var(--up)_35%,var(--v2-border))] bg-[color-mix(in_srgb,var(--up)_10%,transparent)] text-[var(--up)]":"border-[color-mix(in_srgb,var(--v2-accent-2)_35%,var(--v2-border))] bg-[color-mix(in_srgb,var(--v2-accent-2)_10%,transparent)] text-[var(--v2-accent-2)]";return(0,t.jsx)("span",{className:`rounded-full border px-2 py-0.5 text-[11px] font-semibold ${s}`,children:r})})(e)]})}),(0,t.jsx)("td",{className:"px-3 py-2",children:(0,t.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[(0,t.jsx)(p.V2Button,{size:"sm",variant:"secondary",disabled:B===e.id||!(0,o.canTransitionTrade)(e.status,"awaiting_payment"),onClick:()=>void ek(e.id,"awaiting_payment"),title:V(e,{label:"created → awaiting_payment",to:"awaiting_payment"}),children:"Awaiting"}),(0,t.jsx)(p.V2Button,{size:"sm",variant:"secondary",disabled:B===e.id||!(0,o.canTransitionTrade)(e.status,"paid_marked")||ev!==e.buyer_user_id,onClick:()=>void ek(e.id,"paid_marked"),title:V(e,{label:"awaiting_payment → paid_marked",to:"paid_marked",role:"buyer"}),children:"Paid"}),(0,t.jsx)(p.V2Button,{size:"sm",variant:"secondary",disabled:B===e.id||!(0,o.canTransitionTrade)(e.status,"released")||ev!==e.seller_user_id,onClick:()=>void ek(e.id,"released"),title:V(e,{label:"paid_marked → released",to:"released",role:"seller"}),children:"Release"}),(0,t.jsx)(p.V2Button,{size:"sm",variant:"secondary",disabled:B===e.id||!(0,o.canTransitionTrade)(e.status,"resolved"),onClick:()=>void ek(e.id,"resolved"),title:V(e,{label:"Resolve trade",to:"resolved"}),children:"Resolve"}),(0,t.jsx)(p.V2Button,{size:"sm",variant:"danger",disabled:B===e.id||"disputed"===e.status||!(0,o.canTransitionTrade)(e.status,"canceled"),onClick:()=>void ek(e.id,"canceled"),title:V(e,{label:"Cancel trade",to:"canceled"}),children:"Cancel"}),(0,t.jsx)(p.V2Button,{size:"sm",variant:"secondary",disabled:B===e.id||!ev||!(0,o.canOpenDispute)(e.status),onClick:()=>void eT(e.id),title:V(e,{label:"Open dispute",kind:"dispute"}),children:"Dispute"})]})}),(0,t.jsx)("td",{className:"px-3 py-2 font-mono",children:e.created_at}),(0,t.jsx)("td",{className:"px-3 py-2",children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("a",{className:"text-[12px] font-semibold text-[var(--v2-accent-2)] underline",href:ey(e.id),children:"ZIP"}),(0,t.jsx)(p.V2Button,{size:"sm",variant:"secondary",onClick:async()=>{try{let t=ey(e.id),r=new URL(t,window.location.origin).toString();await (0,c.copyToClipboard)(r)?(q("success"),$("Proof pack link copied.")):(q("error"),$("Copy failed."))}catch{q("error"),$("Copy failed.")}},children:"Copy link"})]})})]},e.id)),0===x.length?(0,t.jsx)("tr",{children:(0,t.jsx)("td",{className:"px-3 py-4 text-[13px] text-[var(--v2-muted)]",colSpan:8,children:"No trades yet."})}):null]})]})})})]}),(0,t.jsx)("section",{className:"text-[12px] text-[var(--v2-muted)]",children:(0,t.jsx)("div",{children:"Pro tip: after creating a trade, open it and upload evidence, then download the Proof Pack ZIP."})})]})}e.s(["TradesClient",()=>h])}]);