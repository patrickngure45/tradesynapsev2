(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,796830,e=>{"use strict";var t=e.i(843476);let r=e.i(271645).forwardRef(function({className:e="",type:r="text",...a},s){return(0,t.jsx)("input",{ref:s,type:r,className:"h-11 w-full rounded-xl border border-[var(--v2-border)] bg-[var(--v2-surface)] px-3 text-[14px] text-[var(--v2-text)] shadow-[var(--v2-shadow-sm)] outline-none placeholder:text-[color-mix(in_srgb,var(--v2-muted)_70%,transparent)] focus:ring-2 focus:ring-[var(--v2-ring)] "+e,...a})});e.s(["V2Input",0,r])},184724,e=>{"use strict";var t=e.i(843476);function r(e){let t=e?.variant??"secondary",r=e?.size??"md";return["inline-flex select-none items-center justify-center gap-2 whitespace-nowrap rounded-xl transition focus:outline-none focus:ring-2 focus:ring-[var(--v2-ring)] disabled:pointer-events-none disabled:opacity-55","lg"===r?"h-12 px-5 text-[15px]":"sm"===r?"h-9 px-3 text-[13px]":"h-11 px-4 text-[14px]","primary"===t?"bg-[var(--v2-accent)] text-white font-semibold shadow-[var(--v2-shadow-sm)] hover:brightness-105":"danger"===t?"bg-[var(--down)] text-white font-semibold shadow-[var(--v2-shadow-sm)] hover:brightness-105":"ghost"===t?"bg-transparent text-[var(--v2-text)] font-semibold hover:bg-[var(--v2-surface-2)]":"border border-[var(--v2-border)] bg-[var(--v2-surface)] text-[var(--v2-text)] font-semibold shadow-[var(--v2-shadow-sm)] hover:bg-[var(--v2-surface-2)]",e?.fullWidth?"w-full":"",e?.className??""].filter(Boolean).join(" ")}let a=e.i(271645).forwardRef(function({variant:e,size:a,fullWidth:s,className:n,type:l,...i},o){return(0,t.jsx)("button",{ref:o,type:l??"button",className:r({variant:e,size:a,fullWidth:s,className:n}),...i})});e.s(["V2Button",0,a,"v2ButtonClassName",()=>r])},283538,e=>{"use strict";var t=e.i(843476);function r({children:e,className:r=""}){return(0,t.jsx)("section",{className:"rounded-[var(--v2-radius-lg)] border border-[var(--v2-border)] bg-[var(--v2-surface)] shadow-[var(--v2-shadow-sm)] "+r,children:e})}function a({title:e,subtitle:r,right:a}){return(0,t.jsxs)("header",{className:"flex items-start justify-between gap-3 px-4 pt-4",children:[(0,t.jsxs)("div",{className:"min-w-0",children:[(0,t.jsx)("div",{className:"text-[15px] font-semibold text-[var(--v2-text)]",children:e}),r?(0,t.jsx)("div",{className:"mt-0.5 text-[13px] text-[var(--v2-muted)]",children:r}):null]}),a?(0,t.jsx)("div",{className:"shrink-0",children:a}):null]})}function s({children:e}){return(0,t.jsx)("div",{className:"px-4 pb-4 pt-3",children:e})}e.s(["V2Card",()=>r,"V2CardBody",()=>s,"V2CardHeader",()=>a])},59298,e=>{"use strict";var t=e.i(843476);function r({className:e=""}){return(0,t.jsx)("div",{className:"animate-pulse rounded-xl border border-[var(--v2-border)] bg-[var(--v2-surface-2)] "+e,"aria-hidden":"true"})}e.s(["V2Skeleton",()=>r])},982527,e=>{"use strict";var t=e.i(843476),r=e.i(522016),a=e.i(271645),s=e.i(184724),n=e.i(283538),l=e.i(796830),i=e.i(59298);function o(e){let t="number"==typeof e?e:Number(String(e));return Number.isFinite(t)?t:null}function d(e,t){let r=o(e),a=o(t);return null==r||null==a||r<=0?null:(a-r)/r*100}function c(e){let t=o(e);if(null==t)return"—";if(0===t)return"0";let r=Math.abs(t);return t.toLocaleString(void 0,{maximumFractionDigits:r>=1e3?2:r>=1?4:r>=.01?6:8})}function v(){let[e,o]=(0,a.useState)(""),[v,u]=(0,a.useState)(!0),[x,m]=(0,a.useState)(null),[h,p]=(0,a.useState)([]),[b,g]=(0,a.useState)(()=>(function(){try{let e=localStorage.getItem("cw:v2:favMarkets")??"",t=JSON.parse(e);return Array.isArray(t)?t.map(e=>String(e)).filter(Boolean):[]}catch{return[]}})()),f=(0,a.useRef)(0),j=(0,a.useRef)(null),N=async()=>{let e=++f.current;j.current?.abort();let t=new AbortController;j.current=t,m(null),0===h.length&&u(!0);try{let r=await fetch("/api/exchange/markets/overview?fiat=USD",{cache:"no-store",signal:t.signal}),a=await r.json().catch(()=>null);if(!r.ok)throw Error("markets_unavailable");let s=Array.isArray(a?.markets)?a.markets:[];if(e!==f.current)return;p(s.filter(e=>"USDT"===String(e.quote_symbol).toUpperCase()))}catch(t){if(t instanceof DOMException&&"AbortError"===t.name||e!==f.current)return;0===h.length&&m(t instanceof Error?t.message:String(t))}finally{e===f.current&&u(!1)}};(0,a.useEffect)(()=>{N();let e=window.setInterval(()=>{"visible"===document.visibilityState&&N()},15e3),t=()=>{"visible"===document.visibilityState&&N()};return document.addEventListener("visibilitychange",t),()=>{window.clearInterval(e),document.removeEventListener("visibilitychange",t)}},[]);let y=e.trim().toUpperCase(),w=!!x&&0===h.length,C=(0,a.useMemo)(()=>{let e=h.map(e=>{let t=d(e.stats?.open??null,e.stats?.last??null);return{m:e,changePct:t}}).filter(e=>null!=e.changePct).slice().sort((e,t)=>{let r=e.changePct??-1/0;return(t.changePct??-1/0)-r});return{gainers:e.slice(0,3),losers:e.slice().reverse().slice(0,3)}},[h]),S=(0,a.useMemo)(()=>h.map(e=>{let t=e.stats?.open??null,r=e.stats?.last??null,a=d(t,r),s=b.includes(e.id);return{...e,open:t,last:r,changePct:a,isFav:s}}).filter(e=>!y||`${String(e.base_symbol).toUpperCase()}/${String(e.quote_symbol).toUpperCase()}`.includes(y)||String(e.symbol).toUpperCase().includes(y)).sort((e,t)=>{if(e.isFav!==t.isFav)return e.isFav?-1:1;let r=null==e.changePct?-1:Math.abs(e.changePct),a=null==t.changePct?-1:Math.abs(t.changePct);return r!==a?a-r:String(e.symbol).localeCompare(String(t.symbol))}),[h,b,y]);return(0,t.jsxs)("main",{className:"space-y-4",children:[(0,t.jsxs)("header",{className:"space-y-2",children:[(0,t.jsx)("div",{className:"text-[11px] font-bold uppercase tracking-widest text-[var(--v2-muted)]",children:"Markets"}),(0,t.jsx)("h1",{className:"text-2xl font-extrabold tracking-tight",children:"Trade USDT pairs"}),(0,t.jsx)("p",{className:"text-sm text-[var(--v2-muted)]",children:"Search, favorite, and open a market to trade."})]}),(0,t.jsx)(l.V2Input,{value:e,onChange:e=>o(e.target.value),placeholder:"Search BTC, ETH, BTC/USDT…",autoCapitalize:"none",autoCorrect:"off",spellCheck:!1}),x||v||y||!C.gainers.length&&!C.losers.length?null:(0,t.jsxs)("section",{className:"grid gap-2",children:[(0,t.jsx)("div",{className:"text-[11px] font-bold uppercase tracking-widest text-[var(--v2-muted)]",children:"Movers"}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,t.jsxs)("div",{className:"rounded-2xl border border-[var(--v2-border)] bg-[var(--v2-surface)] p-3 shadow-[var(--v2-shadow-sm)]",children:[(0,t.jsx)("div",{className:"text-[12px] font-semibold text-[var(--v2-text)]",children:"Top gainers"}),(0,t.jsxs)("div",{className:"mt-2 grid gap-2",children:[C.gainers.map(({m:e,changePct:a})=>{let s=String(e.base_symbol).toUpperCase(),n=String(e.quote_symbol).toUpperCase(),l=`${s}/${n}`,i=a??0,o=`${i>=0?"+":""}${i.toFixed(2)}%`;return(0,t.jsxs)(r.default,{href:`/v2/trade?base=${encodeURIComponent(s)}&quote=${encodeURIComponent(n)}`,className:"flex items-center justify-between gap-2 rounded-xl bg-[var(--v2-surface-2)] px-2 py-2",children:[(0,t.jsx)("div",{className:"text-[12px] font-semibold text-[var(--v2-text)]",children:l}),(0,t.jsx)("div",{className:"text-[12px] font-semibold text-[var(--up)]",children:o})]},e.id)}),0===C.gainers.length?(0,t.jsx)("div",{className:"text-[12px] text-[var(--v2-muted)]",children:"No data yet."}):null]})]}),(0,t.jsxs)("div",{className:"rounded-2xl border border-[var(--v2-border)] bg-[var(--v2-surface)] p-3 shadow-[var(--v2-shadow-sm)]",children:[(0,t.jsx)("div",{className:"text-[12px] font-semibold text-[var(--v2-text)]",children:"Top losers"}),(0,t.jsxs)("div",{className:"mt-2 grid gap-2",children:[C.losers.map(({m:e,changePct:a})=>{let s=String(e.base_symbol).toUpperCase(),n=String(e.quote_symbol).toUpperCase(),l=`${s}/${n}`,i=a??0,o=`${i>=0?"+":""}${i.toFixed(2)}%`;return(0,t.jsxs)(r.default,{href:`/v2/trade?base=${encodeURIComponent(s)}&quote=${encodeURIComponent(n)}`,className:"flex items-center justify-between gap-2 rounded-xl bg-[var(--v2-surface-2)] px-2 py-2",children:[(0,t.jsx)("div",{className:"text-[12px] font-semibold text-[var(--v2-text)]",children:l}),(0,t.jsx)("div",{className:"text-[12px] font-semibold text-[var(--down)]",children:o})]},e.id)}),0===C.losers.length?(0,t.jsx)("div",{className:"text-[12px] text-[var(--v2-muted)]",children:"No data yet."}):null]})]})]})]}),w?(0,t.jsxs)(n.V2Card,{children:[(0,t.jsx)(n.V2CardHeader,{title:"Markets unavailable",subtitle:"Check connectivity and try again."}),(0,t.jsxs)(n.V2CardBody,{children:[(0,t.jsx)("div",{className:"text-sm text-[var(--v2-muted)]",children:String(x)}),(0,t.jsx)("div",{className:"mt-3",children:(0,t.jsx)(s.V2Button,{variant:"primary",fullWidth:!0,onClick:()=>void N(),children:"Retry"})})]})]}):v?(0,t.jsxs)("div",{className:"grid gap-2",children:[(0,t.jsx)(i.V2Skeleton,{className:"h-14"}),(0,t.jsx)(i.V2Skeleton,{className:"h-14"}),(0,t.jsx)(i.V2Skeleton,{className:"h-14"}),(0,t.jsx)(i.V2Skeleton,{className:"h-14"}),(0,t.jsx)(i.V2Skeleton,{className:"h-14"})]}):0===S.length?(0,t.jsxs)(n.V2Card,{children:[(0,t.jsx)(n.V2CardHeader,{title:"No matches",subtitle:"Try a different search."}),(0,t.jsx)(n.V2CardBody,{children:(0,t.jsxs)("div",{className:"text-sm text-[var(--v2-muted)]",children:["Nothing found for “",y||"—","”."]})})]}):(0,t.jsx)("section",{className:"grid gap-2",children:S.slice(0,60).map(e=>{let a=String(e.base_symbol).toUpperCase(),s=String(e.quote_symbol).toUpperCase(),n=`${a}/${s}`,l=e.changePct,i=null==l?"—":`${l>=0?"+":""}${l.toFixed(2)}%`,o=null==l?"text-[var(--v2-muted)]":l>=0?"text-[var(--up)]":"text-[var(--down)]";return(0,t.jsxs)("div",{className:"flex items-center justify-between gap-3 rounded-2xl border border-[var(--v2-border)] bg-[var(--v2-surface)] px-3 py-3 shadow-[var(--v2-shadow-sm)]",children:[(0,t.jsxs)("div",{className:"min-w-0",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(r.default,{href:`/v2/trade?base=${encodeURIComponent(a)}&quote=${encodeURIComponent(s)}`,className:"truncate text-[15px] font-semibold text-[var(--v2-text)]",children:n}),e.is_halted?(0,t.jsx)("span",{className:"rounded-full border border-[var(--v2-border)] bg-[var(--warn-bg)] px-2 py-0.5 text-[11px] font-semibold text-[var(--warn)]",children:"Halted"}):null]}),(0,t.jsxs)("div",{className:"mt-0.5 text-[12px] text-[var(--v2-muted)]",children:["Vol: ",c(e.stats?.quote_volume??null)," ",s]})]}),(0,t.jsxs)("div",{className:"shrink-0 text-right",children:[(0,t.jsx)("div",{className:"text-[14px] font-semibold text-[var(--v2-text)]",children:c(e.last)}),(0,t.jsx)("div",{className:`text-[12px] font-semibold ${o}`,children:i})]}),(0,t.jsx)("button",{type:"button",onClick:()=>{var t;return t=e.id,void g(e=>{let r=e.includes(t)?e.filter(e=>e!==t):[...e,t];try{localStorage.setItem("cw:v2:favMarkets",JSON.stringify(r))}catch{}return r})},className:"ml-1 flex h-11 w-11 items-center justify-center rounded-2xl border shadow-[var(--v2-shadow-sm)] "+(e.isFav?"border-[color-mix(in_srgb,var(--v2-accent)_55%,transparent)] bg-[color-mix(in_srgb,var(--v2-accent)_12%,transparent)] text-[var(--v2-accent)]":"border-[var(--v2-border)] bg-[var(--v2-surface)] text-[var(--v2-muted)] hover:bg-[var(--v2-surface-2)]"),"aria-label":e.isFav?"Remove favorite":"Add favorite",title:e.isFav?"Unfavorite":"Favorite",children:(0,t.jsx)("span",{"aria-hidden":!0,children:e.isFav?"★":"☆"})})]},e.id)})})]})}e.s(["MarketsClient",()=>v])}]);