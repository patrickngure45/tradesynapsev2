(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,184724,e=>{"use strict";var t=e.i(843476);function s(e){let t=e?.variant??"secondary",s=e?.size??"md";return["inline-flex select-none items-center justify-center gap-2 whitespace-nowrap rounded-xl transition focus:outline-none focus:ring-2 focus:ring-[var(--v2-ring)] disabled:pointer-events-none disabled:opacity-55","lg"===s?"h-12 px-5 text-[15px]":"sm"===s?"h-9 px-3 text-[13px]":"h-11 px-4 text-[14px]","primary"===t?"bg-[var(--v2-accent)] text-white font-semibold shadow-[var(--v2-shadow-sm)] hover:brightness-105":"danger"===t?"bg-[var(--down)] text-white font-semibold shadow-[var(--v2-shadow-sm)] hover:brightness-105":"ghost"===t?"bg-transparent text-[var(--v2-text)] font-semibold hover:bg-[var(--v2-surface-2)]":"border border-[var(--v2-border)] bg-[var(--v2-surface)] text-[var(--v2-text)] font-semibold shadow-[var(--v2-shadow-sm)] hover:bg-[var(--v2-surface-2)]",e?.fullWidth?"w-full":"",e?.className??""].filter(Boolean).join(" ")}let r=e.i(271645).forwardRef(function({variant:e,size:r,fullWidth:a,className:i,type:n,...d},l){return(0,t.jsx)("button",{ref:l,type:n??"button",className:s({variant:e,size:r,fullWidth:a,className:i}),...d})});e.s(["V2Button",0,r,"v2ButtonClassName",()=>s])},283538,e=>{"use strict";var t=e.i(843476);function s({children:e,className:s=""}){return(0,t.jsx)("section",{className:"rounded-[var(--v2-radius-lg)] border border-[var(--v2-border)] bg-[var(--v2-surface)] shadow-[var(--v2-shadow-sm)] "+s,children:e})}function r({title:e,subtitle:s,right:r}){return(0,t.jsxs)("header",{className:"flex items-start justify-between gap-3 px-4 pt-4",children:[(0,t.jsxs)("div",{className:"min-w-0",children:[(0,t.jsx)("div",{className:"text-[15px] font-semibold text-[var(--v2-text)]",children:e}),s?(0,t.jsx)("div",{className:"mt-0.5 text-[13px] text-[var(--v2-muted)]",children:s}):null]}),r?(0,t.jsx)("div",{className:"shrink-0",children:r}):null]})}function a({children:e}){return(0,t.jsx)("div",{className:"px-4 pb-4 pt-3",children:e})}e.s(["V2Card",()=>s,"V2CardBody",()=>a,"V2CardHeader",()=>r])},59298,e=>{"use strict";var t=e.i(843476);function s({className:e=""}){return(0,t.jsx)("div",{className:"animate-pulse rounded-xl border border-[var(--v2-border)] bg-[var(--v2-surface-2)] "+e,"aria-hidden":"true"})}e.s(["V2Skeleton",()=>s])},261238,e=>{"use strict";class t extends Error{code;details;status;requestId;constructor(e,t){super(t?.requestId?`${e} (req ${t.requestId})`:e),this.name="ApiError",this.code=e,this.details=t?.details,this.status=t?.status,this.requestId=t?.requestId}}function s(e){return new Promise(t=>setTimeout(t,Math.max(0,Math.floor(e))))}async function r(e,r){let a=r?{...r,credentials:r.credentials??"same-origin"}:{credentials:"same-origin"},i=(a?.method??"GET").toUpperCase();if(("GET"===i||"HEAD"===i)&&function(e){try{let t=window.location.origin,s="string"==typeof e?new URL(e,t):e instanceof URL?e:e instanceof Request?new URL(e.url):null;if(!s||s.origin!==t)return!1;return s.pathname.startsWith("/api/")}catch{return!1}}(e)){let e=function(){try{return(new URL(window.location.href).searchParams.get("user_id")??"").trim()||null}catch{return null}}();if(e){let t=new Headers(a?.headers);t.has("x-impersonate-user-id")||t.set("x-impersonate-user-id",e),a.headers=t}}if(["POST","PUT","PATCH","DELETE"].includes(i)){let e=function(){if("u"<typeof document)return null;let e=document.cookie.match(/(?:^|;\s*)__csrf=([^;]+)/);return e?.[1]??null}();if(e){let t=new Headers(a?.headers);t.has("x-csrf-token")||t.set("x-csrf-token",e),a.headers=t}}let n=(a?.method??"GET").toUpperCase(),d="GET"===n||"HEAD"===n,l=2*!!d,o=null;for(let r=0;r<=l;r+=1)try{let i=await fetch(e,a),n=i.headers.get("x-request-id")??void 0;try{n&&window.sessionStorage.setItem("ts.last_request_id",n)}catch{}let o=await i.text().catch(()=>""),c=(i.headers.get("content-type")??"").includes("text/html")||function(e){let t=String(e??"").trimStart();return t.startsWith("<!DOCTYPE html")||t.startsWith("<html")||t.startsWith("<!doctype html")}(o),u=c?{_raw:"<html/>"}:function(e){try{return e?JSON.parse(e):null}catch{return{_raw:e}}}(o);if(!i.ok){if(d&&(502===i.status||503===i.status||504===i.status)&&r<l){await s(250*Math.pow(2,r));continue}if(u&&"object"==typeof u&&"error"in u){let e="string"==typeof u.error?u.error:`http_${i.status}`,s=void 0!==u.details?u.details:"string"==typeof u.message?u.message:c?{message:`Upstream error (HTTP ${i.status}). Please retry.`}:void 0;throw new t(e,{details:s,status:i.status,requestId:n})}if(u&&"object"==typeof u&&"message"in u){let e="string"==typeof u.message?u.message:u;throw new t(`http_${i.status}`,{details:e,status:i.status,requestId:n})}let e=c?{message:`Upstream error (HTTP ${i.status}). Please retry.`}:u;throw new t(`http_${i.status}`,{details:e,status:i.status,requestId:n})}return u}catch(e){if(o=e,d&&r<l){await s(250*Math.pow(2,r));continue}throw e}throw o}e.s(["ApiError",()=>t,"fetchJsonOrThrow",()=>r])},580870,e=>{"use strict";var t=e.i(843476),s=e.i(271645),r=e.i(261238),a=e.i(184724),i=e.i(283538),n=e.i(59298);function d(){let[e,d]=(0,s.useState)(!0),[l,o]=(0,s.useState)(null),[c,u]=(0,s.useState)([]),[h,x]=(0,s.useState)(null);async function m(){o(null),d(!0);try{let e=await (0,r.fetchJsonOrThrow)("/api/exchange/admin/markets",{cache:"no-store"});u(Array.isArray(e.markets)?e.markets:[])}catch(e){e instanceof r.ApiError?o(e.code):o("Network error")}finally{d(!1)}}(0,s.useEffect)(()=>{m()},[]);let v=(0,s.useMemo)(()=>c.filter(e=>"enabled"===e.status).length,[c]),p=(0,s.useMemo)(()=>c.filter(e=>"disabled"===e.status).length,[c]);async function f(e,t){o(null),x(e);try{await (0,r.fetchJsonOrThrow)(`/api/exchange/admin/markets/${e}/status`,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({status:t})}),await m()}catch(e){e instanceof r.ApiError?o(e.code):o("Network error")}finally{x(null)}}return e?(0,t.jsx)(n.V2Skeleton,{className:"h-40"}):(0,t.jsxs)("div",{className:"grid gap-4",children:[l?(0,t.jsxs)("div",{className:"rounded-2xl border border-[var(--v2-border)] bg-[var(--warn-bg)] px-4 py-3 text-[13px] font-semibold text-[var(--v2-text)]",children:["Error: ",(0,t.jsx)("span",{className:"font-extrabold",children:l})]}):null,(0,t.jsxs)(i.V2Card,{children:[(0,t.jsx)(i.V2CardHeader,{title:"Summary",subtitle:`Enabled ${v} \xb7 Disabled ${p}`,right:(0,t.jsx)(a.V2Button,{size:"sm",variant:"ghost",onClick:()=>void m(),children:"Refresh"})}),(0,t.jsx)(i.V2CardBody,{children:(0,t.jsxs)("div",{className:"grid gap-2 text-[13px]",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between gap-3",children:[(0,t.jsx)("div",{className:"text-[var(--v2-muted)]",children:"Total markets"}),(0,t.jsx)("div",{className:"font-semibold text-[var(--v2-text)]",children:c.length})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between gap-3",children:[(0,t.jsx)("div",{className:"text-[var(--v2-muted)]",children:"Enabled"}),(0,t.jsx)("div",{className:"font-semibold text-[var(--v2-text)]",children:v})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between gap-3",children:[(0,t.jsx)("div",{className:"text-[var(--v2-muted)]",children:"Disabled"}),(0,t.jsx)("div",{className:"font-semibold text-[var(--v2-text)]",children:p})]})]})})]}),0===c.length?(0,t.jsx)("div",{className:"rounded-2xl border border-[var(--v2-border)] bg-[var(--v2-surface)] px-6 py-10 text-center text-[13px] text-[var(--v2-muted)] shadow-[var(--v2-shadow-sm)]",children:"No markets."}):(0,t.jsx)("section",{className:"overflow-hidden rounded-2xl border border-[var(--v2-border)] bg-[var(--v2-surface)] shadow-[var(--v2-shadow-md)]",children:(0,t.jsxs)("table",{className:"w-full text-[13px]",children:[(0,t.jsx)("thead",{className:"bg-[var(--v2-surface-2)]",children:(0,t.jsxs)("tr",{className:"text-left text-[11px] font-extrabold uppercase tracking-widest text-[var(--v2-muted)]",children:[(0,t.jsx)("th",{className:"px-4 py-3",children:"Market"}),(0,t.jsx)("th",{className:"px-4 py-3",children:"Status"}),(0,t.jsx)("th",{className:"px-4 py-3",children:"Fees"}),(0,t.jsx)("th",{className:"px-4 py-3 text-right",children:"Actions"})]})}),(0,t.jsx)("tbody",{children:c.map(e=>{let s="enabled"===e.status,r=h===e.id;return(0,t.jsxs)("tr",{className:"border-t border-[var(--v2-border)]",children:[(0,t.jsxs)("td",{className:"px-4 py-3",children:[(0,t.jsx)("div",{className:"font-semibold text-[var(--v2-text)]",children:e.symbol}),(0,t.jsx)("div",{className:"mt-0.5 font-mono text-[11px] text-[var(--v2-muted)]",children:e.id})]}),(0,t.jsx)("td",{className:"px-4 py-3",children:(0,t.jsx)("span",{className:"inline-flex items-center rounded-full border px-2 py-0.5 text-[11px] font-semibold "+(s?"border-[color-mix(in_srgb,var(--up)_40%,var(--v2-border))] text-[var(--up)]":"border-[color-mix(in_srgb,var(--warn)_40%,var(--v2-border))] text-[var(--warn)]"),children:s?"enabled":"disabled"})}),(0,t.jsxs)("td",{className:"px-4 py-3 text-[12px] text-[var(--v2-muted)]",children:["maker ",e.maker_fee_bps,"bps · taker ",e.taker_fee_bps,"bps"]}),(0,t.jsx)("td",{className:"px-4 py-3 text-right",children:s?(0,t.jsx)(a.V2Button,{size:"sm",variant:"secondary",disabled:r,onClick:()=>void f(e.id,"disabled"),children:r?"…":"Disable"}):(0,t.jsx)(a.V2Button,{size:"sm",variant:"primary",disabled:r,onClick:()=>void f(e.id,"enabled"),children:r?"…":"Enable"})})]},e.id)})})]})})]})}e.s(["AdminMarketsClient",()=>d])}]);