(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,796830,e=>{"use strict";var t=e.i(843476);let a=e.i(271645).forwardRef(function({className:e="",type:a="text",...s},r){return(0,t.jsx)("input",{ref:r,type:a,className:"h-11 w-full rounded-xl border border-[var(--v2-border)] bg-[var(--v2-surface)] px-3 text-[14px] text-[var(--v2-text)] shadow-[var(--v2-shadow-sm)] outline-none placeholder:text-[color-mix(in_srgb,var(--v2-muted)_70%,transparent)] focus:ring-2 focus:ring-[var(--v2-ring)] "+e,...s})});e.s(["V2Input",0,a])},184724,e=>{"use strict";var t=e.i(843476);function a(e){let t=e?.variant??"secondary",a=e?.size??"md";return["inline-flex select-none items-center justify-center gap-2 whitespace-nowrap rounded-xl transition focus:outline-none focus:ring-2 focus:ring-[var(--v2-ring)] disabled:pointer-events-none disabled:opacity-55","lg"===a?"h-12 px-5 text-[15px]":"sm"===a?"h-9 px-3 text-[13px]":"h-11 px-4 text-[14px]","primary"===t?"bg-[var(--v2-accent)] text-white font-semibold shadow-[var(--v2-shadow-sm)] hover:brightness-105":"danger"===t?"bg-[var(--down)] text-white font-semibold shadow-[var(--v2-shadow-sm)] hover:brightness-105":"ghost"===t?"bg-transparent text-[var(--v2-text)] font-semibold hover:bg-[var(--v2-surface-2)]":"border border-[var(--v2-border)] bg-[var(--v2-surface)] text-[var(--v2-text)] font-semibold shadow-[var(--v2-shadow-sm)] hover:bg-[var(--v2-surface-2)]",e?.fullWidth?"w-full":"",e?.className??""].filter(Boolean).join(" ")}let s=e.i(271645).forwardRef(function({variant:e,size:s,fullWidth:r,className:n,type:i,...d},l){return(0,t.jsx)("button",{ref:l,type:i??"button",className:a({variant:e,size:s,fullWidth:r,className:n}),...d})});e.s(["V2Button",0,s,"v2ButtonClassName",()=>a])},283538,e=>{"use strict";var t=e.i(843476);function a({children:e,className:a=""}){return(0,t.jsx)("section",{className:"rounded-[var(--v2-radius-lg)] border border-[var(--v2-border)] bg-[var(--v2-surface)] shadow-[var(--v2-shadow-sm)] "+a,children:e})}function s({title:e,subtitle:a,right:s}){return(0,t.jsxs)("header",{className:"flex items-start justify-between gap-3 px-4 pt-4",children:[(0,t.jsxs)("div",{className:"min-w-0",children:[(0,t.jsx)("div",{className:"text-[15px] font-semibold text-[var(--v2-text)]",children:e}),a?(0,t.jsx)("div",{className:"mt-0.5 text-[13px] text-[var(--v2-muted)]",children:a}):null]}),s?(0,t.jsx)("div",{className:"shrink-0",children:s}):null]})}function r({children:e}){return(0,t.jsx)("div",{className:"px-4 pb-4 pt-3",children:e})}e.s(["V2Card",()=>a,"V2CardBody",()=>r,"V2CardHeader",()=>s])},59298,e=>{"use strict";var t=e.i(843476);function a({className:e=""}){return(0,t.jsx)("div",{className:"animate-pulse rounded-xl border border-[var(--v2-border)] bg-[var(--v2-surface-2)] "+e,"aria-hidden":"true"})}e.s(["V2Skeleton",()=>a])},804015,e=>{"use strict";var t=e.i(843476),a=e.i(271645),s=e.i(184724),r=e.i(796830),n=e.i(59298),i=e.i(283538);let d={binance:"Binance",bybit:"Bybit",okx:"OKX",kucoin:"KuCoin",gateio:"Gate.io",bitget:"Bitget",mexc:"MEXC"},l={binance:"var(--warn)",bybit:"var(--accent-2)",okx:"var(--accent)",kucoin:"var(--accent)",gateio:"var(--accent-2)",bitget:"var(--warn)",mexc:"var(--accent)"};function c({userId:e}){let[c,o]=(0,a.useState)([]),[x,v]=(0,a.useState)(!0),[u,m]=(0,a.useState)(!1),[h,b]=(0,a.useState)({}),[p,g]=(0,a.useState)({}),[f,j]=(0,a.useState)("binance"),[N,y]=(0,a.useState)(""),[w,k]=(0,a.useState)(""),[C,S]=(0,a.useState)(""),[B,V]=(0,a.useState)(""),[A,I]=(0,a.useState)(!1),[P,K]=(0,a.useState)(null),E=e?{"x-user-id":e}:{},O=(0,a.useCallback)(async()=>{try{let e=await fetch("/api/exchange/connections",{credentials:"include",headers:E});if(e.ok){let t=await e.json();o(t.connections??[])}}catch{}finally{v(!1)}},[e]);(0,a.useEffect)(()=>{e?O():v(!1)},[e,O]);let T=async e=>{g(t=>({...t,[e]:!0}));try{let t=await fetch(`/api/exchange/connections/${e}`,{credentials:"include",headers:E});if(t.ok){let a=await t.json();b(t=>({...t,[e]:a.balances}))}}catch{}finally{g(t=>({...t,[e]:!1}))}},R=async e=>{confirm("Remove this exchange connection?")&&(await fetch(`/api/exchange/connections/${e}`,{method:"DELETE",credentials:"include",headers:E}),o(t=>t.filter(t=>t.id!==e)))},X=async e=>{e.preventDefault(),I(!0),K(null);try{let e=await fetch("/api/exchange/connections",{method:"POST",credentials:"include",headers:{...E,"Content-Type":"application/json"},body:JSON.stringify({exchange:f,label:N,api_key:w,api_secret:C,passphrase:B||void 0})}),t=await e.json();if(!e.ok)return void K(t.message||t.error||"Failed to add connection");m(!1),y(""),k(""),S(""),V(""),O()}catch(e){K(e.message)}finally{I(!1)}};return e?(0,t.jsxs)("div",{className:"flex flex-col gap-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-lg font-extrabold tracking-tight text-[var(--v2-text)]",children:"API connections"}),(0,t.jsx)("p",{className:"text-[13px] text-[var(--v2-muted)]",children:"Connect external exchange APIs for arbitrage signals and copy trading."}),(0,t.jsx)("p",{className:"mt-1 text-[12px] text-[var(--v2-muted)]",children:"Scanning works without keys. Bots: Cash & Carry needs 1 exchange; cross-exchange strategies may need 2."})]}),(0,t.jsx)(s.V2Button,{variant:u?"secondary":"primary",onClick:()=>m(!u),children:u?"Cancel":"+ Add connection"})]}),u&&(0,t.jsxs)("form",{onSubmit:X,className:"rounded-2xl border border-[var(--v2-border)] bg-[var(--v2-surface)] p-5 shadow-[var(--v2-shadow-md)]",children:[(0,t.jsxs)("div",{className:"grid gap-4 sm:grid-cols-2",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"mb-1 block text-[12px] font-semibold text-[var(--v2-muted)]",children:"Exchange"}),(0,t.jsxs)("select",{value:f,onChange:e=>j(e.target.value),className:"w-full rounded-xl border border-[var(--v2-border)] bg-[var(--v2-surface-2)] px-3 py-2 text-[13px] font-semibold text-[var(--v2-text)] outline-none shadow-[var(--v2-shadow-sm)] focus-visible:ring-2 focus-visible:ring-[var(--v2-ring)]",children:[(0,t.jsx)("option",{value:"binance",children:"Binance"}),(0,t.jsx)("option",{value:"bybit",children:"Bybit"}),(0,t.jsx)("option",{value:"okx",children:"OKX"}),(0,t.jsx)("option",{value:"kucoin",children:"KuCoin"}),(0,t.jsx)("option",{value:"gateio",children:"Gate.io"}),(0,t.jsx)("option",{value:"bitget",children:"Bitget"}),(0,t.jsx)("option",{value:"mexc",children:"MEXC"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"mb-1 block text-[12px] font-semibold text-[var(--v2-muted)]",children:"Label"}),(0,t.jsx)(r.V2Input,{value:N,onChange:e=>y(e.target.value),placeholder:"e.g. Main Trading Account",required:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"mb-1 block text-[12px] font-semibold text-[var(--v2-muted)]",children:"API key"}),(0,t.jsx)(r.V2Input,{type:"password",value:w,onChange:e=>k(e.target.value),className:"font-mono",required:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"mb-1 block text-[12px] font-semibold text-[var(--v2-muted)]",children:"API secret"}),(0,t.jsx)(r.V2Input,{type:"password",value:C,onChange:e=>S(e.target.value),className:"font-mono",required:!0})]}),("okx"===f||"kucoin"===f)&&(0,t.jsxs)("div",{className:"sm:col-span-2",children:[(0,t.jsxs)("label",{className:"mb-1 block text-[12px] font-semibold text-[var(--v2-muted)]",children:["Passphrase (","okx"===f?"OKX":"KuCoin",")"]}),(0,t.jsx)(r.V2Input,{type:"password",value:B,onChange:e=>V(e.target.value),className:"font-mono"})]})]}),P&&(0,t.jsx)("div",{className:"mt-3 rounded-2xl border border-[var(--v2-border)] bg-[var(--down-bg)] px-3 py-2 text-[12px] font-semibold text-[var(--down)]",children:P}),(0,t.jsxs)("div",{className:"mt-4 flex items-center gap-3",children:[(0,t.jsx)(s.V2Button,{type:"submit",variant:"primary",disabled:A,children:A?"Validating…":"Connect"}),(0,t.jsx)("span",{className:"text-[12px] text-[var(--v2-muted)]",children:"Credentials are encrypted at rest (AES-256-GCM). We validate by fetching balances."})]})]}),x?(0,t.jsxs)("div",{className:"grid gap-3",children:[(0,t.jsx)(n.V2Skeleton,{className:"h-24"}),(0,t.jsx)(n.V2Skeleton,{className:"h-24"})]}):0===c.length?(0,t.jsxs)("div",{className:"rounded-2xl border border-dashed border-[var(--v2-border)] bg-[var(--v2-surface)] py-12 text-center shadow-[var(--v2-shadow-sm)]",children:[(0,t.jsx)("div",{className:"text-[13px] font-semibold text-[var(--v2-text)]",children:"No connections yet"}),(0,t.jsx)("div",{className:"mt-1 text-[12px] text-[var(--v2-muted)]",children:"Add your first exchange API to get started."})]}):(0,t.jsx)("div",{className:"grid gap-3",children:c.map(e=>(0,t.jsxs)(i.V2Card,{className:"p-4",children:[(0,t.jsxs)("div",{className:"flex items-start justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"grid h-9 w-9 place-items-center rounded-lg text-xs font-bold text-white",style:{background:l[e.exchange]??"var(--accent)"},children:e.exchange.slice(0,2).toUpperCase()}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-[13px] font-bold text-[var(--v2-text)]",children:e.label}),(0,t.jsxs)("div",{className:"flex items-center gap-2 text-[12px] text-[var(--v2-muted)]",children:[(0,t.jsx)("span",{children:d[e.exchange]??e.exchange}),(0,t.jsxs)("span",{className:`inline-flex items-center gap-1 rounded-full px-1.5 py-0.5 text-[10px] font-medium ${"active"===e.status?"bg-[var(--up-bg)] text-[var(--up)]":"bg-[var(--down-bg)] text-[var(--down)]"}`,children:[(0,t.jsx)("span",{className:`h-1 w-1 rounded-full ${"active"===e.status?"bg-[var(--up)]":"bg-[var(--down)]"}`}),e.status]})]})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(s.V2Button,{variant:"secondary",onClick:()=>T(e.id),disabled:p[e.id],children:p[e.id]?"Loading…":"Balances"}),(0,t.jsx)(s.V2Button,{variant:"danger",onClick:()=>R(e.id),children:"Remove"})]})]}),h[e.id]&&(0,t.jsx)("div",{className:"mt-3 border-t border-[var(--v2-border)] pt-3",children:(0,t.jsxs)("div",{className:"grid grid-cols-3 gap-2 text-[12px]",children:[(0,t.jsx)("div",{className:"font-semibold text-[var(--v2-muted)]",children:"Asset"}),(0,t.jsx)("div",{className:"font-semibold text-[var(--v2-muted)]",children:"Available"}),(0,t.jsx)("div",{className:"font-semibold text-[var(--v2-muted)]",children:"Locked"}),h[e.id].map(e=>(0,t.jsxs)("div",{className:"contents",children:[(0,t.jsx)("div",{className:"font-mono font-semibold text-[var(--v2-text)]",children:e.asset}),(0,t.jsx)("div",{className:"font-mono text-[var(--v2-text)]",children:Number(e.free).toFixed(6)}),(0,t.jsx)("div",{className:"font-mono text-[var(--v2-muted)]",children:Number(e.locked).toFixed(6)})]},e.asset))]})}),e.last_error&&(0,t.jsx)("div",{className:"mt-2 rounded-xl border border-[var(--v2-border)] bg-[var(--down-bg)] px-2 py-1 text-[11px] font-semibold text-[var(--down)]",children:e.last_error})]},e.id))})]}):(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center gap-3 py-20 text-center",children:[(0,t.jsx)("div",{className:"text-lg font-extrabold tracking-tight text-[var(--v2-text)]",children:"Connect your exchanges"}),(0,t.jsx)("div",{className:"text-[13px] text-[var(--v2-muted)]",children:"Sign in to connect your Binance, Bybit, or OKX API keys."})]})}e.s(["ConnectionsClient",()=>c])}]);