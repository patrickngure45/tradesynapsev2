(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,796830,e=>{"use strict";var t=e.i(843476);let a=e.i(271645).forwardRef(function({className:e="",type:a="text",...s},r){return(0,t.jsx)("input",{ref:r,type:a,className:"h-11 w-full rounded-xl border border-[var(--v2-border)] bg-[var(--v2-surface)] px-3 text-[14px] text-[var(--v2-text)] shadow-[var(--v2-shadow-sm)] outline-none placeholder:text-[color-mix(in_srgb,var(--v2-muted)_70%,transparent)] focus:ring-2 focus:ring-[var(--v2-ring)] "+e,...s})});e.s(["V2Input",0,a])},184724,e=>{"use strict";var t=e.i(843476);function a(e){let t=e?.variant??"secondary",a=e?.size??"md";return["inline-flex select-none items-center justify-center gap-2 whitespace-nowrap rounded-xl transition focus:outline-none focus:ring-2 focus:ring-[var(--v2-ring)] disabled:pointer-events-none disabled:opacity-55","lg"===a?"h-12 px-5 text-[15px]":"sm"===a?"h-9 px-3 text-[13px]":"h-11 px-4 text-[14px]","primary"===t?"bg-[var(--v2-accent)] text-white font-semibold shadow-[var(--v2-shadow-sm)] hover:brightness-105":"danger"===t?"bg-[var(--down)] text-white font-semibold shadow-[var(--v2-shadow-sm)] hover:brightness-105":"ghost"===t?"bg-transparent text-[var(--v2-text)] font-semibold hover:bg-[var(--v2-surface-2)]":"border border-[var(--v2-border)] bg-[var(--v2-surface)] text-[var(--v2-text)] font-semibold shadow-[var(--v2-shadow-sm)] hover:bg-[var(--v2-surface-2)]",e?.fullWidth?"w-full":"",e?.className??""].filter(Boolean).join(" ")}let s=e.i(271645).forwardRef(function({variant:e,size:s,fullWidth:r,className:i,type:l,...d},n){return(0,t.jsx)("button",{ref:n,type:l??"button",className:a({variant:e,size:s,fullWidth:r,className:i}),...d})});e.s(["V2Button",0,s,"v2ButtonClassName",()=>a])},283538,e=>{"use strict";var t=e.i(843476);function a({children:e,className:a=""}){return(0,t.jsx)("section",{className:"rounded-[var(--v2-radius-lg)] border border-[var(--v2-border)] bg-[var(--v2-surface)] shadow-[var(--v2-shadow-sm)] "+a,children:e})}function s({title:e,subtitle:a,right:s}){return(0,t.jsxs)("header",{className:"flex items-start justify-between gap-3 px-4 pt-4",children:[(0,t.jsxs)("div",{className:"min-w-0",children:[(0,t.jsx)("div",{className:"text-[15px] font-semibold text-[var(--v2-text)]",children:e}),a?(0,t.jsx)("div",{className:"mt-0.5 text-[13px] text-[var(--v2-muted)]",children:a}):null]}),s?(0,t.jsx)("div",{className:"shrink-0",children:s}):null]})}function r({children:e}){return(0,t.jsx)("div",{className:"px-4 pb-4 pt-3",children:e})}e.s(["V2Card",()=>a,"V2CardBody",()=>r,"V2CardHeader",()=>s])},59298,e=>{"use strict";var t=e.i(843476);function a({className:e=""}){return(0,t.jsx)("div",{className:"animate-pulse rounded-xl border border-[var(--v2-border)] bg-[var(--v2-surface-2)] "+e,"aria-hidden":"true"})}e.s(["V2Skeleton",()=>a])},355506,e=>{"use strict";var t=e.i(843476),a=e.i(271645);function s({open:e,title:s,onClose:r,children:i}){return((0,a.useEffect)(()=>{if(!e)return;let t=e=>{"Escape"===e.key&&r()};document.addEventListener("keydown",t);let a=document.documentElement.style.overflow;return document.documentElement.style.overflow="hidden",()=>{document.removeEventListener("keydown",t),document.documentElement.style.overflow=a}},[e,r]),e)?(0,t.jsxs)("div",{className:"fixed inset-0 z-[100]",children:[(0,t.jsx)("button",{type:"button",className:"absolute inset-0 bg-black/40","aria-label":"Close",onClick:r}),(0,t.jsxs)("div",{className:"absolute inset-x-0 bottom-0 mx-auto w-full max-w-xl rounded-t-[28px] border border-[var(--v2-border)] bg-[var(--v2-surface)] shadow-[var(--v2-shadow-md)]",style:{paddingBottom:"env(safe-area-inset-bottom)"},role:"dialog","aria-modal":"true",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between gap-3 px-4 pb-2 pt-3",children:[(0,t.jsx)("div",{className:"min-w-0",children:s?(0,t.jsx)("div",{className:"truncate text-[15px] font-semibold text-[var(--v2-text)]",children:s}):null}),(0,t.jsx)("button",{type:"button",onClick:r,className:"h-9 rounded-xl px-3 text-[13px] font-semibold text-[var(--v2-muted)] hover:bg-[var(--v2-surface-2)]",children:"Close"})]}),(0,t.jsx)("div",{className:"max-h-[70dvh] overflow-auto px-4 pb-4 pt-2",children:i})]})]}):null}e.s(["V2Sheet",()=>s])},461959,e=>{"use strict";var t=e.i(843476),a=e.i(271645),s=e.i(522016),r=e.i(184724),i=e.i(283538),l=e.i(796830),d=e.i(355506),n=e.i(59298);function o(e){let t=Number(String(e??""));if(!Number.isFinite(t))return"—";if(0===t)return"0";let a=Math.abs(t);return t.toLocaleString(void 0,{maximumFractionDigits:a>=1e3?2:a>=1?4:a>=.01?6:8})}function c(e){let t=String(e||"");return t.length>18?`${t.slice(0,10)}…${t.slice(-6)}`:t}function v(){let[e,v]=(0,a.useState)(!0),[x,u]=(0,a.useState)(null),[m,h]=(0,a.useState)(null),[p,b]=(0,a.useState)(null),[g,f]=(0,a.useState)(null),[j,w]=(0,a.useState)(null),[y,N]=(0,a.useState)(null),[S,C]=(0,a.useState)([]),[k,V]=(0,a.useState)(null),[_,B]=(0,a.useState)(null),[A,T]=(0,a.useState)([]),[E,P]=(0,a.useState)([]),[$,L]=(0,a.useState)([]),[R,W]=(0,a.useState)([]),[O,q]=(0,a.useState)([]),[H,I]=(0,a.useState)(null),F=(0,a.useRef)(0),D=(0,a.useRef)(0),M=(0,a.useRef)(null),U=(0,a.useRef)(null),J=(0,a.useRef)(0),[z,K]=(0,a.useState)(!1),[Q,G]=(0,a.useState)(""),[X,Y]=(0,a.useState)(null),[Z,ee]=(0,a.useState)(!1),[et,ea]=(0,a.useState)(!1),[es,er]=(0,a.useState)(null),[ei,el]=(0,a.useState)(""),[ed,en]=(0,a.useState)(""),[eo,ec]=(0,a.useState)(""),[ev,ex]=(0,a.useState)(!1),[eu,em]=(0,a.useState)(null),[eh,ep]=(0,a.useState)(""),[eb,eg]=(0,a.useState)(""),[ef,ej]=(0,a.useState)(""),[ew,ey]=(0,a.useState)(!1),[eN,eS]=(0,a.useState)(null),[eC,ek]=(0,a.useState)(null),[eV,e_]=(0,a.useState)(""),[eB,eA]=(0,a.useState)(!1),[eT,eE]=(0,a.useState)(null),[eP,e$]=(0,a.useState)(!1),[eL,eR]=(0,a.useState)(null),eW=async()=>{let e=++D.current;M.current?.abort();let t=new AbortController;M.current=t,u(null),h(null),b(null),f(null),w(null),N(null);try{let[a,s]=await Promise.all([fetch("/api/exchange/deposit/address",{method:"POST",headers:{"content-type":"application/json"},credentials:"include",signal:t.signal,body:JSON.stringify({chain:"bsc"})}),fetch("/api/exchange/deposits/pending",{cache:"no-store",credentials:"include",signal:t.signal})]),[r,i,l]=await Promise.all([fetch("/api/exchange/assets",{cache:"no-store",credentials:"include",signal:t.signal}),fetch("/api/exchange/withdrawals/allowlist",{cache:"no-store",credentials:"include",signal:t.signal}),fetch("/api/exchange/withdrawals",{cache:"no-store",credentials:"include",signal:t.signal})]),d=Date.now()-F.current>45e3?await fetch("/api/exchange/portfolio",{cache:"no-store",credentials:"include",signal:t.signal}).catch(()=>null):null,n=await fetch("/api/exchange/balances",{cache:"no-store",credentials:"include",signal:t.signal}).catch(()=>null),o=await a.json().catch(()=>null),c=await s.json().catch(()=>null),v=await r.json().catch(()=>null),x=await i.json().catch(()=>null),u=await l.json().catch(()=>null),m=d&&d.ok?await d.json().catch(()=>null):null;if(!a.ok)throw Error("string"==typeof o?.error?o.error:`http_${a.status}`);if(e!==D.current)return;V(o?.address??null);let p=o?.supported?.token_mode?String(o.supported.token_mode):null;if(B(p),T(Array.isArray(o?.supported?.token_symbols)?o.supported.token_symbols:[]),s.ok)P(Array.isArray(c?.deposits)?c.deposits:[]);else{let e=c?.error||c?.message;b("string"==typeof e&&e.length?e:`Pending deposits unavailable (HTTP ${s.status}).`),P([])}let g=Array.isArray(v?.assets)?v.assets:[];if(L(g),!X){let e=g.find(e=>"bsc"===String(e.chain).toLowerCase());e&&Y(e.id)}if(i.ok){let e=Array.isArray(x?.addresses)?x.addresses:[];if(W(e),!es){let t=e.find(e=>"active"===e.status&&"bsc"===String(e.chain).toLowerCase());t&&er(t.address)}}else{let e=x?.error||x?.message;w("string"==typeof e&&e.length?e:`Allowlist unavailable (HTTP ${i.status}).`),W([])}if(l.ok)q(Array.isArray(u?.withdrawals)?u.withdrawals:[]);else{let e=u?.error||u?.message;f("string"==typeof e&&e.length?e:`Withdrawals unavailable (HTTP ${l.status}).`),q([])}if(d&&(d.ok&&m?.ok?(I(m),F.current=Date.now()):d.ok||N(`Activity unavailable (HTTP ${d.status}).`)),n&&n.ok){let e=await n.json().catch(()=>null);C(Array.isArray(e?.balances)?e.balances:[])}else{let e=n?.status;e&&h(`Balances unavailable (HTTP ${e}).`),C([])}}catch(t){if(t instanceof DOMException&&"AbortError"===t.name||e!==D.current)return;u(t instanceof Error?t.message:String(t))}finally{e===D.current&&v(!1)}};(0,a.useEffect)(()=>{eW();let e=window.setInterval(()=>{"visible"===document.visibilityState&&eW()},15e3),t=()=>{"visible"===document.visibilityState&&eW()};return document.addEventListener("visibilitychange",t),()=>{window.clearInterval(e),document.removeEventListener("visibilitychange",t)}},[]),(0,a.useEffect)(()=>{let e=()=>{try{U.current?.close()}catch{}U.current=null},t=()=>{let e=Date.now();e-J.current<900||(J.current=e,"visible"===document.visibilityState&&eW())},a=()=>{if(!("visible"!==document.visibilityState||"u"<typeof EventSource)&&!U.current)try{let e=new EventSource("/api/notifications/stream",{withCredentials:!0});e.addEventListener("notification",e=>{try{var a;let s,r=JSON.parse(String(e.data??"{}"));a=String(r?.type??""),s=String(a||""),("deposit_credited"===s||"withdrawal_approved"===s||"withdrawal_rejected"===s||"withdrawal_completed"===s||"order_filled"===s||"order_partially_filled"===s||"order_canceled"===s||"order_rejected"===s)&&t()}catch{}}),e.addEventListener("ready",()=>t()),e.onerror=()=>{},U.current=e}catch{e()}},s=()=>{"visible"===document.visibilityState?a():e()};return document.addEventListener("visibilitychange",s),a(),()=>{document.removeEventListener("visibilitychange",s),e()}},[]);let eO=(0,a.useMemo)(()=>S.filter(e=>{let t=Number(e.available),a=Number(e.posted),s=Number(e.held);return Number.isFinite(t)&&0!==t||Number.isFinite(a)&&0!==a||Number.isFinite(s)&&0!==s}),[S]),eq=async()=>{let e=eV.trim();if(e){eA(!0),eE(null);try{let t=await fetch("/api/exchange/deposits/trace",{method:"POST",credentials:"include",headers:{"content-type":"application/json"},body:JSON.stringify({chain:"bsc",tx_hash:e})}),a=await t.json().catch(()=>null);t.ok?eE(a):eE({ok:!1,error:String(a?.error??"trace_failed"),message:String(a?.message??a?.details?.message??"")})}catch(e){eE({ok:!1,error:e instanceof Error?e.message:String(e)})}finally{eA(!1)}}},eH=async()=>{let e=eV.trim();if(e){e$(!0),eR(null);try{let t=await fetch("/api/exchange/deposits/report",{method:"POST",credentials:"include",headers:{"content-type":"application/json"},body:JSON.stringify({chain:"bsc",tx_hash:e})}),a=await t.json().catch(()=>null);t.ok?eR(a):eR({ok:!1,error:String(a?.error??"post_failed"),message:String(a?.details?.message??a?.message??"")})}catch(e){eR({ok:!1,error:e instanceof Error?e.message:String(e)})}finally{e$(!1)}}},eI=(0,a.useMemo)(()=>X?$.find(e=>e.id===X)??null:null,[$,X]),eF=(0,a.useMemo)(()=>es?R.find(e=>e.address===es)??null:null,[R,es]),eD=(0,a.useMemo)(()=>{let e=Q.trim().toLowerCase(),t=$.filter(e=>"bsc"===String(e.chain).toLowerCase());return e?t.filter(t=>{let a=String(t.symbol??"").toLowerCase(),s=String(t.name??"").toLowerCase();return a.includes(e)||s.includes(e)}):t},[$,Q]),eM=async()=>{let e=ei.trim();if(e){em(null),ex(!0);try{let t=await fetch("/api/exchange/withdrawals/allowlist",{method:"POST",credentials:"include",headers:{"content-type":"application/json"},body:JSON.stringify({chain:"bsc",address:e,label:ed.trim()||void 0,totp_code:eo.trim()||void 0})}),a=await t.json().catch(()=>null);if(!t.ok){let e=a?.details?.message||a?.message||a?.error;em("string"==typeof e&&e.length?e:`Failed (HTTP ${t.status}).`);return}let s=a?.address?.address;"string"==typeof s&&s&&er(s),el(""),en(""),ec(""),ea(!1),await eW()}catch(e){em(e instanceof Error?e.message:String(e))}finally{ex(!1)}}},eU=async()=>{let e=eh.trim();if(X&&es&&e){ek(null),eS(null),ey(!0);try{let t=await fetch("/api/exchange/withdrawals/request",{method:"POST",credentials:"include",headers:{"content-type":"application/json"},body:JSON.stringify({asset_id:X,amount:e,destination_address:es,reference:eb.trim()||void 0,totp_code:ef.trim()||void 0})}),a=await t.json().catch(()=>null);if(!t.ok){let e=a?.details?.message||a?.detail?.message||a?.message||a?.error;ek("string"==typeof e&&e.length?e:`Failed (HTTP ${t.status}).`);return}eS(a),ep(""),eg(""),ej(""),await eW()}catch(e){ek(e instanceof Error?e.message:String(e))}finally{ey(!1)}}},eJ=async e=>{if(e)try{await fetch(`/api/exchange/withdrawals/${encodeURIComponent(e)}/cancel`,{method:"POST",credentials:"include",headers:{"content-type":"application/json"}})}finally{await eW()}},ez=e=>{let t=document.getElementById(e);t&&t.scrollIntoView({behavior:"smooth",block:"start"})};return(0,t.jsxs)("main",{className:"space-y-4",children:[(0,t.jsxs)("header",{className:"space-y-2",children:[(0,t.jsx)("div",{className:"text-[11px] font-bold uppercase tracking-widest text-[var(--v2-muted)]",children:"Wallet"}),(0,t.jsx)("h1",{className:"text-2xl font-extrabold tracking-tight",children:"Balances & deposits"}),(0,t.jsx)("p",{className:"text-sm text-[var(--v2-muted)]",children:"Fast deposit visibility, clear statuses, mobile-first."})]}),(0,t.jsxs)(i.V2Card,{children:[(0,t.jsx)(i.V2CardHeader,{title:"Quick actions",subtitle:"Deposit, withdraw, track"}),(0,t.jsxs)(i.V2CardBody,{children:[(0,t.jsxs)("div",{className:"grid grid-cols-3 gap-2",children:[(0,t.jsx)(r.V2Button,{variant:"secondary",fullWidth:!0,onClick:()=>ez("v2-wallet-deposit"),children:"Deposit"}),(0,t.jsx)(r.V2Button,{variant:"secondary",fullWidth:!0,onClick:()=>ez("v2-wallet-withdraw"),children:"Withdraw"}),(0,t.jsx)(s.default,{href:"/v2/orders",className:(0,r.v2ButtonClassName)({variant:"primary",fullWidth:!0}),children:"Orders"})]}),(0,t.jsxs)("div",{className:"mt-3 grid grid-cols-2 gap-2",children:[(0,t.jsxs)("div",{className:"rounded-2xl border border-[var(--v2-border)] bg-[var(--v2-surface)] px-3 py-3 shadow-[var(--v2-shadow-sm)]",children:[(0,t.jsx)("div",{className:"text-[11px] font-bold uppercase tracking-widest text-[var(--v2-muted)]",children:"Pending deposits"}),(0,t.jsx)("div",{className:"mt-1 text-[16px] font-extrabold text-[var(--v2-text)]",children:e?"…":String(E.length)})]}),(0,t.jsxs)("div",{className:"rounded-2xl border border-[var(--v2-border)] bg-[var(--v2-surface)] px-3 py-3 shadow-[var(--v2-shadow-sm)]",children:[(0,t.jsx)("div",{className:"text-[11px] font-bold uppercase tracking-widest text-[var(--v2-muted)]",children:"Open orders"}),(0,t.jsx)("div",{className:"mt-1 text-[16px] font-extrabold text-[var(--v2-text)]",children:e?"…":String(H?.stats?.openOrders??"—")})]})]}),y?(0,t.jsx)("div",{className:"mt-2 text-[12px] text-[var(--v2-muted)]",children:y}):H?.recentFills?.length?(0,t.jsxs)("div",{className:"mt-3",children:[(0,t.jsx)("div",{className:"mb-2 text-[11px] font-bold uppercase tracking-widest text-[var(--v2-muted)]",children:"Recent fills"}),(0,t.jsx)("div",{className:"grid gap-2",children:H.recentFills.slice(0,3).map(e=>(0,t.jsxs)("div",{className:"flex items-center justify-between gap-3 rounded-2xl border border-[var(--v2-border)] bg-[var(--v2-surface)] px-3 py-2 shadow-[var(--v2-shadow-sm)]",children:[(0,t.jsxs)("div",{className:"min-w-0",children:[(0,t.jsx)("div",{className:"text-[13px] font-semibold text-[var(--v2-text)]",children:e.market}),(0,t.jsxs)("div",{className:"mt-0.5 text-[11px] text-[var(--v2-muted)]",children:[String(e.side).toUpperCase()," • ",o(e.quantity)," @ ",o(e.price)]})]}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsx)("div",{className:"font-mono text-[12px] font-semibold text-[var(--v2-text)]",children:o(e.quoteAmount)}),(0,t.jsx)("div",{className:"mt-0.5 text-[11px] text-[var(--v2-muted)]",children:String(e.role)})]})]},e.executionId))})]}):null]})]}),x?(0,t.jsxs)(i.V2Card,{children:[(0,t.jsx)(i.V2CardHeader,{title:"Wallet unavailable",subtitle:"Sign in and try again."}),(0,t.jsxs)(i.V2CardBody,{children:[(0,t.jsx)("div",{className:"text-sm text-[var(--v2-muted)]",children:String(x)}),(0,t.jsx)("div",{className:"mt-3",children:(0,t.jsx)(r.V2Button,{variant:"primary",fullWidth:!0,onClick:()=>void eW(),children:"Retry"})})]})]}):null,(0,t.jsxs)(i.V2Card,{children:[(0,t.jsx)(i.V2CardHeader,{title:"Deposit address",subtitle:"BSC — your permanent address"}),(0,t.jsx)(i.V2CardBody,{children:e?(0,t.jsx)(n.V2Skeleton,{className:"h-14 w-full"}):k?(0,t.jsxs)("div",{className:"grid gap-2",children:[(0,t.jsx)("div",{className:"rounded-2xl border border-[var(--v2-border)] bg-[var(--v2-surface-2)] px-3 py-3",children:(0,t.jsx)("div",{className:"break-all font-mono text-[12px] text-[var(--v2-text)]",children:k})}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,t.jsx)(r.V2Button,{variant:"secondary",fullWidth:!0,onClick:()=>void navigator.clipboard.writeText(k),children:"Copy"}),(0,t.jsx)(r.V2Button,{variant:"primary",fullWidth:!0,onClick:()=>void eW(),children:"Refresh"})]}),"allowlist"===_&&A.length?(0,t.jsxs)("div",{className:"text-[12px] text-[var(--v2-muted)]",children:["Monitored tokens: ",(0,t.jsx)("span",{className:"font-semibold text-[var(--v2-text)]",children:A.slice(0,10).join(", ")}),A.length>10?"…":""]}):null]}):(0,t.jsx)("div",{className:"text-sm text-[var(--v2-muted)]",children:"No deposit address yet."})})]}),(0,t.jsxs)(i.V2Card,{children:[(0,t.jsx)(i.V2CardHeader,{title:"Pending confirmations",subtitle:"Auto-updates"}),(0,t.jsxs)(i.V2CardBody,{children:[p?(0,t.jsx)("div",{className:"mb-2 rounded-2xl border border-[var(--v2-border)] bg-[var(--v2-surface-2)] px-3 py-2 text-[12px] text-[var(--v2-muted)]",children:p}):null,e?(0,t.jsxs)("div",{className:"grid gap-2",children:[(0,t.jsx)(n.V2Skeleton,{className:"h-14"}),(0,t.jsx)(n.V2Skeleton,{className:"h-14"}),(0,t.jsx)(n.V2Skeleton,{className:"h-14"})]}):0===E.length?(0,t.jsx)("div",{className:"text-sm text-[var(--v2-muted)]",children:"No pending deposits."}):(0,t.jsx)("div",{className:"grid gap-2",children:E.slice(0,8).map(e=>{let a=0===e.confirmations_required||e.confirmations>=e.confirmations_required,s=0===e.confirmations_required?"final":`${Math.min(e.confirmations,e.confirmations_required)}/${e.confirmations_required}`;return(0,t.jsx)("div",{className:"rounded-2xl border border-[var(--v2-border)] bg-[var(--v2-surface)] px-3 py-3 shadow-[var(--v2-shadow-sm)]",children:(0,t.jsxs)("div",{className:"flex items-start justify-between gap-3",children:[(0,t.jsxs)("div",{className:"min-w-0",children:[(0,t.jsx)("div",{className:"font-mono text-[12px] font-semibold text-[var(--v2-text)]",title:e.tx_hash,children:c(e.tx_hash)}),(0,t.jsxs)("div",{className:"mt-0.5 text-[12px] text-[var(--v2-muted)]",children:[o(e.amount)," ",String(e.asset_symbol).toUpperCase()]})]}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsx)("div",{className:`text-[12px] font-semibold ${a?"text-[var(--up)]":"text-[var(--warn)]"}`,children:a?"Ready":`${s} confs`}),(0,t.jsxs)("div",{className:"mt-0.5 text-[11px] text-[var(--v2-muted)]",children:["block ",e.block_number]})]})]})},`${e.tx_hash}:${e.log_index}`)})})]})]}),(0,t.jsx)("div",{id:"v2-wallet-deposit",children:(0,t.jsxs)(i.V2Card,{children:[(0,t.jsx)(i.V2CardHeader,{title:"Trace / Post deposit",subtitle:"Self-serve reconciliation"}),(0,t.jsx)(i.V2CardBody,{children:(0,t.jsxs)("div",{className:"grid gap-2",children:[(0,t.jsx)(l.V2Input,{value:eV,onChange:e=>e_(e.target.value),placeholder:"0x… tx hash",spellCheck:!1,autoCapitalize:"none",autoCorrect:"off"}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,t.jsx)(r.V2Button,{variant:"secondary",fullWidth:!0,disabled:eB||!eV.trim(),onClick:()=>void eq(),children:eB?"Tracing…":"Trace"}),(0,t.jsx)(r.V2Button,{variant:"primary",fullWidth:!0,disabled:eP||!eV.trim(),onClick:()=>void eH(),children:eP?"Posting…":"Post"})]}),eT&&eT.ok?(0,t.jsxs)("div",{className:"rounded-2xl border border-[var(--v2-border)] bg-[var(--v2-surface-2)] px-3 py-2 text-[13px]",children:[(0,t.jsxs)("div",{className:"font-semibold text-[var(--v2-text)]",children:["Verdict: ",eT.verdict]}),eT.diagnostic?.message?(0,t.jsx)("div",{className:"mt-1 text-[var(--v2-muted)]",children:eT.diagnostic.message}):null]}):eT&&!eT.ok?(0,t.jsx)("div",{className:"rounded-2xl border border-[var(--v2-border)] bg-[var(--down-bg)] px-3 py-2 text-[13px] font-semibold text-[var(--down)]",children:eT.message?eT.message:eT.error}):null,eL&&eL.ok?(0,t.jsx)("div",{className:"rounded-2xl border border-[var(--v2-border)] bg-[var(--up-bg)] px-3 py-2 text-[13px] font-semibold text-[var(--up)]",children:0===eL.credits.length?"Processed":1===eL.credits.length?`${"duplicate"===eL.credits[0].outcome?"Already credited":"Credited"}. +${eL.credits[0].amount} ${eL.credits[0].asset_symbol}`:`Processed ${eL.credits.length} transfers.`}):eL&&!eL.ok?(0,t.jsx)("div",{className:"rounded-2xl border border-[var(--v2-border)] bg-[var(--down-bg)] px-3 py-2 text-[13px] font-semibold text-[var(--down)]",children:eL.message?eL.message:eL.error}):null]})})]})}),(0,t.jsx)("div",{id:"v2-wallet-withdraw",children:(0,t.jsxs)(i.V2Card,{children:[(0,t.jsx)(i.V2CardHeader,{title:"Withdraw",subtitle:"BSC — allowlisted addresses only"}),(0,t.jsxs)(i.V2CardBody,{children:[j?(0,t.jsx)("div",{className:"mb-2 rounded-2xl border border-[var(--v2-border)] bg-[var(--v2-surface-2)] px-3 py-2 text-[12px] text-[var(--v2-muted)]",children:j}):null,eC?(0,t.jsx)("div",{className:"mb-2 rounded-2xl border border-[var(--v2-border)] bg-[var(--down-bg)] px-3 py-2 text-[13px] font-semibold text-[var(--down)]",children:eC}):null,eN?.withdrawal?.id?(0,t.jsxs)("div",{className:"mb-2 rounded-2xl border border-[var(--v2-border)] bg-[var(--up-bg)] px-3 py-2 text-[13px] font-semibold text-[var(--up)]",children:["Requested. ID ",String(eN.withdrawal.id).slice(0,8),"…",eN.withdrawal?.fees?.network_fee_display_amount?(0,t.jsxs)("span",{className:"ml-2 text-[12px] font-medium text-[var(--v2-muted)]",children:["Fee ",eN.withdrawal.fees.network_fee_display_amount," ",eN.withdrawal.fees.network_fee_display_symbol]}):null]}):null,(0,t.jsxs)("div",{className:"grid gap-2",children:[(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,t.jsx)("button",{type:"button",onClick:()=>K(!0),className:"h-11 rounded-xl border border-[var(--v2-border)] bg-[var(--v2-surface)] px-3 text-left text-[14px] font-semibold text-[var(--v2-text)] shadow-[var(--v2-shadow-sm)]",children:eI?String(eI.symbol).toUpperCase():"Asset"}),(0,t.jsx)("button",{type:"button",onClick:()=>ee(!0),className:"h-11 rounded-xl border border-[var(--v2-border)] bg-[var(--v2-surface)] px-3 text-left text-[14px] font-semibold text-[var(--v2-text)] shadow-[var(--v2-shadow-sm)]",title:es??"",children:eF?.label?eF.label:es?c(es):"Destination"})]}),(0,t.jsx)(l.V2Input,{value:eh,onChange:e=>ep(e.target.value),placeholder:"Amount",inputMode:"decimal"}),(0,t.jsx)(l.V2Input,{value:eb,onChange:e=>eg(e.target.value),placeholder:"Reference (optional)"}),(0,t.jsx)(l.V2Input,{value:ef,onChange:e=>ej(e.target.value),placeholder:"2FA code (if required)",inputMode:"numeric",maxLength:6}),(0,t.jsx)(r.V2Button,{variant:"primary",fullWidth:!0,disabled:ew||!X||!es||!eh.trim(),onClick:()=>void eU(),children:ew?"Requesting…":"Request withdrawal"}),(0,t.jsx)("div",{className:"text-[12px] text-[var(--v2-muted)]",children:"Destination must be allowlisted. Some withdrawals require passkey step-up or 2FA."})]})]})]})}),(0,t.jsxs)(i.V2Card,{children:[(0,t.jsx)(i.V2CardHeader,{title:"Withdrawals",subtitle:"Recent"}),(0,t.jsxs)(i.V2CardBody,{children:[g?(0,t.jsx)("div",{className:"mb-2 rounded-2xl border border-[var(--v2-border)] bg-[var(--v2-surface-2)] px-3 py-2 text-[12px] text-[var(--v2-muted)]",children:g}):null,e?(0,t.jsxs)("div",{className:"grid gap-2",children:[(0,t.jsx)(n.V2Skeleton,{className:"h-14"}),(0,t.jsx)(n.V2Skeleton,{className:"h-14"})]}):0===O.length?(0,t.jsx)("div",{className:"text-sm text-[var(--v2-muted)]",children:"No withdrawals yet."}):(0,t.jsx)("div",{className:"grid gap-2",children:O.slice(0,10).map(e=>{let a=String(e.status||""),s="requested"===a;return(0,t.jsx)("div",{className:"rounded-2xl border border-[var(--v2-border)] bg-[var(--v2-surface)] px-3 py-3 shadow-[var(--v2-shadow-sm)]",children:(0,t.jsxs)("div",{className:"flex items-start justify-between gap-3",children:[(0,t.jsxs)("div",{className:"min-w-0",children:[(0,t.jsxs)("div",{className:"text-[13px] font-semibold text-[var(--v2-text)]",children:[o(e.amount)," ",String(e.symbol).toUpperCase()]}),(0,t.jsxs)("div",{className:"mt-0.5 font-mono text-[11px] text-[var(--v2-muted)]",title:e.destination_address,children:["to ",c(e.destination_address)]}),e.tx_hash?(0,t.jsxs)("div",{className:"mt-0.5 font-mono text-[11px] text-[var(--v2-muted)]",title:e.tx_hash,children:["tx ",c(e.tx_hash)]}):null,e.failure_reason?(0,t.jsx)("div",{className:"mt-1 text-[12px] font-semibold text-[var(--down)]",children:e.failure_reason}):null]}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsx)("div",{className:"text-[12px] font-semibold text-[var(--v2-text)]",children:a}),s?(0,t.jsx)("div",{className:"mt-2",children:(0,t.jsx)(r.V2Button,{variant:"secondary",onClick:()=>void eJ(e.id),children:"Cancel"})}):null]})]})},e.id)})})]})]}),(0,t.jsxs)(i.V2Card,{children:[(0,t.jsx)(i.V2CardHeader,{title:"Balances",subtitle:"Available / held"}),(0,t.jsxs)(i.V2CardBody,{children:[m?(0,t.jsx)("div",{className:"mb-2 rounded-2xl border border-[var(--v2-border)] bg-[var(--v2-surface-2)] px-3 py-2 text-[12px] text-[var(--v2-muted)]",children:m}):null,e?(0,t.jsxs)("div",{className:"grid gap-2",children:[(0,t.jsx)(n.V2Skeleton,{className:"h-14"}),(0,t.jsx)(n.V2Skeleton,{className:"h-14"})]}):0===eO.length?(0,t.jsx)("div",{className:"text-sm text-[var(--v2-muted)]",children:"No balances to display."}):(0,t.jsx)("div",{className:"grid gap-2",children:eO.slice(0,30).map(e=>(0,t.jsxs)("div",{className:"flex items-center justify-between gap-3 rounded-2xl border border-[var(--v2-border)] bg-[var(--v2-surface)] px-3 py-3 shadow-[var(--v2-shadow-sm)]",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-[15px] font-semibold text-[var(--v2-text)]",children:String(e.symbol).toUpperCase()}),(0,t.jsx)("div",{className:"mt-0.5 text-[12px] text-[var(--v2-muted)]",children:String(e.chain).toUpperCase()})]}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsx)("div",{className:"font-mono text-[13px] font-semibold text-[var(--v2-text)]",children:o(e.available)}),(0,t.jsxs)("div",{className:"mt-0.5 text-[11px] text-[var(--v2-muted)]",children:["held ",o(e.held)]})]})]},e.asset_id))})]})]}),(0,t.jsx)(d.V2Sheet,{open:z,title:"Select asset",onClose:()=>{K(!1),G("")},children:(0,t.jsxs)("div",{className:"grid gap-2",children:[(0,t.jsx)(l.V2Input,{value:Q,onChange:e=>G(e.target.value),placeholder:"Search"}),(0,t.jsx)("div",{className:"grid gap-2",children:eD.slice(0,50).map(e=>{let a=e.id===X;return(0,t.jsxs)("button",{type:"button",onClick:()=>{Y(e.id),K(!1),G("")},className:"flex items-center justify-between rounded-2xl border px-3 py-3 text-left shadow-[var(--v2-shadow-sm)] "+(a?"border-[var(--v2-border)] bg-[var(--v2-surface-2)]":"border-[var(--v2-border)] bg-[var(--v2-surface)] hover:bg-[var(--v2-surface-2)]"),children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-[14px] font-semibold text-[var(--v2-text)]",children:String(e.symbol).toUpperCase()}),(0,t.jsx)("div",{className:"mt-0.5 text-[12px] text-[var(--v2-muted)]",children:e.name??""})]}),(0,t.jsx)("div",{className:"text-[12px] font-semibold text-[var(--v2-muted)]",children:"BSC"})]},e.id)})})]})}),(0,t.jsx)(d.V2Sheet,{open:Z,title:"Destination",onClose:()=>ee(!1),children:(0,t.jsxs)("div",{className:"grid gap-2",children:[(0,t.jsx)(r.V2Button,{variant:"primary",fullWidth:!0,onClick:()=>{ee(!1),em(null),ea(!0)},children:"Add allowlisted address"}),(0,t.jsx)("div",{className:"text-[12px] text-[var(--v2-muted)]",children:"Select an active allowlisted address:"}),(0,t.jsx)("div",{className:"grid gap-2",children:R.filter(e=>"bsc"===String(e.chain).toLowerCase()&&"active"===e.status).slice(0,50).map(e=>{let a=e.address===es;return(0,t.jsxs)("button",{type:"button",onClick:()=>{er(e.address),ee(!1)},className:"rounded-2xl border px-3 py-3 text-left shadow-[var(--v2-shadow-sm)] "+(a?"border-[var(--v2-border)] bg-[var(--v2-surface-2)]":"border-[var(--v2-border)] bg-[var(--v2-surface)] hover:bg-[var(--v2-surface-2)]"),children:[(0,t.jsx)("div",{className:"text-[13px] font-semibold text-[var(--v2-text)]",children:e.label?e.label:c(e.address)}),(0,t.jsx)("div",{className:"mt-0.5 font-mono text-[11px] text-[var(--v2-muted)]",children:e.address})]},e.id)})})]})}),(0,t.jsx)(d.V2Sheet,{open:et,title:"Add allowlisted address",onClose:()=>ea(!1),children:(0,t.jsxs)("div",{className:"grid gap-2",children:[eu?(0,t.jsx)("div",{className:"rounded-2xl border border-[var(--v2-border)] bg-[var(--down-bg)] px-3 py-2 text-[13px] font-semibold text-[var(--down)]",children:eu}):null,(0,t.jsx)(l.V2Input,{value:ei,onChange:e=>el(e.target.value),placeholder:"0x… address",spellCheck:!1,autoCapitalize:"none",autoCorrect:"off"}),(0,t.jsx)(l.V2Input,{value:ed,onChange:e=>en(e.target.value),placeholder:"Label (optional)"}),(0,t.jsx)(l.V2Input,{value:eo,onChange:e=>ec(e.target.value),placeholder:"2FA code (if required)",inputMode:"numeric",maxLength:6}),(0,t.jsx)(r.V2Button,{variant:"primary",fullWidth:!0,disabled:ev||!ei.trim(),onClick:()=>void eM(),children:ev?"Adding…":"Add"}),(0,t.jsx)("div",{className:"text-[12px] text-[var(--v2-muted)]",children:"May require passkey step-up or 2FA."})]})})]})}e.s(["WalletClient",()=>v])}]);