{"version":3,"sources":["../../../../src/app/login/AuthClient.tsx","../../../../src/lib/p2p/supportedCountries.ts","../../../../src/lib/p2p/countryIso2.ts"],"sourcesContent":["\"use client\";\r\n\r\nimport { useRef, useState } from \"react\";\r\nimport { useRouter, useSearchParams } from \"next/navigation\";\r\nimport Link from \"next/link\";\r\nimport { SUPPORTED_P2P_COUNTRIES } from \"@/lib/p2p/supportedCountries\";\r\nimport { countryNameToIso2 } from \"@/lib/p2p/countryIso2\";\r\nimport { V2Button } from \"@/components/v2/Button\";\r\nimport { V2Input } from \"@/components/v2/Input\";\r\nimport { V2Tabs } from \"@/components/v2/Tabs\";\r\n\r\ntype AuthMode = \"login\" | \"signup\";\r\ntype AuthVariant = \"tabs\" | \"page\";\r\n\r\nexport function AuthClient({\r\n  initialMode = \"login\",\r\n  variant = \"tabs\",\r\n}: {\r\n  initialMode?: AuthMode;\r\n  variant?: AuthVariant;\r\n}) {\r\n  const router = useRouter();\r\n  const searchParams = useSearchParams();\r\n  const redirectTo = searchParams.get(\"next\") || \"/wallet\";\r\n  const [mode, setMode] = useState<AuthMode>(initialMode);\r\n  const [email, setEmail] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n  const [totpCode, setTotpCode] = useState(\"\");\r\n  const [backupCode, setBackupCode] = useState(\"\");\r\n  const [needsTotp, setNeedsTotp] = useState(false);\r\n  const [displayName, setDisplayName] = useState(\"\");\r\n  const [country, setCountry] = useState(\"US\");\r\n  const [acceptTerms, setAcceptTerms] = useState(false);\r\n  const [acceptRisk, setAcceptRisk] = useState(false);\r\n  const [error, setError] = useState<string | null>(null);\r\n  const [loading, setLoading] = useState(false);\r\n  const [verifyPrompt, setVerifyPrompt] = useState<{ email: string; verifyUrl: string | null } | null>(null);\r\n\r\n  const countryDetailsRef = useRef<HTMLDetailsElement | null>(null);\r\n\r\n  const supportedByRegion = Object.entries(SUPPORTED_P2P_COUNTRIES) as Array<[string, readonly string[]]>;\r\n  const supportedCount = supportedByRegion.reduce((acc, [, list]) => acc + list.length, 0);\r\n\r\n  const iso2ToName = (() => {\r\n    const map = new Map<string, string>();\r\n    for (const [, countries] of supportedByRegion) {\r\n      for (const name of countries) {\r\n        const iso2 = countryNameToIso2(name);\r\n        if (iso2) map.set(iso2.toUpperCase(), name);\r\n      }\r\n    }\r\n    return map;\r\n  })();\r\n\r\n  const setOnboardingMode = (mode: \"beginner\" | \"advanced\") => {\r\n    try {\r\n      localStorage.setItem(\"ts_onboarding_mode\", mode);\r\n    } catch {\r\n      // ignore\r\n    }\r\n  };\r\n\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    setError(null);\r\n    setLoading(true);\r\n\r\n    try {\r\n      const endpoint = mode === \"signup\" ? \"/api/auth/signup\" : \"/api/auth/login\";\r\n      const body: Record<string, unknown> = { email, password };\r\n      if (mode === \"login\") {\r\n        if (totpCode.trim().length > 0) body.totp_code = totpCode.trim();\r\n        if (backupCode.trim().length > 0) body.backup_code = backupCode.trim();\r\n      }\r\n      if (mode === \"signup\" && displayName.trim()) {\r\n        body.displayName = displayName.trim();\r\n      }\r\n      if (mode === \"signup\") {\r\n        if (!acceptTerms) {\r\n          setError(\"Please accept the Terms to create an account\");\r\n          return;\r\n        }\r\n        if (!acceptRisk) {\r\n          setError(\"Please confirm you understand trading risk\");\r\n          return;\r\n        }\r\n        body.country = country;\r\n        body.acceptTerms = true;\r\n        body.acceptRisk = true;\r\n      }\r\n\r\n      const res = await fetch(endpoint, {\r\n        method: \"POST\",\r\n        credentials: \"include\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify(body),\r\n      });\r\n\r\n      const data = await res.json();\r\n\r\n      if (!res.ok) {\r\n        if (mode === \"login\" && (data.error === \"totp_required\" || data.totp_required)) {\r\n          setNeedsTotp(true);\r\n          setError(\"Enter your 2FA code to continue\");\r\n          return;\r\n        }\r\n        const msg =\r\n          data.error === \"email_taken\"\r\n            ? \"An account with this email already exists\"\r\n            : data.error === \"invalid_credentials\"\r\n              ? \"Invalid email or password\"\r\n              : data.error === \"invalid_totp_code\"\r\n                ? \"Invalid 2FA or backup code\"\r\n              : data.error?.includes?.(\"Invalid input\")\r\n                ? \"Please check your details and try again\"\r\n              : data.error ?? \"Something went wrong\";\r\n        setError(msg);\r\n        return;\r\n      }\r\n\r\n      // Store user ID for API header auth (dev compatibility)\r\n      if (data.user?.id) {\r\n        localStorage.setItem(\"ts_user_id\", data.user.id);\r\n      }\r\n\r\n      // After signup, show verify-email prompt before redirecting\r\n      if (mode === \"signup\") {\r\n        setVerifyPrompt({ email: data.user?.email ?? email, verifyUrl: data.verifyUrl ?? null });\r\n        return;\r\n      }\r\n\r\n      router.push(redirectTo);\r\n      router.refresh();\r\n    } catch {\r\n      setError(\"Network error — check your connection\");\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const nextQuery = (() => {\r\n    const next = (searchParams.get(\"next\") ?? \"\").trim();\r\n    return next ? `?next=${encodeURIComponent(next)}` : \"\";\r\n  })();\r\n\r\n  const flagClass = (() => {\r\n    const c = String(country || \"\").trim().toLowerCase();\r\n    if (!c || c === \"zz\") return null;\r\n    // flag-icons expects ISO 3166-1 alpha-2 lowercase.\r\n    return `fi fi-${c}`;\r\n  })();\r\n\r\n  const selectedCountryName = (() => {\r\n    const code = String(country || \"\").trim().toUpperCase() || \"ZZ\";\r\n    if (code === \"ZZ\") return \"International / Other\";\r\n    return iso2ToName.get(code) ?? code;\r\n  })();\r\n\r\n  return (\r\n    <div className=\"w-full\">\r\n      {/* Post-signup email verification prompt */}\r\n      {verifyPrompt ? (\r\n        <div className=\"grid gap-3 text-center\">\r\n          <div className=\"mx-auto flex h-14 w-14 items-center justify-center rounded-full border border-[var(--v2-border)] bg-[color-mix(in_srgb,var(--v2-accent-2)_12%,transparent)] text-[var(--v2-accent-2)]\">\r\n            <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-7 w-7\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" strokeWidth={1.5}>\r\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M21.75 6.75v10.5a2.25 2.25 0 01-2.25 2.25h-15a2.25 2.25 0 01-2.25-2.25V6.75m19.5 0A2.25 2.25 0 0019.5 4.5h-15a2.25 2.25 0 00-2.25 2.25m19.5 0v.243a2.25 2.25 0 01-1.07 1.916l-7.5 4.615a2.25 2.25 0 01-2.36 0L3.32 8.91a2.25 2.25 0 01-1.07-1.916V6.75\" />\r\n            </svg>\r\n          </div>\r\n          <h2 className=\"text-lg font-extrabold tracking-tight text-[var(--v2-text)]\">Verify your email</h2>\r\n          <p className=\"text-[13px] text-[var(--v2-muted)]\">\r\n            We&apos;ve sent a verification link to <span className=\"font-semibold text-[var(--v2-text)]\">{verifyPrompt.email}</span>.\r\n            Check your inbox to unlock full account features.\r\n          </p>\r\n          {verifyPrompt.verifyUrl && (\r\n            <Link\r\n              href={verifyPrompt.verifyUrl}\r\n              className=\"rounded-xl border border-[var(--v2-border)] bg-[color-mix(in_srgb,var(--v2-accent-2)_12%,transparent)] px-4 py-2 text-[13px] font-semibold text-[var(--v2-accent-2)] shadow-[var(--v2-shadow-sm)] hover:bg-[color-mix(in_srgb,var(--v2-accent-2)_18%,transparent)]\"\r\n            >\r\n              Verify Now (dev shortcut)\r\n            </Link>\r\n          )}\r\n          <div className=\"grid gap-2\">\r\n            <V2Button\r\n              variant=\"primary\"\r\n              fullWidth\r\n              onClick={() => {\r\n                setOnboardingMode(\"beginner\");\r\n                router.push(redirectTo);\r\n                router.refresh();\r\n              }}\r\n            >\r\n              Continue (Beginner)\r\n            </V2Button>\r\n\r\n            <V2Button\r\n              variant=\"secondary\"\r\n              fullWidth\r\n              onClick={() => {\r\n                setOnboardingMode(\"advanced\");\r\n                router.push(redirectTo);\r\n                router.refresh();\r\n              }}\r\n            >\r\n              Continue (Advanced)\r\n            </V2Button>\r\n          </div>\r\n\r\n          <p className=\"text-[12px] text-[var(--v2-muted)]\">\r\n            You can also verify later from{\" \"}\r\n            <Link href=\"/v2/account\" className=\"font-semibold text-[var(--v2-accent-2)] underline\">\r\n              Account Settings\r\n            </Link>\r\n            .\r\n          </p>\r\n        </div>\r\n      ) : (\r\n      <>\r\n      {variant === \"tabs\" ? (\r\n        <div className=\"mb-4\">\r\n          <V2Tabs\r\n            tabs={[\r\n              { id: \"login\", label: \"Log in\" },\r\n              { id: \"signup\", label: \"Sign up\" },\r\n            ]}\r\n            activeId={mode}\r\n            onChange={(id) => {\r\n              if (id !== \"login\" && id !== \"signup\") return;\r\n              setMode(id);\r\n              setError(null);\r\n              setNeedsTotp(false);\r\n              setTotpCode(\"\");\r\n              setBackupCode(\"\");\r\n            }}\r\n          />\r\n        </div>\r\n      ) : null}\r\n\r\n      <form onSubmit={handleSubmit} className=\"space-y-4\">\r\n        {mode === \"signup\" && (\r\n          <>\r\n            <label className=\"grid gap-1\">\r\n              <span className=\"text-[12px] font-semibold text-[var(--v2-muted)]\">Display name (optional)</span>\r\n              <div className=\"relative\">\r\n                <div className=\"pointer-events-none absolute left-3 top-1/2 -translate-y-1/2 text-[var(--v2-muted)]\">\r\n                    <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\">\r\n                      <path d=\"M20 21v-2a4 4 0 00-4-4H8a4 4 0 00-4 4v2\" />\r\n                      <circle cx=\"12\" cy=\"7\" r=\"4\" />\r\n                    </svg>\r\n                  </div>\r\n                <V2Input\r\n                  value={displayName}\r\n                  onChange={(e) => setDisplayName(e.target.value)}\r\n                  placeholder=\"Satoshi\"\r\n                  className=\"pl-10\"\r\n                />\r\n              </div>\r\n            </label>\r\n\r\n            <label className=\"grid gap-1\">\r\n              <span className=\"text-[12px] font-semibold text-[var(--v2-muted)]\">Country / region</span>\r\n              <div className=\"relative rounded-xl border border-[var(--v2-border)] bg-[var(--v2-surface)] shadow-[var(--v2-shadow-sm)]\">\r\n                <details ref={countryDetailsRef} className=\"group\">\r\n                  <summary className=\"flex cursor-pointer list-none items-center justify-between gap-3 rounded-xl px-4 py-3 outline-none transition hover:bg-[var(--v2-surface-2)] focus-visible:ring-2 focus-visible:ring-[var(--v2-ring)]\">\r\n                    <span className=\"flex min-w-0 items-center gap-3\">\r\n                      {flagClass ? (\r\n                        <span className={flagClass + \" inline-block h-4 w-6 rounded-sm border border-[var(--v2-border)]\"} aria-hidden />\r\n                      ) : (\r\n                        <span className=\"inline-block h-4 w-6 rounded-sm border border-[var(--v2-border)] bg-[var(--v2-surface-2)]\" aria-hidden />\r\n                      )}\r\n                      <span className=\"min-w-0 truncate text-[13px] font-semibold text-[var(--v2-text)]\">{selectedCountryName}</span>\r\n                    </span>\r\n\r\n                    <span className=\"inline-flex items-center gap-2 text-[11px] font-semibold text-[var(--v2-muted)]\">\r\n                      <span className=\"hidden sm:inline\">{supportedCount} supported</span>\r\n                      <svg width=\"16\" height=\"16\" viewBox=\"0 0 20 20\" fill=\"currentColor\" aria-hidden>\r\n                        <path\r\n                          fillRule=\"evenodd\"\r\n                          d=\"M5.23 7.21a.75.75 0 0 1 1.06.02L10 10.94l3.71-3.71a.75.75 0 1 1 1.06 1.06l-4.24 4.24a.75.75 0 0 1-1.06 0L5.21 8.29a.75.75 0 0 1 .02-1.08Z\"\r\n                          clipRule=\"evenodd\"\r\n                        />\r\n                      </svg>\r\n                    </span>\r\n                  </summary>\r\n\r\n                  <div className=\"absolute left-0 right-0 z-20 mt-2 overflow-hidden rounded-xl border border-[var(--v2-border)] bg-[var(--v2-surface)] shadow-[var(--v2-shadow-md)]\">\r\n                    <div className=\"border-b border-[var(--v2-border)] bg-[var(--v2-surface-2)] px-4 py-2\">\r\n                      <div className=\"flex items-center justify-between gap-3\">\r\n                        <div className=\"text-[10px] font-extrabold uppercase tracking-[0.22em] text-[var(--v2-muted)]\">Select country</div>\r\n                        <div className=\"text-xs font-semibold text-[var(--v2-muted)]\">Grouped by region</div>\r\n                      </div>\r\n                    </div>\r\n                    <div className=\"max-h-72 overflow-auto p-2\">\r\n                      <button\r\n                        type=\"button\"\r\n                        onClick={() => {\r\n                          setCountry(\"ZZ\");\r\n                          countryDetailsRef.current?.removeAttribute(\"open\");\r\n                        }}\r\n                        className={\r\n                          \"flex w-full items-center justify-between gap-3 rounded-lg px-3 py-2 text-left text-sm transition \" +\r\n                          (String(country || \"\").trim().toUpperCase() === \"ZZ\"\r\n                            ? \"bg-[color-mix(in_srgb,var(--v2-accent)_10%,transparent)] text-[var(--v2-text)]\"\r\n                            : \"hover:bg-[var(--v2-surface-2)] text-[var(--v2-text)]\")\r\n                        }\r\n                      >\r\n                        <span className=\"flex min-w-0 items-center gap-3\">\r\n                          <span className=\"inline-block h-4 w-6 rounded-sm border border-[var(--v2-border)] bg-[var(--v2-surface-2)]\" aria-hidden />\r\n                          <span className=\"min-w-0 truncate font-semibold\">International / Other</span>\r\n                        </span>\r\n                        <span className=\"text-[10px] font-extrabold uppercase tracking-[0.22em] text-[var(--v2-muted)]\">ZZ</span>\r\n                      </button>\r\n\r\n                      <div className=\"mt-2 grid gap-2\">\r\n                        {supportedByRegion.map(([region, countries]) => (\r\n                          <div key={region} className=\"rounded-lg border border-[var(--v2-border)] bg-[var(--v2-surface)]\">\r\n                            <div className=\"flex items-center justify-between gap-3 border-b border-[var(--v2-border)] px-3 py-2\">\r\n                              <div className=\"text-[10px] font-extrabold uppercase tracking-[0.22em] text-[var(--v2-muted)]\">{region}</div>\r\n                              <span className=\"rounded-full border border-[var(--v2-border)] bg-[var(--v2-surface-2)] px-2 py-0.5 text-[11px] font-bold text-[var(--v2-muted)]\">\r\n                                {countries.length}\r\n                              </span>\r\n                            </div>\r\n                            <div className=\"grid grid-cols-1 gap-1 p-2 sm:grid-cols-2\">\r\n                              {countries.map((name) => {\r\n                                const iso2 = countryNameToIso2(name);\r\n                                const code = iso2 ? iso2.toUpperCase() : \"ZZ\";\r\n                                const active = code === String(country || \"\").trim().toUpperCase();\r\n                                const iso2Lc = (iso2 ?? \"\").toLowerCase();\r\n\r\n                                return (\r\n                                  <button\r\n                                    key={name}\r\n                                    type=\"button\"\r\n                                    onClick={() => {\r\n                                      setCountry(code);\r\n                                      countryDetailsRef.current?.removeAttribute(\"open\");\r\n                                    }}\r\n                                    className={\r\n                                      \"flex items-center justify-between gap-3 rounded-md border border-[var(--v2-border)] px-2 py-1.5 text-left text-xs transition \" +\r\n                                      (active\r\n                                        ? \"bg-[color-mix(in_srgb,var(--v2-accent)_10%,transparent)] text-[var(--v2-text)]\"\r\n                                        : \"bg-[var(--v2-surface)] hover:bg-[var(--v2-surface-2)] text-[var(--v2-text)]\")\r\n                                    }\r\n                                  >\r\n                                    <span className=\"flex min-w-0 items-center gap-2\">\r\n                                      {iso2Lc ? (\r\n                                        <span className={`fi fi-${iso2Lc} inline-block h-3.5 w-5 rounded-sm border border-[var(--v2-border)]`} aria-hidden />\r\n                                      ) : (\r\n                                        <span className=\"inline-block h-3.5 w-5 rounded-sm border border-[var(--v2-border)] bg-[var(--v2-surface-2)]\" aria-hidden />\r\n                                      )}\r\n                                      <span className=\"min-w-0 truncate font-semibold\">{name}</span>\r\n                                    </span>\r\n                                    <span className=\"text-[10px] font-extrabold uppercase tracking-[0.22em] text-[var(--v2-muted)]\">{code}</span>\r\n                                  </button>\r\n                                );\r\n                              })}\r\n                            </div>\r\n                          </div>\r\n                        ))}\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </details>\r\n              </div>\r\n              <span className=\"mt-1 block text-[11px] text-[var(--v2-muted)]\">\r\n                Used to personalize fiat defaults and P2P availability. Change anytime in Account Settings.\r\n              </span>\r\n            </label>\r\n          </>\r\n        )}\r\n\r\n        <label className=\"grid gap-1\">\r\n          <span className=\"text-[12px] font-semibold text-[var(--v2-muted)]\">Email</span>\r\n          <div className=\"relative\">\r\n            <div className=\"pointer-events-none absolute left-3 top-1/2 -translate-y-1/2 text-[var(--v2-muted)]\">\r\n                <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\">\r\n                  <path d=\"M4 4h16v16H4z\" opacity=\"0\" />\r\n                  <path d=\"M4 8l8 5 8-5\" />\r\n                  <path d=\"M4 8V6a2 2 0 012-2h12a2 2 0 012 2v2\" />\r\n                  <path d=\"M20 8v10a2 2 0 01-2 2H6a2 2 0 01-2-2V8\" />\r\n                </svg>\r\n              </div>\r\n            <V2Input\r\n              type=\"email\"\r\n              value={email}\r\n              onChange={(e) => setEmail(e.target.value)}\r\n              placeholder=\"you@example.com\"\r\n              required\r\n              autoComplete=\"email\"\r\n              className=\"pl-10\"\r\n            />\r\n          </div>\r\n        </label>\r\n\r\n        <label className=\"grid gap-1\">\r\n          <span className=\"text-[12px] font-semibold text-[var(--v2-muted)]\">Password</span>\r\n          <div className=\"relative\">\r\n            <div className=\"pointer-events-none absolute left-3 top-1/2 -translate-y-1/2 text-[var(--v2-muted)]\">\r\n                <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\">\r\n                  <rect x=\"3\" y=\"11\" width=\"18\" height=\"11\" rx=\"2\" />\r\n                  <path d=\"M7 11V7a5 5 0 0110 0v4\" />\r\n                </svg>\r\n              </div>\r\n            <V2Input\r\n              type=\"password\"\r\n              value={password}\r\n              onChange={(e) => setPassword(e.target.value)}\r\n              placeholder={mode === \"signup\" ? \"Min 8 characters\" : \"Your password\"}\r\n              required\r\n              minLength={mode === \"signup\" ? 8 : 1}\r\n              autoComplete={mode === \"signup\" ? \"new-password\" : \"current-password\"}\r\n              className=\"pl-10\"\r\n            />\r\n          </div>\r\n        </label>\r\n\r\n        {mode === \"login\" ? (\r\n          <div className=\"-mt-1 text-right\">\r\n            <Link\r\n              href=\"/forgot-password\"\r\n              className=\"text-[12px] font-semibold text-[var(--v2-muted)] underline hover:text-[var(--v2-text)]\"\r\n            >\r\n              Forgot password?\r\n            </Link>\r\n          </div>\r\n        ) : null}\r\n\r\n        {mode === \"login\" && needsTotp && (\r\n          <>\r\n            <label className=\"grid gap-1\">\r\n              <span className=\"text-[12px] font-semibold text-[var(--v2-muted)]\">2FA code</span>\r\n              <V2Input\r\n                value={totpCode}\r\n                onChange={(e) => setTotpCode(e.target.value.replace(/\\D/g, \"\").slice(0, 6))}\r\n                inputMode=\"numeric\"\r\n                placeholder=\"000000\"\r\n                maxLength={6}\r\n                autoComplete=\"one-time-code\"\r\n                className=\"font-mono tracking-[0.2em]\"\r\n              />\r\n            </label>\r\n\r\n            <label className=\"grid gap-1\">\r\n              <span className=\"text-[12px] font-semibold text-[var(--v2-muted)]\">Backup code (optional)</span>\r\n              <V2Input\r\n                value={backupCode}\r\n                onChange={(e) => setBackupCode(e.target.value.toUpperCase())}\r\n                placeholder=\"XXXX-XXXX\"\r\n                autoComplete=\"off\"\r\n                className=\"font-mono tracking-[0.12em]\"\r\n              />\r\n            </label>\r\n          </>\r\n        )}\r\n\r\n        {error && (\r\n          <div\r\n            className=\"relative overflow-hidden rounded-2xl border border-[var(--v2-border)] bg-[var(--down-bg)] px-3 py-3 text-[13px] text-[var(--v2-text)]\"\r\n          >\r\n            <div className=\"flex items-start gap-3\">\r\n              <div className=\"mt-0.5 flex h-9 w-9 items-center justify-center rounded-xl border border-[var(--v2-border)] bg-[color-mix(in_srgb,var(--down)_10%,transparent)] text-[var(--down)]\" aria-hidden>\r\n                <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\">\r\n                  <path d=\"M10.29 3.86L1.82 18a2 2 0 001.71 3h16.94a2 2 0 001.71-3L13.71 3.86a2 2 0 00-3.42 0z\" />\r\n                  <path d=\"M12 9v4\" />\r\n                  <path d=\"M12 17h.01\" />\r\n                </svg>\r\n              </div>\r\n              <div className=\"min-w-0\">\r\n                <div className=\"text-[10px] font-extrabold uppercase tracking-[0.22em] text-[var(--v2-muted)]\">Alert</div>\r\n                <div className=\"mt-0.5 leading-snug font-semibold text-[var(--v2-text)]\">{error}</div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {mode === \"signup\" && (\r\n          <label className=\"flex items-start gap-2 rounded-xl border border-[var(--v2-border)] bg-[var(--v2-surface)] px-3 py-2 text-[12px] text-[var(--v2-muted)] shadow-[var(--v2-shadow-sm)]\">\r\n            <input\r\n              type=\"checkbox\"\r\n              checked={acceptTerms}\r\n              onChange={(e) => setAcceptTerms(e.target.checked)}\r\n              className=\"mt-0.5 rounded accent-[var(--v2-accent)]\"\r\n            />\r\n            <span>\r\n              I agree to the{\" \"}\r\n              <Link href=\"/terms\" className=\"font-semibold text-[var(--v2-accent)] hover:underline\">\r\n                Terms\r\n              </Link>\r\n              {\" \"}and{\" \"}\r\n              <Link href=\"/privacy\" className=\"font-semibold text-[var(--v2-accent)] hover:underline\">\r\n                Privacy Policy\r\n              </Link>\r\n              .\r\n            </span>\r\n          </label>\r\n        )}\r\n\r\n        {mode === \"signup\" && (\r\n          <label className=\"flex items-start gap-2 rounded-xl border border-[var(--v2-border)] bg-[var(--v2-surface)] px-3 py-2 text-[12px] text-[var(--v2-muted)] shadow-[var(--v2-shadow-sm)]\">\r\n            <input\r\n              type=\"checkbox\"\r\n              checked={acceptRisk}\r\n              onChange={(e) => setAcceptRisk(e.target.checked)}\r\n              className=\"mt-0.5 rounded accent-[var(--v2-accent)]\"\r\n            />\r\n            <span>\r\n              I understand crypto prices can move quickly, and I can lose money.\r\n            </span>\r\n          </label>\r\n        )}\r\n\r\n        <V2Button type=\"submit\" variant=\"primary\" fullWidth disabled={loading}>\r\n          {loading ? \"Please wait…\" : mode === \"signup\" ? \"Create account\" : \"Log in\"}\r\n        </V2Button>\r\n      </form>\r\n\r\n      {mode === \"login\" && (\r\n        <p className=\"mt-2 text-center text-[12px] text-[var(--v2-muted)]\">\r\n          Forgot your password?{\" \"}\r\n          <span className=\"text-[var(--v2-accent)] cursor-help\" title=\"Contact your admin or create a new account.\">\r\n            Contact support\r\n          </span>\r\n        </p>\r\n      )}\r\n      </>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\n","export const SUPPORTED_P2P_COUNTRIES = {\r\n  Africa: [\r\n    \"Kenya\",\r\n    \"Tanzania\",\r\n    \"Uganda\",\r\n    \"Rwanda\",\r\n    \"Burundi\",\r\n    \"Democratic Republic of the Congo\",\r\n    \"South Africa\",\r\n    \"Nigeria\",\r\n    \"Ghana\",\r\n    \"Ethiopia\",\r\n    \"Somalia\",\r\n    \"Sudan\",\r\n    \"Egypt\",\r\n  ],\r\n  \"Middle East\": [\r\n    \"United Arab Emirates\",\r\n    \"Saudi Arabia\",\r\n    \"Qatar\",\r\n    \"Kuwait\",\r\n    \"Oman\",\r\n    \"Bahrain\",\r\n    \"Israel\",\r\n    \"Jordan\",\r\n  ],\r\n  Europe: [\r\n    \"United Kingdom\",\r\n    \"Germany\",\r\n    \"France\",\r\n    \"Italy\",\r\n    \"Netherlands\",\r\n    \"Sweden\",\r\n    \"Norway\",\r\n    \"Spain\",\r\n    \"Switzerland\",\r\n    \"Ireland\",\r\n    \"Belgium\",\r\n    \"Austria\",\r\n    \"Denmark\",\r\n  ],\r\n  \"North America\": [\"United States\", \"Canada\"],\r\n  Asia: [\r\n    \"India\",\r\n    \"China\",\r\n    \"Pakistan\",\r\n    \"Bangladesh\",\r\n    \"Philippines\",\r\n    \"Malaysia\",\r\n    \"Singapore\",\r\n    \"Japan\",\r\n    \"South Korea\",\r\n  ],\r\n  Oceania: [\"Australia\", \"New Zealand\"],\r\n} as const;\r\n\r\nfunction normalizeCountry(value: string): string {\r\n  return value\r\n    .trim()\r\n    .toLowerCase()\r\n    .replace(/[^a-z0-9]+/g, \"\");\r\n}\r\n\r\nconst COUNTRY_ALIASES: Record<string, string> = {\r\n  // Common ISO-ish country codes (we store either codes or names depending on provider)\r\n  ke: \"kenya\",\r\n  tz: \"tanzania\",\r\n  ug: \"uganda\",\r\n  rw: \"rwanda\",\r\n  bi: \"burundi\",\r\n  cd: \"democraticrepublicofthecongo\",\r\n  za: \"southafrica\",\r\n  ng: \"nigeria\",\r\n  gh: \"ghana\",\r\n  et: \"ethiopia\",\r\n  so: \"somalia\",\r\n  sd: \"sudan\",\r\n  eg: \"egypt\",\r\n\r\n  uk: \"unitedkingdom\",\r\n  uae: \"unitedarabemirates\",\r\n  usa: \"unitedstates\",\r\n  us: \"unitedstates\",\r\n  drc: \"democraticrepublicofthecongo\",\r\n  \"drcongo\": \"democraticrepublicofthecongo\",\r\n  \"drcongo(drc)\": \"democraticrepublicofthecongo\",\r\n  \"democraticrepublicofcongo\": \"democraticrepublicofthecongo\",\r\n  \"congodrc\": \"democraticrepublicofthecongo\",\r\n  \"republicofkorea\": \"southkorea\",\r\n  \"korea\": \"southkorea\",\r\n  \"unitedrepublicoftanzania\": \"tanzania\",\r\n};\r\n\r\nconst SUPPORTED_COUNTRY_SET = (() => {\r\n  const all = Object.values(SUPPORTED_P2P_COUNTRIES).flat();\r\n  const normalized = new Set<string>(all.map((c) => normalizeCountry(c)));\r\n  // Add alias keys and values\r\n  for (const [k, v] of Object.entries(COUNTRY_ALIASES)) {\r\n    normalized.add(normalizeCountry(k));\r\n    normalized.add(normalizeCountry(v));\r\n  }\r\n  return normalized;\r\n})();\r\n\r\n/**\r\n * Returns true when the given country is allowed for P2P.\r\n *\r\n * Policy: if country is missing/null, we do NOT block (backwards compatible).\r\n */\r\nexport function isSupportedP2PCountry(country: string | null | undefined): boolean {\r\n  const raw = (country ?? \"\").trim();\r\n  if (!raw) return true;\r\n\r\n  const n = normalizeCountry(raw);\r\n  const mapped = COUNTRY_ALIASES[n] ? normalizeCountry(COUNTRY_ALIASES[n]!) : n;\r\n  return SUPPORTED_COUNTRY_SET.has(mapped) || SUPPORTED_COUNTRY_SET.has(n);\r\n}\r\n","function normalizeCountry(value: string): string {\r\n  return String(value ?? \"\")\r\n    .trim()\r\n    .toLowerCase()\r\n    .replace(/[^a-z0-9]+/g, \"\");\r\n}\r\n\r\n// Only includes countries shown in the Supported Countries list.\r\n// Uses ISO 3166-1 alpha-2 codes (lowercase for flag-icons).\r\nconst MAP: Record<string, string> = {\r\n  // Africa\r\n  kenya: \"ke\",\r\n  tanzania: \"tz\",\r\n  uganda: \"ug\",\r\n  rwanda: \"rw\",\r\n  burundi: \"bi\",\r\n  democraticrepublicofthecongo: \"cd\",\r\n  southafrica: \"za\",\r\n  nigeria: \"ng\",\r\n  ghana: \"gh\",\r\n  ethiopia: \"et\",\r\n  somalia: \"so\",\r\n  sudan: \"sd\",\r\n  egypt: \"eg\",\r\n\r\n  // Middle East\r\n  unitedarabemirates: \"ae\",\r\n  saudiarabia: \"sa\",\r\n  qatar: \"qa\",\r\n  kuwait: \"kw\",\r\n  oman: \"om\",\r\n  bahrain: \"bh\",\r\n  israel: \"il\",\r\n  jordan: \"jo\",\r\n\r\n  // Europe\r\n  unitedkingdom: \"gb\",\r\n  germany: \"de\",\r\n  france: \"fr\",\r\n  italy: \"it\",\r\n  netherlands: \"nl\",\r\n  sweden: \"se\",\r\n  norway: \"no\",\r\n  spain: \"es\",\r\n  switzerland: \"ch\",\r\n  ireland: \"ie\",\r\n  belgium: \"be\",\r\n  austria: \"at\",\r\n  denmark: \"dk\",\r\n\r\n  // North America\r\n  unitedstates: \"us\",\r\n  canada: \"ca\",\r\n\r\n  // Asia\r\n  india: \"in\",\r\n  china: \"cn\",\r\n  pakistan: \"pk\",\r\n  bangladesh: \"bd\",\r\n  philippines: \"ph\",\r\n  malaysia: \"my\",\r\n  singapore: \"sg\",\r\n  japan: \"jp\",\r\n  southkorea: \"kr\",\r\n\r\n  // Oceania\r\n  australia: \"au\",\r\n  newzealand: \"nz\",\r\n};\r\n\r\nexport function countryNameToIso2(countryName: string): string | null {\r\n  const n = normalizeCountry(countryName);\r\n  return MAP[n] ?? null;\r\n}\r\n"],"names":[],"mappings":"0DAEA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,QCJO,IAAM,EAA0B,CACrC,OAAQ,CACN,QACA,WACA,SACA,SACA,UACA,mCACA,eACA,UACA,QACA,WACA,UACA,QACA,QACD,CACD,cAAe,CACb,uBACA,eACA,QACA,SACA,OACA,UACA,SACA,SACD,CACD,OAAQ,CACN,iBACA,UACA,SACA,QACA,cACA,SACA,SACA,QACA,cACA,UACA,UACA,UACA,UACD,CACD,gBAAiB,CAAC,gBAAiB,SAAS,CAC5C,KAAM,CACJ,QACA,QACA,WACA,aACA,cACA,WACA,YACA,QACA,cACD,CACD,QAAS,CAAC,YAAa,cAAc,AACvC,EAEA,SAAS,EAAiB,CAAa,EACrC,OAAO,EACJ,IAAI,GACJ,WAAW,GACX,OAAO,CAAC,cAAe,GAC5B,CAEA,IAAM,EAA0C,CAE9C,GAAI,QACJ,GAAI,WACJ,GAAI,SACJ,GAAI,SACJ,GAAI,UACJ,GAAI,+BACJ,GAAI,cACJ,GAAI,UACJ,GAAI,QACJ,GAAI,WACJ,GAAI,UACJ,GAAI,QACJ,GAAI,QAEJ,GAAI,gBACJ,IAAK,qBACL,IAAK,eACL,GAAI,eACJ,IAAK,+BACL,QAAW,+BACX,eAAgB,+BAChB,0BAA6B,+BAC7B,SAAY,+BACZ,gBAAmB,aACnB,MAAS,aACT,yBAA4B,UAC9B,EAIQ,EAAa,IAAI,IAAY,AADvB,OAAO,MAAM,CAAC,GAAyB,IAAI,GAChB,GAAG,CAAC,AAAC,GAAM,EAAiB,KAEnE,IAAK,GAAM,CAAC,EAAG,EAAE,GAAI,OAAO,OAAO,CAAC,GAClC,EAAW,GAAG,CAAC,EAAiB,IAChC,EAAW,AAFyC,GAEtC,CAAC,EAAiB,IC1FpC,IAAM,EAA8B,CAElC,MAAO,KACP,SAAU,KACV,OAAQ,KACR,OAAQ,KACR,QAAS,KACT,6BAA8B,KAC9B,YAAa,KACb,QAAS,KACT,MAAO,KACP,SAAU,KACV,QAAS,KACT,MAAO,KACP,MAAO,KAGP,mBAAoB,KACpB,YAAa,KACb,MAAO,KACP,OAAQ,KACR,KAAM,KACN,QAAS,KACT,OAAQ,KACR,OAAQ,KAGR,cAAe,KACf,QAAS,KACT,OAAQ,KACR,MAAO,KACP,YAAa,KACb,OAAQ,KACR,OAAQ,KACR,MAAO,KACP,YAAa,KACb,QAAS,KACT,QAAS,KACT,QAAS,KACT,QAAS,KAGT,aAAc,KACd,OAAQ,KAGR,MAAO,KACP,MAAO,KACP,SAAU,KACV,WAAY,KACZ,YAAa,KACb,SAAU,KACV,UAAW,KACX,MAAO,KACP,WAAY,KAGZ,UAAW,KACX,WAAY,IACd,EAEO,SAAS,EAAkB,CAAmB,EAEnD,OAAO,CAAG,CAAC,AAvEJ,OAsEoB,AAtEb,GAAS,IACpB,IAAI,GACJ,WAAW,GACX,OAAO,CAAC,cAAe,IAoEb,EAAI,IACnB,CFlEA,IAAA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,QAKO,SAAS,EAAW,aACzB,EAAc,OAAO,SACrB,EAAU,MAAM,CAIjB,EACC,IAwHQ,EAKA,EAOA,EApIF,EAAS,CAAA,EAAA,EAAA,SAAA,AAAS,IAClB,EAAe,CAAA,EAAA,EAAA,eAAA,AAAe,IAC9B,EAAa,EAAa,GAAG,CAAC,SAAW,UACzC,CAAC,EAAM,EAAQ,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAW,GACrC,CAAC,EAAO,EAAS,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,IAC7B,CAAC,EAAU,EAAY,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,IACnC,CAAC,EAAU,EAAY,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,IACnC,CAAC,EAAY,EAAc,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,IACvC,CAAC,EAAW,EAAa,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,GAAC,GACrC,CAAC,EAAa,EAAe,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,IACzC,CAAC,EAAS,EAAW,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,MACjC,CAAC,EAAa,EAAe,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,GAAC,GACzC,CAAC,EAAY,EAAc,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,GAAC,GACvC,CAAC,EAAO,EAAS,CAAG,CAAA,EAAA,EAAA,QAAQ,AAAR,EAAwB,MAC5C,CAAC,EAAS,EAAW,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,GAAC,GACjC,CAAC,EAAc,EAAgB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAqD,MAE/F,EAAoB,CAAA,EAAA,EAAA,MAAA,AAAM,EAA4B,MAEtD,EAAoB,OAAO,OAAO,CAAC,GACnC,EAAiB,EAAkB,MAAM,CAAC,CAAC,EAAK,EAAG,EAAK,GAAK,EAAM,EAAK,MAAM,CAAE,GAEhF,EAAa,CAAC,KAClB,IAAM,EAAM,IAAI,IAChB,IAAK,GAAM,EAAG,EAAU,GAAI,EAC1B,IAAK,IAAM,KAAQ,EAAW,CADe,AAE3C,IAAM,EAAO,EAAkB,GAC3B,GAAM,EAAI,GAAG,CAAC,EAAK,WAAW,GAAI,EACxC,CAEF,OAAO,EACT,CAAC,GAEK,EAAoB,AAAC,IACzB,GAAI,CACF,aAAa,OAAO,CAAC,qBAAsB,EAC7C,CAAE,KAAM,CAER,CACF,EAEM,EAAe,MAAO,IAC1B,EAAE,cAAc,GAChB,EAAS,MACT,GAAW,GAEX,GAAI,CAEF,IAAM,EAAgC,OAAE,WAAO,CAAS,EAQxD,GAPa,SAAS,CAAlB,IACE,EAAS,IAAI,GAAG,MAAM,CAAG,IAAG,EAAK,SAAS,CAAG,EAAS,IAAI,EAAA,EAC1D,EAAW,IAAI,GAAG,MAAM,CAAG,IAAG,EAAK,WAAW,CAAG,EAAW,IAAI,EAAA,GAElE,AAAS,cAAY,EAAY,IAAI,IAAI,AAC3C,GAAK,WAAW,CAAG,EAAY,IAAI,EAAA,EAExB,WAAT,EAAmB,CACrB,GAAI,CAAC,EAAa,YAChB,EAAS,gDAGX,GAAI,CAAC,EAAY,YACf,EAAS,8CAGX,EAAK,OAAO,CAAG,EACf,EAAK,WAAW,EAAG,EACnB,EAAK,UAAU,EAAG,CACpB,CAEA,IAAM,EAAM,MAAM,MAAM,AAvBE,WAAT,EAAoB,mBAAqB,kBAuBxB,CAChC,OAAQ,OACR,YAAa,UACb,QAAS,CAAE,eAAgB,kBAAmB,EAC9C,KAAM,KAAK,SAAS,CAAC,EACvB,GAEM,EAAO,MAAM,EAAI,IAAI,GAE3B,GAAI,CAAC,EAAI,EAAE,CAAE,CACX,GAAa,UAAT,CAAoB,GAAgB,kBAAf,EAAK,KAAK,EAAwB,EAAK,aAAa,AAAb,EAAgB,CAC9E,GAAa,GACb,EAAS,mCACT,MACF,CACA,IAAM,EACW,gBAAf,EAAK,KAAK,CACN,4CACe,wBAAf,EAAK,KAAK,CACR,4BACe,sBAAf,EAAK,KAAK,CACR,6BACF,EAAK,KAAK,EAAE,WAAW,iBACrB,0CACF,EAAK,KAAK,EAAI,uBACtB,EAAS,GACT,MACF,CAQA,GALI,EAAK,IAAI,EAAE,IAAI,AACjB,aAAa,OAAO,CAAC,aAAc,EAAK,IAAI,CAAC,EAAE,EAIpC,WAAT,EAAmB,YACrB,EAAgB,CAAE,MAAO,EAAK,IAAI,EAAE,OAAS,EAAO,UAAW,EAAK,SAAS,EAAI,IAAK,GAIxF,EAAO,IAAI,CAAC,GACZ,EAAO,OAAO,EAChB,CAAE,KAAM,CACN,EAAS,wCACX,QAAU,CACR,GAAW,EACb,CACF,KAGe,CAAC,EAAa,GAAG,CAAC,SAAW,EAAA,CAAE,CAAE,IAAI,KAC3B,mBAAmB,GAG5C,IAHmD,AAG7C,EAEA,CALgD,AAK/C,EADK,OAAO,AADD,CAAC,EACW,IAAI,IAAI,GAAG,WAAW,KAClC,MAAM,CAAZ,EAEH,CAAC,MAAM,EAAE,EAAA,CAAG,CAFU,KAKzB,EAEA,AAAS,MAAM,IADN,OAAO,GADM,AACK,CADJ,GACQ,IAAI,GAAG,WAAW,IAAM,MACjC,wBACnB,EAAW,GAAG,CAAC,IAAS,EAGjC,MACE,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,kBAEZ,EACC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,mCACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,iMACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,MAAM,6BAA6B,UAAU,UAAU,KAAK,OAAO,QAAQ,YAAY,OAAO,eAAe,YAAa,aAC7H,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,cAAc,QAAQ,eAAe,QAAQ,EAAE,+PAGzD,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,uEAA8D,sBAC5E,CAAA,EAAA,EAAA,IAAA,EAAC,IAAA,CAAE,UAAU,+CAAqC,qCACT,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,+CAAuC,EAAa,KAAK,GAAQ,yDAGzH,EAAa,SAAS,EACrB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAI,CAAA,CACH,KAAM,EAAa,SAAS,CAC5B,UAAU,8QACX,8BAIH,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,uBACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,QAAQ,CAAA,CACP,QAAQ,UACR,SAAS,CAAA,CAAA,EACT,QAAS,KACP,EAAkB,YAClB,EAAO,IAAI,CAAC,GACZ,EAAO,OAAO,EAChB,WACD,wBAID,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,QAAQ,CAAA,CACP,QAAQ,YACR,SAAS,CAAA,CAAA,EACT,QAAS,KACP,EAAkB,YAClB,EAAO,IAAI,CAAC,GACZ,EAAO,OAAO,EAChB,WACD,2BAKH,CAAA,EAAA,EAAA,IAAA,EAAC,IAAA,CAAE,UAAU,+CAAqC,iCACjB,IAC/B,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAI,CAAA,CAAC,KAAK,cAAc,UAAU,6DAAoD,qBAEhF,UAKb,CAAA,EAAA,EAAA,IAAA,EAAA,EAAA,QAAA,CAAA,WACa,SAAZ,EACC,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,gBACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CACL,KAAM,CACJ,CAAE,GAAI,QAAS,MAAO,QAAS,EAC/B,CAAE,GAAI,SAAU,MAAO,SAAU,EAClC,CACD,SAAU,EACV,SAAW,AAAD,KACG,UAAP,GAAyB,WAAP,CAAO,GAAU,CACvC,EAAQ,GACR,EAAS,MACT,EAAa,IACb,EAAY,IACZ,EAAc,IAChB,MAGF,KAEJ,CAAA,EAAA,EAAA,IAAA,EAAC,OAAA,CAAK,SAAU,EAAc,UAAU,sBAC5B,WAAT,GACC,CAAA,EAAA,EAAA,IAAA,EAAA,EAAA,QAAA,CAAA,WACE,CAAA,EAAA,EAAA,IAAA,EAAC,QAAA,CAAM,UAAU,uBACf,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,4DAAmD,4BACnE,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,qBACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,+FACX,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,MAAM,KAAK,OAAO,KAAK,QAAQ,YAAY,KAAK,OAAO,OAAO,eAAe,YAAY,IAAI,cAAc,QAAQ,eAAe,kBACrI,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,EAAE,4CACR,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,GAAG,KAAK,GAAG,IAAI,EAAE,WAG/B,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAO,CAAA,CACN,MAAO,EACP,SAAU,AAAC,GAAM,EAAe,EAAE,MAAM,CAAC,KAAK,EAC9C,YAAY,UACZ,UAAU,gBAKhB,CAAA,EAAA,EAAA,IAAA,EAAC,QAAA,CAAM,UAAU,uBACf,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,4DAAmD,qBACnE,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,oHACb,CAAA,EAAA,EAAA,IAAA,EAAC,UAAA,CAAQ,IAAK,EAAmB,UAAU,kBACzC,CAAA,EAAA,EAAA,IAAA,EAAC,UAAA,CAAQ,UAAU,kNACjB,CAAA,EAAA,EAAA,IAAA,EAAC,OAAA,CAAK,UAAU,4CACb,EACC,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAW,EAAY,oEAAqE,aAAW,CAAA,CAAA,IAE7G,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,4FAA4F,aAAW,CAAA,CAAA,IAEzH,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,4EAAoE,OAGtF,CAAA,EAAA,EAAA,IAAA,EAAC,OAAA,CAAK,UAAU,4FACd,CAAA,EAAA,EAAA,IAAA,EAAC,OAAA,CAAK,UAAU,6BAAoB,EAAe,gBACnD,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,MAAM,KAAK,OAAO,KAAK,QAAQ,YAAY,KAAK,eAAe,aAAW,CAAA,CAAA,WAC7E,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CACC,SAAS,UACT,EAAE,4IACF,SAAS,oBAMjB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,8JACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,iFACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,oDACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,yFAAgF,mBAC/F,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,wDAA+C,2BAGlE,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,uCACb,CAAA,EAAA,EAAA,IAAA,EAAC,SAAA,CACC,KAAK,SACL,QAAS,KACP,EAAW,MACX,EAAkB,OAAO,EAAE,gBAAgB,OAC7C,EACA,UACE,qGACgD,CAAhD,MAAC,OAAO,GAAW,IAAI,IAAI,GAAG,WAAW,GACrC,iFACA,sDAAA,CAAsD,WAG5D,CAAA,EAAA,EAAA,IAAA,EAAC,OAAA,CAAK,UAAU,4CACd,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,4FAA4F,aAAW,CAAA,CAAA,IACvH,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,0CAAiC,6BAEnD,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,yFAAgF,UAGlG,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,2BACZ,EAAkB,GAAG,CAAC,CAAC,CAAC,EAAQ,EAAU,GACzC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAiB,UAAU,+EAC1B,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,iGACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,yFAAiF,IAChG,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,2IACb,EAAU,MAAM,MAGrB,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,qDACZ,EAAU,GAAG,CAAC,AAAC,IACd,IAAM,EAAO,EAAkB,GACzB,EAAO,EAAO,EAAK,WAAW,GAAK,KACnC,EAAS,IAAS,OAAO,GAAW,IAAI,IAAI,GAAG,WAAW,GAC1D,EAAS,CAAC,GAAQ,EAAA,CAAE,CAAE,WAAW,GAEvC,MACE,CAAA,EAAA,EAAA,IAAA,EAAC,SAAA,CAEC,KAAK,SACL,QAAS,KACP,EAAW,GACX,EAAkB,OAAO,EAAE,gBAAgB,OAC7C,EACA,UACE,iIACC,CAAD,CACI,iFACA,6EAAA,CAA6E,WAGnF,CAAA,EAAA,EAAA,IAAA,EAAC,OAAA,CAAK,UAAU,4CACb,EACC,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAW,CAAC,MAAM,EAAE,EAAO,mEAAmE,CAAC,CAAE,aAAW,CAAA,CAAA,IAElH,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,8FAA8F,aAAW,CAAA,CAAA,IAE3H,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,0CAAkC,OAEpD,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,yFAAiF,MArB5F,EAwBX,OAxCM,iBAiDtB,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,yDAAgD,sGAOtE,CAAA,EAAA,EAAA,IAAA,EAAC,QAAA,CAAM,UAAU,uBACf,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,4DAAmD,UACnE,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,qBACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,+FACX,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,MAAM,KAAK,OAAO,KAAK,QAAQ,YAAY,KAAK,OAAO,OAAO,eAAe,YAAY,IAAI,cAAc,QAAQ,eAAe,kBACrI,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,EAAE,gBAAgB,QAAQ,MAChC,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,EAAE,iBACR,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,EAAE,wCACR,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,EAAE,gDAGd,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAO,CAAA,CACN,KAAK,QACL,MAAO,EACP,SAAU,AAAC,GAAM,EAAS,EAAE,MAAM,CAAC,KAAK,EACxC,YAAY,kBACZ,QAAQ,CAAA,CAAA,EACR,aAAa,QACb,UAAU,gBAKhB,CAAA,EAAA,EAAA,IAAA,EAAC,QAAA,CAAM,UAAU,uBACf,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,4DAAmD,aACnE,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,qBACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,+FACX,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,MAAM,KAAK,OAAO,KAAK,QAAQ,YAAY,KAAK,OAAO,OAAO,eAAe,YAAY,IAAI,cAAc,QAAQ,eAAe,kBACrI,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,EAAE,IAAI,EAAE,KAAK,MAAM,KAAK,OAAO,KAAK,GAAG,MAC7C,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,EAAE,gCAGd,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAO,CAAA,CACN,KAAK,WACL,MAAO,EACP,SAAU,AAAC,GAAM,EAAY,EAAE,MAAM,CAAC,KAAK,EAC3C,YAAsB,WAAT,EAAoB,mBAAqB,gBACtD,QAAQ,CAAA,CAAA,EACR,UAAoB,AAAT,aAAoB,EAAI,EACnC,aAAuB,WAAT,EAAoB,eAAiB,mBACnD,UAAU,gBAKN,UAAT,EACC,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,4BACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAI,CAAA,CACH,KAAK,mBACL,UAAU,kGACX,uBAID,KAEM,UAAT,GAAoB,GACnB,CAAA,EAAA,EAAA,IAAA,EAAA,EAAA,QAAA,CAAA,WACE,CAAA,EAAA,EAAA,IAAA,EAAC,QAAA,CAAM,UAAU,uBACf,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,4DAAmD,aACnE,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAO,CAAA,CACN,MAAO,EACP,SAAU,AAAC,GAAM,EAAY,EAAE,MAAM,CAAC,KAAK,CAAC,OAAO,CAAC,MAAO,IAAI,KAAK,CAAC,EAAG,IACxE,UAAU,UACV,YAAY,SACZ,UAAW,EACX,aAAa,gBACb,UAAU,kCAId,CAAA,EAAA,EAAA,IAAA,EAAC,QAAA,CAAM,UAAU,uBACf,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,4DAAmD,2BACnE,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAO,CAAA,CACN,MAAO,EACP,SAAU,AAAC,GAAM,EAAc,EAAE,MAAM,CAAC,KAAK,CAAC,WAAW,IACzD,YAAY,YACZ,aAAa,MACb,UAAU,sCAMjB,GACC,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CACC,UAAU,iJAEV,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,mCACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,qKAAqK,aAAW,CAAA,CAAA,WAC7L,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,MAAM,KAAK,OAAO,KAAK,QAAQ,YAAY,KAAK,OAAO,OAAO,eAAe,YAAY,IAAI,cAAc,QAAQ,eAAe,kBACrI,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,EAAE,wFACR,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,EAAE,YACR,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,EAAE,oBAGZ,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,oBACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,yFAAgF,UAC/F,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,mEAA2D,YAMxE,WAAT,GACC,CAAA,EAAA,EAAA,IAAA,EAAC,QAAA,CAAM,UAAU,gLACf,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CACC,KAAK,WACL,QAAS,EACT,SAAU,AAAC,GAAM,EAAe,EAAE,MAAM,CAAC,OAAO,EAChD,UAAU,6CAEZ,CAAA,EAAA,EAAA,IAAA,EAAC,OAAA,WAAK,iBACW,IACf,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAI,CAAA,CAAC,KAAK,SAAS,UAAU,iEAAwD,UAGrF,IAAI,MAAI,IACT,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAI,CAAA,CAAC,KAAK,WAAW,UAAU,iEAAwD,mBAEjF,UAMH,WAAT,GACC,CAAA,EAAA,EAAA,IAAA,EAAC,QAAA,CAAM,UAAU,gLACf,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CACC,KAAK,WACL,QAAS,EACT,SAAW,AAAD,GAAO,EAAc,EAAE,MAAM,CAAC,OAAO,EAC/C,UAAU,6CAEZ,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,UAAK,0EAMV,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,QAAQ,CAAA,CAAC,KAAK,SAAS,QAAQ,UAAU,SAAS,CAAA,CAAA,EAAC,SAAU,WAC3D,EAAU,eAA0B,WAAT,EAAoB,iBAAmB,cAI7D,UAAT,GACC,CAAA,EAAA,EAAA,IAAA,EAAC,IAAA,CAAE,UAAU,gEAAsD,wBAC3C,IACtB,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,sCAAsC,MAAM,uDAA8C,2BASpH"}