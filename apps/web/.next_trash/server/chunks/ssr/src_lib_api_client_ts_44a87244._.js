module.exports=[392415,a=>{"use strict";class b extends Error{code;details;status;requestId;constructor(a,b){super(b?.requestId?`${a} (req ${b.requestId})`:a),this.name="ApiError",this.code=a,this.details=b?.details,this.status=b?.status,this.requestId=b?.requestId}}function c(a){return new Promise(b=>setTimeout(b,Math.max(0,Math.floor(a))))}async function d(a,d){let e=d?{...d,credentials:d.credentials??"same-origin"}:{credentials:"same-origin"},f=(e?.method??"GET").toUpperCase();if(["POST","PUT","PATCH","DELETE"].includes(f)){let a=function(){if("u"<typeof document)return null;let a=document.cookie.match(/(?:^|;\s*)__csrf=([^;]+)/);return a?.[1]??null}();if(a){let b=new Headers(e?.headers);b.has("x-csrf-token")||b.set("x-csrf-token",a),e.headers=b}}let g=(e?.method??"GET").toUpperCase(),h="GET"===g||"HEAD"===g,i=2*!!h,j=null;for(let d=0;d<=i;d+=1)try{let f=await fetch(a,e),g=f.headers.get("x-request-id")??void 0,j=await f.text().catch(()=>""),k=(f.headers.get("content-type")??"").includes("text/html")||function(a){let b=String(a??"").trimStart();return b.startsWith("<!DOCTYPE html")||b.startsWith("<html")||b.startsWith("<!doctype html")}(j),l=k?{_raw:"<html/>"}:function(a){try{return a?JSON.parse(a):null}catch{return{_raw:a}}}(j);if(!f.ok){if(h&&(502===f.status||503===f.status||504===f.status)&&d<i){await c(250*Math.pow(2,d));continue}if(l&&"object"==typeof l&&"error"in l){let a="string"==typeof l.error?l.error:`http_${f.status}`,c=void 0!==l.details?l.details:"string"==typeof l.message?l.message:k?{message:`Upstream error (HTTP ${f.status}). Please retry.`}:void 0;throw new b(a,{details:c,status:f.status,requestId:g})}if(l&&"object"==typeof l&&"message"in l){let a="string"==typeof l.message?l.message:l;throw new b(`http_${f.status}`,{details:a,status:f.status,requestId:g})}let a=k?{message:`Upstream error (HTTP ${f.status}). Please retry.`}:l;throw new b(`http_${f.status}`,{details:a,status:f.status,requestId:g})}return l}catch(a){if(j=a,h&&d<i){await c(250*Math.pow(2,d));continue}throw a}throw j}a.s(["ApiError",()=>b,"fetchJsonOrThrow",()=>d])}];

//# sourceMappingURL=src_lib_api_client_ts_44a87244._.js.map