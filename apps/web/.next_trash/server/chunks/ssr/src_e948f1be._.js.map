{"version":3,"sources":["../../../../src/components/v2/Button.tsx","../../../../src/components/v2/Card.tsx","../../../../src/components/v2/Skeleton.tsx","../../../../src/app/v2/p2p/orders/P2POrdersClient.tsx"],"sourcesContent":["import * as React from \"react\";\r\n\r\nexport type V2ButtonVariant = \"primary\" | \"secondary\" | \"ghost\" | \"danger\";\r\nexport type V2ButtonSize = \"sm\" | \"md\" | \"lg\";\r\n\r\nexport function v2ButtonClassName(options?: {\r\n  variant?: V2ButtonVariant;\r\n  size?: V2ButtonSize;\r\n  fullWidth?: boolean;\r\n  className?: string;\r\n}): string {\r\n  const variant: V2ButtonVariant = options?.variant ?? \"secondary\";\r\n  const size: V2ButtonSize = options?.size ?? \"md\";\r\n\r\n  const base =\r\n    \"inline-flex select-none items-center justify-center gap-2 whitespace-nowrap rounded-xl transition focus:outline-none focus:ring-2 focus:ring-[var(--v2-ring)] disabled:pointer-events-none disabled:opacity-55\";\r\n\r\n  const sizeClass =\r\n    size === \"lg\" ? \"h-12 px-5 text-[15px]\" : size === \"sm\" ? \"h-9 px-3 text-[13px]\" : \"h-11 px-4 text-[14px]\";\r\n\r\n  const variantClass =\r\n    variant === \"primary\"\r\n      ? \"bg-[var(--v2-accent)] text-white font-semibold shadow-[var(--v2-shadow-sm)] hover:brightness-105\"\r\n      : variant === \"danger\"\r\n        ? \"bg-[var(--down)] text-white font-semibold shadow-[var(--v2-shadow-sm)] hover:brightness-105\"\r\n        : variant === \"ghost\"\r\n          ? \"bg-transparent text-[var(--v2-text)] font-semibold hover:bg-[var(--v2-surface-2)]\"\r\n          : \"border border-[var(--v2-border)] bg-[var(--v2-surface)] text-[var(--v2-text)] font-semibold shadow-[var(--v2-shadow-sm)] hover:bg-[var(--v2-surface-2)]\";\r\n\r\n  const widthClass = options?.fullWidth ? \"w-full\" : \"\";\r\n  const extra = options?.className ?? \"\";\r\n\r\n  return [base, sizeClass, variantClass, widthClass, extra].filter(Boolean).join(\" \");\r\n}\r\n\r\nexport type V2ButtonProps = Omit<React.ButtonHTMLAttributes<HTMLButtonElement>, \"className\"> & {\r\n  variant?: V2ButtonVariant;\r\n  size?: V2ButtonSize;\r\n  fullWidth?: boolean;\r\n  className?: string;\r\n};\r\n\r\nexport const V2Button = React.forwardRef<HTMLButtonElement, V2ButtonProps>(function V2Button(\r\n  { variant, size, fullWidth, className, type, ...props },\r\n  ref,\r\n) {\r\n  return (\r\n    <button\r\n      ref={ref}\r\n      type={type ?? \"button\"}\r\n      className={v2ButtonClassName({ variant, size, fullWidth, className })}\r\n      {...props}\r\n    />\r\n  );\r\n});\r\n","import type { ReactNode } from \"react\";\r\n\r\nexport function V2Card({\r\n  children,\r\n  className = \"\",\r\n}: {\r\n  children: ReactNode;\r\n  className?: string;\r\n}) {\r\n  return (\r\n    <section\r\n      className={\r\n        \"rounded-[var(--v2-radius-lg)] border border-[var(--v2-border)] bg-[var(--v2-surface)] shadow-[var(--v2-shadow-sm)] \" +\r\n        className\r\n      }\r\n    >\r\n      {children}\r\n    </section>\r\n  );\r\n}\r\n\r\nexport function V2CardHeader({\r\n  title,\r\n  subtitle,\r\n  right,\r\n}: {\r\n  title: ReactNode;\r\n  subtitle?: ReactNode;\r\n  right?: ReactNode;\r\n}) {\r\n  return (\r\n    <header className=\"flex items-start justify-between gap-3 px-4 pt-4\">\r\n      <div className=\"min-w-0\">\r\n        <div className=\"text-[15px] font-semibold text-[var(--v2-text)]\">{title}</div>\r\n        {subtitle ? <div className=\"mt-0.5 text-[13px] text-[var(--v2-muted)]\">{subtitle}</div> : null}\r\n      </div>\r\n      {right ? <div className=\"shrink-0\">{right}</div> : null}\r\n    </header>\r\n  );\r\n}\r\n\r\nexport function V2CardBody({ children }: { children: ReactNode }) {\r\n  return <div className=\"px-4 pb-4 pt-3\">{children}</div>;\r\n}\r\n","export function V2Skeleton({ className = \"\" }: { className?: string }) {\r\n  return (\r\n    <div\r\n      className={\r\n        \"animate-pulse rounded-xl border border-[var(--v2-border)] bg-[var(--v2-surface-2)] \" + className\r\n      }\r\n      aria-hidden=\"true\"\r\n    />\r\n  );\r\n}\r\n","\"use client\";\r\n\r\nimport Link from \"next/link\";\r\nimport { useEffect, useMemo, useRef, useState } from \"react\";\r\n\r\nimport { V2Button } from \"@/components/v2/Button\";\r\nimport { V2Card, V2CardBody, V2CardHeader } from \"@/components/v2/Card\";\r\nimport { V2Skeleton } from \"@/components/v2/Skeleton\";\r\n\r\ntype OrderSummary = {\r\n  id: string;\r\n  status: string;\r\n  amount_fiat: string;\r\n  fiat_currency: string;\r\n  amount_asset: string;\r\n  asset_symbol: string;\r\n  price: string;\r\n  created_at: string;\r\n  my_side: \"BUY\" | \"SELL\";\r\n  payment_details_ready?: boolean;\r\n};\r\n\r\ntype OrdersResponse = { orders?: OrderSummary[] };\r\n\r\nfunction fmtTime(ts: string | null | undefined): string {\r\n  if (!ts) return \"\";\r\n  try {\r\n    return new Date(ts).toLocaleString();\r\n  } catch {\r\n    return String(ts);\r\n  }\r\n}\r\n\r\nfunction fmtNum(v: string | null | undefined): string {\r\n  const n = Number(String(v ?? \"\"));\r\n  if (!Number.isFinite(n)) return \"—\";\r\n  if (n === 0) return \"0\";\r\n  const abs = Math.abs(n);\r\n  const decimals = abs >= 1000 ? 2 : abs >= 1 ? 4 : abs >= 0.01 ? 6 : 8;\r\n  return n.toLocaleString(undefined, { maximumFractionDigits: decimals });\r\n}\r\n\r\nexport function P2POrdersClient() {\r\n  const [orders, setOrders] = useState<OrderSummary[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState<string | null>(null);\r\n\r\n  const hasLoadedRef = useRef(false);\r\n  const esRef = useRef<EventSource | null>(null);\r\n  const lastRefreshAtRef = useRef<number>(0);\r\n  const hasActiveRef = useRef(false);\r\n\r\n  const loadSeqRef = useRef(0);\r\n  const abortRef = useRef<AbortController | null>(null);\r\n\r\n  const load = async () => {\r\n    const seq = ++loadSeqRef.current;\r\n    abortRef.current?.abort();\r\n    const controller = new AbortController();\r\n    abortRef.current = controller;\r\n\r\n    setError(null);\r\n    if (!hasLoadedRef.current) setLoading(true);\r\n\r\n    try {\r\n      const res = await fetch(\"/api/p2p/orders\", { cache: \"no-store\", credentials: \"include\", signal: controller.signal });\r\n      const json = (await res.json().catch(() => null)) as OrdersResponse | null;\r\n      if (!res.ok) {\r\n        const code = typeof (json as any)?.error === \"string\" ? (json as any).error : `http_${res.status}`;\r\n        throw new Error(code);\r\n      }\r\n      if (seq !== loadSeqRef.current) return;\r\n      setOrders(Array.isArray(json?.orders) ? json!.orders : []);\r\n      hasLoadedRef.current = true;\r\n    } catch (e) {\r\n      if (e instanceof DOMException && e.name === \"AbortError\") return;\r\n      if (seq !== loadSeqRef.current) return;\r\n      if (!hasLoadedRef.current) setError(e instanceof Error ? e.message : String(e));\r\n    } finally {\r\n      if (seq === loadSeqRef.current) setLoading(false);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    hasActiveRef.current = orders.some((o) => {\r\n      const s = String(o.status || \"\").toLowerCase();\r\n      return s === \"created\" || s === \"paid_confirmed\" || s === \"disputed\";\r\n    });\r\n  }, [orders]);\r\n\r\n  useEffect(() => {\r\n    void load();\r\n    let timeoutId: number | null = null;\r\n\r\n    const stopTimer = () => {\r\n      if (!timeoutId) return;\r\n      window.clearTimeout(timeoutId);\r\n      timeoutId = null;\r\n    };\r\n\r\n    const schedule = () => {\r\n      stopTimer();\r\n      const delayMs = esRef.current\r\n        ? (hasActiveRef.current ? 25_000 : 45_000)\r\n        : 15_000;\r\n      timeoutId = window.setTimeout(() => {\r\n        timeoutId = null;\r\n        if (document.visibilityState === \"visible\") void load();\r\n        schedule();\r\n      }, delayMs);\r\n    };\r\n\r\n    const onVis = () => {\r\n      if (document.visibilityState === \"visible\") {\r\n        void load();\r\n        schedule();\r\n      } else {\r\n        stopTimer();\r\n      }\r\n    };\r\n    document.addEventListener(\"visibilitychange\", onVis);\r\n    schedule();\r\n    return () => {\r\n      document.removeEventListener(\"visibilitychange\", onVis);\r\n      stopTimer();\r\n      abortRef.current?.abort();\r\n    };\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []);\r\n\r\n  // Realtime: refresh P2P orders list on any p2p_* notification.\r\n  useEffect(() => {\r\n    const stop = () => {\r\n      try {\r\n        esRef.current?.close();\r\n      } catch {\r\n        // ignore\r\n      }\r\n      esRef.current = null;\r\n    };\r\n\r\n    const refreshSoon = () => {\r\n      const now = Date.now();\r\n      if (now - lastRefreshAtRef.current < 900) return;\r\n      lastRefreshAtRef.current = now;\r\n      if (document.visibilityState !== \"visible\") return;\r\n      void load();\r\n    };\r\n\r\n    const shouldRefreshForType = (t: string) => {\r\n      const type = String(t || \"\");\r\n      return type.startsWith(\"p2p_\");\r\n    };\r\n\r\n    const start = () => {\r\n      if (document.visibilityState !== \"visible\") return;\r\n      if (typeof EventSource === \"undefined\") return;\r\n      if (esRef.current) return;\r\n      try {\r\n        const es = new EventSource(\"/api/notifications/stream\", { withCredentials: true } as any);\r\n        es.addEventListener(\"notification\", (evt) => {\r\n          try {\r\n            const data = JSON.parse(String((evt as MessageEvent).data ?? \"{}\"));\r\n            if (shouldRefreshForType(String(data?.type ?? \"\"))) refreshSoon();\r\n          } catch {\r\n            // ignore\r\n          }\r\n        });\r\n        es.addEventListener(\"ready\", () => refreshSoon());\r\n        es.onerror = () => {\r\n          // allow browser to retry automatically\r\n        };\r\n        esRef.current = es;\r\n      } catch {\r\n        stop();\r\n      }\r\n    };\r\n\r\n    const onVis = () => {\r\n      if (document.visibilityState === \"visible\") start();\r\n      else stop();\r\n    };\r\n\r\n    document.addEventListener(\"visibilitychange\", onVis);\r\n    start();\r\n    return () => {\r\n      document.removeEventListener(\"visibilitychange\", onVis);\r\n      stop();\r\n    };\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []);\r\n\r\n  const { active, history, missingDetailsCount } = useMemo(() => {\r\n    const active = orders.filter((o) => [\"created\", \"paid_confirmed\", \"disputed\"].includes(String(o.status)));\r\n    const history = orders.filter((o) => ![\"created\", \"paid_confirmed\", \"disputed\"].includes(String(o.status)));\r\n    const missingDetailsCount = active.filter((o) => o.payment_details_ready === false).length;\r\n    return { active, history, missingDetailsCount };\r\n  }, [orders]);\r\n\r\n  const statusChip = (status: string) => {\r\n    const s = String(status || \"\").toLowerCase();\r\n    const tone =\r\n      s === \"created\" ? \"text-[var(--v2-accent)]\" :\r\n      s === \"paid_confirmed\" ? \"text-[var(--warn)]\" :\r\n      s === \"completed\" ? \"text-[var(--up)]\" :\r\n      s === \"disputed\" ? \"text-[var(--down)]\" :\r\n      \"text-[var(--v2-muted)]\";\r\n    return (\r\n      <span className={`rounded-full border border-[var(--v2-border)] bg-[var(--v2-surface-2)] px-2 py-0.5 text-[11px] font-semibold ${tone}`}>\r\n        {s.replaceAll(\"_\", \" \") || \"—\"}\r\n      </span>\r\n    );\r\n  };\r\n\r\n  const list = (rows: OrderSummary[]) => (\r\n    <div className=\"grid gap-2\">\r\n      {rows.map((o) => {\r\n        const sideTone = o.my_side === \"BUY\" ? \"text-[var(--up)]\" : \"text-[var(--down)]\";\r\n        return (\r\n          <Link\r\n            key={o.id}\r\n            href={`/v2/p2p/orders/${encodeURIComponent(o.id)}`}\r\n            className=\"rounded-2xl border border-[var(--v2-border)] bg-[var(--v2-surface)] px-3 py-3 shadow-[var(--v2-shadow-sm)]\"\r\n          >\r\n            <div className=\"flex items-start justify-between gap-3\">\r\n              <div className=\"min-w-0\">\r\n                <div className=\"flex flex-wrap items-center gap-2\">\r\n                  <div className={`text-[12px] font-bold ${sideTone}`}>{o.my_side}</div>\r\n                  <div className=\"text-[15px] font-semibold text-[var(--v2-text)]\">{fmtNum(o.amount_asset)} {String(o.asset_symbol || \"—\")}</div>\r\n                  {statusChip(o.status)}\r\n                </div>\r\n                <div className=\"mt-1 text-[12px] text-[var(--v2-muted)]\">≈ {fmtNum(o.amount_fiat)} {String(o.fiat_currency || \"\")}</div>\r\n                <div className=\"mt-1 text-[12px] text-[var(--v2-muted)]\">{fmtTime(o.created_at)}</div>\r\n              </div>\r\n\r\n              {o.payment_details_ready === false ? (\r\n                <span className=\"shrink-0 rounded-full border border-[var(--v2-border)] bg-[color-mix(in_srgb,var(--warn)_10%,transparent)] px-2 py-0.5 text-[11px] font-semibold text-[var(--warn)]\">\r\n                  Payment details missing\r\n                </span>\r\n              ) : null}\r\n            </div>\r\n          </Link>\r\n        );\r\n      })}\r\n    </div>\r\n  );\r\n\r\n  return (\r\n    <main className=\"space-y-4\">\r\n      <header className=\"space-y-2\">\r\n        <div className=\"flex items-center justify-between gap-2\">\r\n          <div>\r\n            <div className=\"text-[11px] font-bold uppercase tracking-widest text-[var(--v2-muted)]\">P2P</div>\r\n            <h1 className=\"text-2xl font-extrabold tracking-tight\">My orders</h1>\r\n          </div>\r\n          <Link\r\n            href=\"/v2/p2p\"\r\n            className=\"rounded-xl border border-[var(--v2-border)] bg-[var(--v2-surface)] px-3 py-2 text-[12px] font-semibold text-[var(--v2-text)]\"\r\n          >\r\n            Marketplace\r\n          </Link>\r\n        </div>\r\n        <p className=\"text-sm text-[var(--v2-muted)]\">Active orders first, then history.</p>\r\n      </header>\r\n\r\n      {missingDetailsCount > 0 ? (\r\n        <div className=\"rounded-2xl border border-[var(--v2-border)] bg-[color-mix(in_srgb,var(--warn)_10%,transparent)] px-3 py-3 text-[12px] text-[var(--v2-text)]\">\r\n          <span className=\"font-semibold\">Action needed:</span> {missingDetailsCount} active {missingDetailsCount === 1 ? \"order is\" : \"orders are\"} missing seller payment details.\r\n        </div>\r\n      ) : null}\r\n\r\n      {error && orders.length === 0 ? (\r\n        <V2Card>\r\n          <V2CardHeader title=\"Orders unavailable\" subtitle=\"Sign in and try again.\" />\r\n          <V2CardBody>\r\n            <div className=\"text-sm text-[var(--v2-muted)]\">{String(error)}</div>\r\n            <div className=\"mt-3\">\r\n              <V2Button variant=\"primary\" fullWidth onClick={() => void load()}>\r\n                Retry\r\n              </V2Button>\r\n            </div>\r\n          </V2CardBody>\r\n        </V2Card>\r\n      ) : loading && orders.length === 0 ? (\r\n        <div className=\"grid gap-2\">\r\n          <V2Skeleton className=\"h-20\" />\r\n          <V2Skeleton className=\"h-20\" />\r\n          <V2Skeleton className=\"h-20\" />\r\n        </div>\r\n      ) : orders.length === 0 ? (\r\n        <V2Card>\r\n          <V2CardHeader title=\"No P2P orders\" subtitle=\"Your P2P activity will appear here.\" />\r\n          <V2CardBody>\r\n            <div className=\"text-sm text-[var(--v2-muted)]\">Start from the marketplace to create an order.</div>\r\n          </V2CardBody>\r\n        </V2Card>\r\n      ) : (\r\n        <div className=\"space-y-4\">\r\n          <section className=\"space-y-2\">\r\n            <div className=\"flex items-center justify-between\">\r\n              <div className=\"text-[13px] font-semibold text-[var(--v2-text)]\">Active</div>\r\n              <div className=\"text-[12px] text-[var(--v2-muted)]\">{active.length}</div>\r\n            </div>\r\n            {active.length === 0 ? (\r\n              <V2Card>\r\n                <V2CardHeader title=\"No active orders\" subtitle=\"You’re all caught up.\" />\r\n                <V2CardBody>\r\n                  <div className=\"text-sm text-[var(--v2-muted)]\">Completed/canceled orders are in history.</div>\r\n                </V2CardBody>\r\n              </V2Card>\r\n            ) : list(active)}\r\n          </section>\r\n\r\n          <section className=\"space-y-2\">\r\n            <div className=\"flex items-center justify-between\">\r\n              <div className=\"text-[13px] font-semibold text-[var(--v2-text)]\">History</div>\r\n              <div className=\"text-[12px] text-[var(--v2-muted)]\">{history.length}</div>\r\n            </div>\r\n            {history.length === 0 ? (\r\n              <V2Card>\r\n                <V2CardHeader title=\"No history\" subtitle=\"No completed P2P orders yet.\" />\r\n                <V2CardBody>\r\n                  <div className=\"text-sm text-[var(--v2-muted)]\">Once you finish a trade, it’ll appear here.</div>\r\n                </V2CardBody>\r\n              </V2Card>\r\n            ) : list(history.slice(0, 30))}\r\n          </section>\r\n        </div>\r\n      )}\r\n    </main>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}