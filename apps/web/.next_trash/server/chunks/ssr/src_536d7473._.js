module.exports=[392415,a=>{"use strict";class b extends Error{code;details;status;requestId;constructor(a,b){super(b?.requestId?`${a} (req ${b.requestId})`:a),this.name="ApiError",this.code=a,this.details=b?.details,this.status=b?.status,this.requestId=b?.requestId}}function c(a){return new Promise(b=>setTimeout(b,Math.max(0,Math.floor(a))))}async function d(a,d){let e=d?{...d,credentials:d.credentials??"same-origin"}:{credentials:"same-origin"},f=(e?.method??"GET").toUpperCase();if(["POST","PUT","PATCH","DELETE"].includes(f)){let a=function(){if("u"<typeof document)return null;let a=document.cookie.match(/(?:^|;\s*)__csrf=([^;]+)/);return a?.[1]??null}();if(a){let b=new Headers(e?.headers);b.has("x-csrf-token")||b.set("x-csrf-token",a),e.headers=b}}let g=(e?.method??"GET").toUpperCase(),h="GET"===g||"HEAD"===g,i=2*!!h,j=null;for(let d=0;d<=i;d+=1)try{let f=await fetch(a,e),g=f.headers.get("x-request-id")??void 0,j=await f.text().catch(()=>""),k=(f.headers.get("content-type")??"").includes("text/html")||function(a){let b=String(a??"").trimStart();return b.startsWith("<!DOCTYPE html")||b.startsWith("<html")||b.startsWith("<!doctype html")}(j),l=k?{_raw:"<html/>"}:function(a){try{return a?JSON.parse(a):null}catch{return{_raw:a}}}(j);if(!f.ok){if(h&&(502===f.status||503===f.status||504===f.status)&&d<i){await c(250*Math.pow(2,d));continue}if(l&&"object"==typeof l&&"error"in l){let a="string"==typeof l.error?l.error:`http_${f.status}`,c=void 0!==l.details?l.details:"string"==typeof l.message?l.message:k?{message:`Upstream error (HTTP ${f.status}). Please retry.`}:void 0;throw new b(a,{details:c,status:f.status,requestId:g})}if(l&&"object"==typeof l&&"message"in l){let a="string"==typeof l.message?l.message:l;throw new b(`http_${f.status}`,{details:a,status:f.status,requestId:g})}let a=k?{message:`Upstream error (HTTP ${f.status}). Please retry.`}:l;throw new b(`http_${f.status}`,{details:a,status:f.status,requestId:g})}return l}catch(a){if(j=a,h&&d<i){await c(250*Math.pow(2,d));continue}throw a}throw j}a.s(["ApiError",()=>b,"fetchJsonOrThrow",()=>d])},185336,a=>{"use strict";var b=a.i(187924),c=a.i(572131),d=a.i(392415);function e(a){if(!Number.isFinite(a)||a<=0)return"0s";if(a<1)return`${Math.round(1e3*a)}ms`;if(a<60)return`${Math.round(10*a)/10}s`;let b=Math.floor(a/60),c=Math.round(a-60*b);if(b<60)return`${b}m ${c}s`;let d=Math.floor(b/60);return`${d}h ${b-60*d}m`}function f(){let[a,f]=(0,c.useState)(!0),[g,h]=(0,c.useState)(null),[i,j]=(0,c.useState)(null);function k(a){let b=i?.[a]?.distribution_all_time??[],c=b.reduce((a,b)=>a+(Number.isFinite(b.count)?b.count:0),0);return{rows:b,total:c}}(0,c.useEffect)(()=>{let a=!1;return(async()=>{f(!0),h(null);try{let b=await (0,d.fetchJsonOrThrow)("/api/arcade/transparency",{cache:"no-store"});a||j(b)}catch(b){if(a)return;b instanceof d.ApiError?h(b.code):h("Network error")}finally{a||f(!1)}})(),()=>{a=!0}},[]);let l=(0,c.useMemo)(()=>k("daily_drop"),[i]),m=(0,c.useMemo)(()=>k("calendar_daily"),[i]),n=(0,c.useMemo)(()=>k("time_vault"),[i]),o=(0,c.useMemo)(()=>k("boost_draft"),[i]),p=(0,c.useMemo)(()=>k("ai_oracle"),[i]),q=(0,c.useMemo)(()=>{let a=i?.boost_consumption_7d??[],b=new Map;for(let c of a)b.set(c.code,(b.get(c.code)??0)+(Number(c.count)||0));let c=Array.from(b.entries()).map(([a,b])=>({code:a,count:b}));return c.sort((a,b)=>b.count-a.count),c.slice(0,10)},[i]),r=(0,c.useMemo)(()=>{let a=(i?.latency_7d??[]).map(a=>({module:a.module,n:Number(a.n)||0,p50_s:Number(a.p50_s)||0,p95_s:Number(a.p95_s)||0,avg_s:Number(a.avg_s)||0})).filter(a=>a.n>0);return a.sort((a,b)=>b.p95_s-a.p95_s),a},[i]),s=(0,c.useMemo)(()=>{let a=(i?.overdue??[]).map(a=>({module:a.module,count:Number(a.count)||0})).filter(a=>a.count>0);return a.sort((a,b)=>b.count-a.count),a},[i]);return a?(0,b.jsx)("div",{className:"h-40 w-full animate-pulse rounded-3xl border border-[var(--border)] bg-[color-mix(in_srgb,var(--card)_55%,transparent)]"}):g?(0,b.jsxs)("div",{className:"rounded-2xl border border-[var(--border)] bg-[var(--warn-bg)] px-6 py-5 text-sm text-[var(--foreground)]",children:["Error: ",(0,b.jsx)("span",{className:"font-semibold",children:g})]}):i?(0,b.jsxs)("div",{className:"grid gap-6",children:[(0,b.jsx)("section",{className:"grid gap-4 md:grid-cols-4",children:[{k:"Actions",v:i.counts.actions_total,sub:"Total commits"},{k:"Resolved",v:i.counts.actions_resolved,sub:"Reveals completed"},{k:"Inventory",v:i.counts.inventory_quantity,sub:"Total items"},{k:"Stacks",v:i.counts.inventory_rows,sub:"Unique items"}].map(a=>(0,b.jsxs)("div",{className:"rounded-2xl border border-[var(--border)] bg-[var(--card)] p-4 shadow-[var(--shadow)]",children:[(0,b.jsx)("div",{className:"text-[11px] font-bold uppercase tracking-widest text-[var(--muted)]",children:a.k}),(0,b.jsx)("div",{className:"mt-2 text-2xl font-extrabold tracking-tight text-[var(--foreground)]",children:a.v}),(0,b.jsx)("div",{className:"mt-1 text-xs text-[var(--muted)]",children:a.sub})]},a.k))}),[{key:"daily_drop",title:"Daily drop distribution",dist:l},{key:"calendar_daily",title:"Calendar distribution",dist:m},{key:"time_vault",title:"Time vault distribution",dist:n},{key:"boost_draft",title:"Boost draft distribution",dist:o},{key:"ai_oracle",title:"AI Oracle tier distribution",dist:p}].map(a=>(0,b.jsxs)("section",{className:"rounded-2xl border border-[var(--border)] bg-[var(--card)] p-5 shadow-[var(--shadow)]",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsxs)("span",{className:"relative inline-flex h-2.5 w-2.5 shrink-0 items-center justify-center",children:[(0,b.jsx)("span",{className:"absolute inline-flex h-2.5 w-2.5 rounded-full bg-[var(--accent)]"}),(0,b.jsx)("span",{className:"absolute inline-flex h-4.5 w-4.5 rounded-full bg-[var(--ring)]"})]}),(0,b.jsx)("div",{className:"text-[11px] font-bold uppercase tracking-widest text-[var(--muted)]",children:a.title}),(0,b.jsx)("div",{className:"h-px flex-1 bg-[var(--border)]"})]}),0===a.dist.total?(0,b.jsx)("div",{className:"mt-5 text-sm text-[var(--muted)]",children:"No resolved actions yet."}):(0,b.jsx)("div",{className:"mt-5 grid gap-3",children:a.dist.rows.map(c=>{let d,e=Math.round(1e4*c.count/Math.max(1,a.dist.total))/100,f="legendary"===(d=String(c.rarity??"").toLowerCase())?{dot:"bg-[var(--warn)]",bg:"bg-[var(--warn-bg)]",text:"text-[var(--warn)]"}:"epic"===d?{dot:"bg-[var(--accent-2)]",bg:"bg-[color-mix(in_srgb,var(--accent-2)_12%,transparent)]",text:"text-[var(--accent-2)]"}:"rare"===d?{dot:"bg-[var(--accent)]",bg:"bg-[color-mix(in_srgb,var(--accent)_10%,transparent)]",text:"text-[var(--accent)]"}:{dot:"bg-[var(--border)]",bg:"bg-[var(--card-2)]",text:"text-[var(--muted)]"};return(0,b.jsxs)("div",{className:"rounded-xl border border-[var(--border)] bg-[var(--bg)] p-4",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between gap-3",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("span",{className:`h-2.5 w-2.5 rounded-full ${f.dot}`,"aria-hidden":!0}),(0,b.jsx)("div",{className:"text-sm font-semibold text-[var(--foreground)]",children:c.rarity})]}),(0,b.jsxs)("div",{className:"text-xs text-[var(--muted)]",children:[c.count," · ",e,"%"]})]}),(0,b.jsx)("div",{className:"mt-3 h-2 w-full overflow-hidden rounded-full bg-[var(--card-2)]",children:(0,b.jsx)("div",{className:`h-full ${f.bg}`,style:{width:`${Math.min(100,Math.max(0,e))}%`}})})]},c.rarity)})})]},a.key)),(0,b.jsxs)("section",{className:"rounded-2xl border border-[var(--border)] bg-[var(--card)] p-5 shadow-[var(--shadow)]",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsxs)("span",{className:"relative inline-flex h-2.5 w-2.5 shrink-0 items-center justify-center",children:[(0,b.jsx)("span",{className:"absolute inline-flex h-2.5 w-2.5 rounded-full bg-[var(--accent)]"}),(0,b.jsx)("span",{className:"absolute inline-flex h-4.5 w-4.5 rounded-full bg-[var(--ring)]"})]}),(0,b.jsx)("div",{className:"text-[11px] font-bold uppercase tracking-widest text-[var(--muted)]",children:"Resolution latency (7d)"}),(0,b.jsx)("div",{className:"h-px flex-1 bg-[var(--border)]"})]}),0===r.length?(0,b.jsx)("div",{className:"mt-5 text-sm text-[var(--muted)]",children:"No resolved actions in the last 7 days."}):(0,b.jsx)("div",{className:"mt-5 grid gap-2",children:r.map(a=>(0,b.jsxs)("div",{className:"grid gap-2 rounded-xl border border-[var(--border)] bg-[var(--bg)] p-4 md:grid-cols-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-xs font-semibold text-[var(--foreground)]",children:a.module}),(0,b.jsxs)("div",{className:"mt-1 text-xs text-[var(--muted)]",children:["n=",a.n]})]}),(0,b.jsxs)("div",{className:"text-xs text-[var(--muted)]",children:[(0,b.jsx)("span",{className:"font-semibold text-[var(--foreground)]",children:"p50"})," ",e(a.p50_s)]}),(0,b.jsxs)("div",{className:"text-xs text-[var(--muted)]",children:[(0,b.jsx)("span",{className:"font-semibold text-[var(--foreground)]",children:"p95"})," ",e(a.p95_s)]}),(0,b.jsxs)("div",{className:"text-xs text-[var(--muted)]",children:[(0,b.jsx)("span",{className:"font-semibold text-[var(--foreground)]",children:"avg"})," ",e(a.avg_s)]})]},a.module))})]}),(0,b.jsxs)("section",{className:"rounded-2xl border border-[var(--border)] bg-[var(--card)] p-5 shadow-[var(--shadow)]",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsxs)("span",{className:"relative inline-flex h-2.5 w-2.5 shrink-0 items-center justify-center",children:[(0,b.jsx)("span",{className:"absolute inline-flex h-2.5 w-2.5 rounded-full bg-[var(--warn)]"}),(0,b.jsx)("span",{className:"absolute inline-flex h-4.5 w-4.5 rounded-full bg-[var(--ring)]"})]}),(0,b.jsx)("div",{className:"text-[11px] font-bold uppercase tracking-widest text-[var(--muted)]",children:"Overdue actions"}),(0,b.jsx)("div",{className:"h-px flex-1 bg-[var(--border)]"})]}),0===s.length?(0,b.jsx)("div",{className:"mt-5 text-sm text-[var(--muted)]",children:"No overdue actions right now."}):(0,b.jsx)("div",{className:"mt-5 grid gap-2",children:s.map(a=>(0,b.jsxs)("div",{className:"flex items-center justify-between gap-3 rounded-xl border border-[var(--border)] bg-[var(--bg)] px-4 py-3",children:[(0,b.jsx)("div",{className:"text-sm font-semibold text-[var(--foreground)]",children:a.module}),(0,b.jsxs)("div",{className:"text-xs font-bold text-[var(--muted)]",children:["×",a.count]})]},a.module))})]}),(0,b.jsxs)("section",{className:"rounded-2xl border border-[var(--border)] bg-[var(--card)] p-5 shadow-[var(--shadow)]",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsxs)("span",{className:"relative inline-flex h-2.5 w-2.5 shrink-0 items-center justify-center",children:[(0,b.jsx)("span",{className:"absolute inline-flex h-2.5 w-2.5 rounded-full bg-[var(--accent-2)]"}),(0,b.jsx)("span",{className:"absolute inline-flex h-4.5 w-4.5 rounded-full bg-[var(--ring)]"})]}),(0,b.jsx)("div",{className:"text-[11px] font-bold uppercase tracking-widest text-[var(--muted)]",children:"Boosts spent (7d)"}),(0,b.jsx)("div",{className:"h-px flex-1 bg-[var(--border)]"})]}),0===q.length?(0,b.jsx)("div",{className:"mt-5 text-sm text-[var(--muted)]",children:"No boosts spent in the last 7 days."}):(0,b.jsx)("div",{className:"mt-5 grid gap-2",children:q.map(a=>(0,b.jsxs)("div",{className:"flex items-center justify-between gap-3 rounded-xl border border-[var(--border)] bg-[var(--bg)] px-4 py-3",children:[(0,b.jsx)("div",{className:"text-sm font-semibold text-[var(--foreground)]",children:a.code}),(0,b.jsxs)("div",{className:"text-xs font-bold text-[var(--muted)]",children:["×",a.count]})]},a.code))})]}),(0,b.jsxs)("section",{className:"rounded-2xl border border-[var(--border)] bg-[var(--card)] p-5 shadow-[var(--shadow)]",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsxs)("span",{className:"relative inline-flex h-2.5 w-2.5 shrink-0 items-center justify-center",children:[(0,b.jsx)("span",{className:"absolute inline-flex h-2.5 w-2.5 rounded-full bg-[var(--accent)]"}),(0,b.jsx)("span",{className:"absolute inline-flex h-4.5 w-4.5 rounded-full bg-[var(--ring)]"})]}),(0,b.jsx)("div",{className:"text-[11px] font-bold uppercase tracking-widest text-[var(--muted)]",children:"Crafting activity (7d)"}),(0,b.jsx)("div",{className:"h-px flex-1 bg-[var(--border)]"})]}),(0,b.jsxs)("div",{className:"mt-5 grid gap-3 md:grid-cols-2",children:[(0,b.jsxs)("div",{className:"rounded-xl border border-[var(--border)] bg-[var(--bg)] p-4",children:[(0,b.jsx)("div",{className:"text-[11px] font-bold uppercase tracking-widest text-[var(--muted)]",children:"Items salvaged"}),(0,b.jsx)("div",{className:"mt-2 text-2xl font-extrabold tracking-tight text-[var(--foreground)]",children:i.crafting_7d.items_salvaged}),(0,b.jsxs)("div",{className:"mt-1 text-xs text-[var(--muted)]",children:["Across ",i.crafting_7d.salvage_events," salvage events"]})]}),(0,b.jsxs)("div",{className:"rounded-xl border border-[var(--border)] bg-[var(--bg)] p-4",children:[(0,b.jsx)("div",{className:"text-[11px] font-bold uppercase tracking-widest text-[var(--muted)]",children:"Shards spent"}),(0,b.jsx)("div",{className:"mt-2 text-2xl font-extrabold tracking-tight text-[var(--foreground)]",children:i.crafting_7d.shards_spent}),(0,b.jsxs)("div",{className:"mt-1 text-xs text-[var(--muted)]",children:["Across ",i.crafting_7d.craft_events," craft events"]})]})]})]})]}):(0,b.jsx)("div",{className:"rounded-2xl border border-[var(--border)] bg-[var(--card)] px-6 py-10 text-center text-sm text-[var(--muted)]",children:"No data yet."})}a.s(["ArcadeTransparencyClient",()=>f])}];

//# sourceMappingURL=src_536d7473._.js.map