module.exports=[56773,a=>{"use strict";var b=a.i(187924);let c=a.i(572131).forwardRef(function({className:a="",type:c="text",...d},e){return(0,b.jsx)("input",{ref:e,type:c,className:"h-11 w-full rounded-xl border border-[var(--v2-border)] bg-[var(--v2-surface)] px-3 text-[14px] text-[var(--v2-text)] shadow-[var(--v2-shadow-sm)] outline-none placeholder:text-[color-mix(in_srgb,var(--v2-muted)_70%,transparent)] focus:ring-2 focus:ring-[var(--v2-ring)] "+a,...d})});a.s(["V2Input",0,c])},556836,a=>{"use strict";var b=a.i(187924);function c(a){let b=a?.variant??"secondary",c=a?.size??"md";return["inline-flex select-none items-center justify-center gap-2 whitespace-nowrap rounded-xl transition focus:outline-none focus:ring-2 focus:ring-[var(--v2-ring)] disabled:pointer-events-none disabled:opacity-55","lg"===c?"h-12 px-5 text-[15px]":"sm"===c?"h-9 px-3 text-[13px]":"h-11 px-4 text-[14px]","primary"===b?"bg-[var(--v2-accent)] text-white font-semibold shadow-[var(--v2-shadow-sm)] hover:brightness-105":"danger"===b?"bg-[var(--down)] text-white font-semibold shadow-[var(--v2-shadow-sm)] hover:brightness-105":"ghost"===b?"bg-transparent text-[var(--v2-text)] font-semibold hover:bg-[var(--v2-surface-2)]":"border border-[var(--v2-border)] bg-[var(--v2-surface)] text-[var(--v2-text)] font-semibold shadow-[var(--v2-shadow-sm)] hover:bg-[var(--v2-surface-2)]",a?.fullWidth?"w-full":"",a?.className??""].filter(Boolean).join(" ")}let d=a.i(572131).forwardRef(function({variant:a,size:d,fullWidth:e,className:f,type:g,...h},i){return(0,b.jsx)("button",{ref:i,type:g??"button",className:c({variant:a,size:d,fullWidth:e,className:f}),...h})});a.s(["V2Button",0,d,"v2ButtonClassName",()=>c])},214373,a=>{"use strict";var b=a.i(187924);function c({children:a,className:c=""}){return(0,b.jsx)("section",{className:"rounded-[var(--v2-radius-lg)] border border-[var(--v2-border)] bg-[var(--v2-surface)] shadow-[var(--v2-shadow-sm)] "+c,children:a})}function d({title:a,subtitle:c,right:d}){return(0,b.jsxs)("header",{className:"flex items-start justify-between gap-3 px-4 pt-4",children:[(0,b.jsxs)("div",{className:"min-w-0",children:[(0,b.jsx)("div",{className:"text-[15px] font-semibold text-[var(--v2-text)]",children:a}),c?(0,b.jsx)("div",{className:"mt-0.5 text-[13px] text-[var(--v2-muted)]",children:c}):null]}),d?(0,b.jsx)("div",{className:"shrink-0",children:d}):null]})}function e({children:a}){return(0,b.jsx)("div",{className:"px-4 pb-4 pt-3",children:a})}a.s(["V2Card",()=>c,"V2CardBody",()=>e,"V2CardHeader",()=>d])},782691,a=>{"use strict";var b=a.i(187924);function c({className:a=""}){return(0,b.jsx)("div",{className:"animate-pulse rounded-xl border border-[var(--v2-border)] bg-[var(--v2-surface-2)] "+a,"aria-hidden":"true"})}a.s(["V2Skeleton",()=>c])},712876,a=>{"use strict";var b=a.i(187924),c=a.i(572131),d=a.i(556836),e=a.i(56773),f=a.i(782691),g=a.i(214373);let h={binance:"Binance",bybit:"Bybit",okx:"OKX",kucoin:"KuCoin",gateio:"Gate.io",bitget:"Bitget",mexc:"MEXC"},i={binance:"var(--warn)",bybit:"var(--accent-2)",okx:"var(--accent)",kucoin:"var(--accent)",gateio:"var(--accent-2)",bitget:"var(--warn)",mexc:"var(--accent)"};function j({userId:a}){let[j,k]=(0,c.useState)([]),[l,m]=(0,c.useState)(!0),[n,o]=(0,c.useState)(!1),[p,q]=(0,c.useState)({}),[r,s]=(0,c.useState)({}),[t,u]=(0,c.useState)("binance"),[v,w]=(0,c.useState)(""),[x,y]=(0,c.useState)(""),[z,A]=(0,c.useState)(""),[B,C]=(0,c.useState)(""),[D,E]=(0,c.useState)(!1),[F,G]=(0,c.useState)(null),H=a?{"x-user-id":a}:{},I=(0,c.useCallback)(async()=>{try{let a=await fetch("/api/exchange/connections",{credentials:"include",headers:H});if(a.ok){let b=await a.json();k(b.connections??[])}}catch{}finally{m(!1)}},[a]);(0,c.useEffect)(()=>{a?I():m(!1)},[a,I]);let J=async a=>{s(b=>({...b,[a]:!0}));try{let b=await fetch(`/api/exchange/connections/${a}`,{credentials:"include",headers:H});if(b.ok){let c=await b.json();q(b=>({...b,[a]:c.balances}))}}catch{}finally{s(b=>({...b,[a]:!1}))}},K=async a=>{confirm("Remove this exchange connection?")&&(await fetch(`/api/exchange/connections/${a}`,{method:"DELETE",credentials:"include",headers:H}),k(b=>b.filter(b=>b.id!==a)))},L=async a=>{a.preventDefault(),E(!0),G(null);try{let a=await fetch("/api/exchange/connections",{method:"POST",credentials:"include",headers:{...H,"Content-Type":"application/json"},body:JSON.stringify({exchange:t,label:v,api_key:x,api_secret:z,passphrase:B||void 0})}),b=await a.json();if(!a.ok)return void G(b.message||b.error||"Failed to add connection");o(!1),w(""),y(""),A(""),C(""),I()}catch(a){G(a.message)}finally{E(!1)}};return a?(0,b.jsxs)("div",{className:"flex flex-col gap-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-lg font-extrabold tracking-tight text-[var(--v2-text)]",children:"API connections"}),(0,b.jsx)("p",{className:"text-[13px] text-[var(--v2-muted)]",children:"Connect external exchange APIs for arbitrage signals and copy trading."}),(0,b.jsx)("p",{className:"mt-1 text-[12px] text-[var(--v2-muted)]",children:"Scanning works without keys. Bots: Cash & Carry needs 1 exchange; cross-exchange strategies may need 2."})]}),(0,b.jsx)(d.V2Button,{variant:n?"secondary":"primary",onClick:()=>o(!n),children:n?"Cancel":"+ Add connection"})]}),n&&(0,b.jsxs)("form",{onSubmit:L,className:"rounded-2xl border border-[var(--v2-border)] bg-[var(--v2-surface)] p-5 shadow-[var(--v2-shadow-md)]",children:[(0,b.jsxs)("div",{className:"grid gap-4 sm:grid-cols-2",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"mb-1 block text-[12px] font-semibold text-[var(--v2-muted)]",children:"Exchange"}),(0,b.jsxs)("select",{value:t,onChange:a=>u(a.target.value),className:"w-full rounded-xl border border-[var(--v2-border)] bg-[var(--v2-surface-2)] px-3 py-2 text-[13px] font-semibold text-[var(--v2-text)] outline-none shadow-[var(--v2-shadow-sm)] focus-visible:ring-2 focus-visible:ring-[var(--v2-ring)]",children:[(0,b.jsx)("option",{value:"binance",children:"Binance"}),(0,b.jsx)("option",{value:"bybit",children:"Bybit"}),(0,b.jsx)("option",{value:"okx",children:"OKX"}),(0,b.jsx)("option",{value:"kucoin",children:"KuCoin"}),(0,b.jsx)("option",{value:"gateio",children:"Gate.io"}),(0,b.jsx)("option",{value:"bitget",children:"Bitget"}),(0,b.jsx)("option",{value:"mexc",children:"MEXC"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"mb-1 block text-[12px] font-semibold text-[var(--v2-muted)]",children:"Label"}),(0,b.jsx)(e.V2Input,{value:v,onChange:a=>w(a.target.value),placeholder:"e.g. Main Trading Account",required:!0})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"mb-1 block text-[12px] font-semibold text-[var(--v2-muted)]",children:"API key"}),(0,b.jsx)(e.V2Input,{type:"password",value:x,onChange:a=>y(a.target.value),className:"font-mono",required:!0})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"mb-1 block text-[12px] font-semibold text-[var(--v2-muted)]",children:"API secret"}),(0,b.jsx)(e.V2Input,{type:"password",value:z,onChange:a=>A(a.target.value),className:"font-mono",required:!0})]}),("okx"===t||"kucoin"===t)&&(0,b.jsxs)("div",{className:"sm:col-span-2",children:[(0,b.jsxs)("label",{className:"mb-1 block text-[12px] font-semibold text-[var(--v2-muted)]",children:["Passphrase (","okx"===t?"OKX":"KuCoin",")"]}),(0,b.jsx)(e.V2Input,{type:"password",value:B,onChange:a=>C(a.target.value),className:"font-mono"})]})]}),F&&(0,b.jsx)("div",{className:"mt-3 rounded-2xl border border-[var(--v2-border)] bg-[var(--down-bg)] px-3 py-2 text-[12px] font-semibold text-[var(--down)]",children:F}),(0,b.jsxs)("div",{className:"mt-4 flex items-center gap-3",children:[(0,b.jsx)(d.V2Button,{type:"submit",variant:"primary",disabled:D,children:D?"Validating…":"Connect"}),(0,b.jsx)("span",{className:"text-[12px] text-[var(--v2-muted)]",children:"Credentials are encrypted at rest (AES-256-GCM). We validate by fetching balances."})]})]}),l?(0,b.jsxs)("div",{className:"grid gap-3",children:[(0,b.jsx)(f.V2Skeleton,{className:"h-24"}),(0,b.jsx)(f.V2Skeleton,{className:"h-24"})]}):0===j.length?(0,b.jsxs)("div",{className:"rounded-2xl border border-dashed border-[var(--v2-border)] bg-[var(--v2-surface)] py-12 text-center shadow-[var(--v2-shadow-sm)]",children:[(0,b.jsx)("div",{className:"text-[13px] font-semibold text-[var(--v2-text)]",children:"No connections yet"}),(0,b.jsx)("div",{className:"mt-1 text-[12px] text-[var(--v2-muted)]",children:"Add your first exchange API to get started."})]}):(0,b.jsx)("div",{className:"grid gap-3",children:j.map(a=>(0,b.jsxs)(g.V2Card,{className:"p-4",children:[(0,b.jsxs)("div",{className:"flex items-start justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"grid h-9 w-9 place-items-center rounded-lg text-xs font-bold text-white",style:{background:i[a.exchange]??"var(--accent)"},children:a.exchange.slice(0,2).toUpperCase()}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-[13px] font-bold text-[var(--v2-text)]",children:a.label}),(0,b.jsxs)("div",{className:"flex items-center gap-2 text-[12px] text-[var(--v2-muted)]",children:[(0,b.jsx)("span",{children:h[a.exchange]??a.exchange}),(0,b.jsxs)("span",{className:`inline-flex items-center gap-1 rounded-full px-1.5 py-0.5 text-[10px] font-medium ${"active"===a.status?"bg-[var(--up-bg)] text-[var(--up)]":"bg-[var(--down-bg)] text-[var(--down)]"}`,children:[(0,b.jsx)("span",{className:`h-1 w-1 rounded-full ${"active"===a.status?"bg-[var(--up)]":"bg-[var(--down)]"}`}),a.status]})]})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(d.V2Button,{variant:"secondary",onClick:()=>J(a.id),disabled:r[a.id],children:r[a.id]?"Loading…":"Balances"}),(0,b.jsx)(d.V2Button,{variant:"danger",onClick:()=>K(a.id),children:"Remove"})]})]}),p[a.id]&&(0,b.jsx)("div",{className:"mt-3 border-t border-[var(--v2-border)] pt-3",children:(0,b.jsxs)("div",{className:"grid grid-cols-3 gap-2 text-[12px]",children:[(0,b.jsx)("div",{className:"font-semibold text-[var(--v2-muted)]",children:"Asset"}),(0,b.jsx)("div",{className:"font-semibold text-[var(--v2-muted)]",children:"Available"}),(0,b.jsx)("div",{className:"font-semibold text-[var(--v2-muted)]",children:"Locked"}),p[a.id].map(a=>(0,b.jsxs)("div",{className:"contents",children:[(0,b.jsx)("div",{className:"font-mono font-semibold text-[var(--v2-text)]",children:a.asset}),(0,b.jsx)("div",{className:"font-mono text-[var(--v2-text)]",children:Number(a.free).toFixed(6)}),(0,b.jsx)("div",{className:"font-mono text-[var(--v2-muted)]",children:Number(a.locked).toFixed(6)})]},a.asset))]})}),a.last_error&&(0,b.jsx)("div",{className:"mt-2 rounded-xl border border-[var(--v2-border)] bg-[var(--down-bg)] px-2 py-1 text-[11px] font-semibold text-[var(--down)]",children:a.last_error})]},a.id))})]}):(0,b.jsxs)("div",{className:"flex flex-col items-center justify-center gap-3 py-20 text-center",children:[(0,b.jsx)("div",{className:"text-lg font-extrabold tracking-tight text-[var(--v2-text)]",children:"Connect your exchanges"}),(0,b.jsx)("div",{className:"text-[13px] text-[var(--v2-muted)]",children:"Sign in to connect your Binance, Bybit, or OKX API keys."})]})}a.s(["ConnectionsClient",()=>j])}];

//# sourceMappingURL=src_5bb8e5d3._.js.map