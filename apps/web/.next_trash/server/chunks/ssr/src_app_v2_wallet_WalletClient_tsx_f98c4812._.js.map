{"version":3,"sources":["../../../../src/app/v2/wallet/WalletClient.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useEffect, useMemo, useRef, useState } from \"react\";\r\n\r\nimport Link from \"next/link\";\r\nimport { V2Button, v2ButtonClassName } from \"@/components/v2/Button\";\r\nimport { V2Card, V2CardBody, V2CardHeader } from \"@/components/v2/Card\";\r\nimport { V2Input } from \"@/components/v2/Input\";\r\nimport { V2Sheet } from \"@/components/v2/Sheet\";\r\nimport { V2Skeleton } from \"@/components/v2/Skeleton\";\r\n\r\ntype BalanceRow = {\r\n  asset_id: string;\r\n  chain: string;\r\n  symbol: string;\r\n  decimals: number;\r\n  posted: string;\r\n  held: string;\r\n  available: string;\r\n};\r\n\r\ntype BalancesResponse = { balances: BalanceRow[] };\r\n\r\ntype DepositAddressResponse = {\r\n  address: string;\r\n  chain: string;\r\n  supported?: { native?: string[]; token_mode?: string; token_symbols?: string[] };\r\n};\r\n\r\ntype PendingDepositRow = {\r\n  id: number;\r\n  chain: string;\r\n  tx_hash: string;\r\n  log_index: number;\r\n  block_number: number;\r\n  to_address: string;\r\n  asset_symbol: string;\r\n  asset_decimals: number;\r\n  amount: string;\r\n  confirmations: number;\r\n  confirmations_required: number;\r\n  status: \"pending_confirmations\" | \"detected\";\r\n  created_at: string;\r\n};\r\n\r\ntype PendingResponse = {\r\n  deposits?: PendingDepositRow[];\r\n  tip?: number | null;\r\n  confirmations_required?: number;\r\n};\r\n\r\ntype AssetRow = {\r\n  id: string;\r\n  chain: string;\r\n  symbol: string;\r\n  name: string | null;\r\n  decimals: number;\r\n};\r\n\r\ntype AssetsResponse = { assets: AssetRow[] };\r\n\r\ntype AllowlistRow = {\r\n  id: string;\r\n  chain: string;\r\n  address: string;\r\n  label: string | null;\r\n  status: string;\r\n  created_at: string;\r\n  updated_at: string;\r\n};\r\n\r\ntype AllowlistResponse = { user_id: string; addresses: AllowlistRow[] };\r\n\r\ntype WithdrawalRow = {\r\n  id: string;\r\n  asset_id: string;\r\n  symbol: string;\r\n  chain: string;\r\n  amount: string;\r\n  destination_address: string;\r\n  status: string;\r\n  reference: string | null;\r\n  tx_hash: string | null;\r\n  failure_reason: string | null;\r\n  created_at: string;\r\n};\r\n\r\ntype WithdrawalsResponse = { user_id: string; withdrawals: WithdrawalRow[] };\r\n\r\ntype PortfolioResponse = {\r\n  ok: true;\r\n  stats: { totalFills: number; totalVolume: string; fills24h: number; openOrders: number };\r\n  pnl: { realizedPnl: string };\r\n  recentFills: Array<{\r\n    executionId: string;\r\n    market: string;\r\n    side: string;\r\n    role: string;\r\n    price: string;\r\n    quantity: string;\r\n    quoteAmount: string;\r\n    createdAt: string;\r\n  }>;\r\n  ts: string;\r\n};\r\n\r\ntype TraceResponse =\r\n  | {\r\n      ok: true;\r\n      verdict: \"not_ours\" | \"pending\" | \"seen\" | \"credited\";\r\n      receipt?: { confirmations: number; confirmations_required: number; status: number | null };\r\n      diagnostic?: { message?: string };\r\n    }\r\n  | { ok: false; error: string; message?: string };\r\n\r\ntype ReportResponse =\r\n  | { ok: true; credits: Array<{ asset_symbol: string; amount: string; outcome: string }> }\r\n  | { ok: false; error: string; message?: string };\r\n\r\nfunction fmtNum(v: string | null | undefined): string {\r\n  const n = Number(String(v ?? \"\"));\r\n  if (!Number.isFinite(n)) return \"—\";\r\n  if (n === 0) return \"0\";\r\n  const abs = Math.abs(n);\r\n  const decimals = abs >= 1000 ? 2 : abs >= 1 ? 4 : abs >= 0.01 ? 6 : 8;\r\n  return n.toLocaleString(undefined, { maximumFractionDigits: decimals });\r\n}\r\n\r\nfunction shortHash(h: string): string {\r\n  const s = String(h || \"\");\r\n  return s.length > 18 ? `${s.slice(0, 10)}…${s.slice(-6)}` : s;\r\n}\r\n\r\nexport function WalletClient() {\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState<string | null>(null);\r\n\r\n  const [balancesError, setBalancesError] = useState<string | null>(null);\r\n  const [pendingError, setPendingError] = useState<string | null>(null);\r\n  const [withdrawalsError, setWithdrawalsError] = useState<string | null>(null);\r\n  const [allowlistError, setAllowlistError] = useState<string | null>(null);\r\n  const [portfolioError, setPortfolioError] = useState<string | null>(null);\r\n\r\n  const [balances, setBalances] = useState<BalanceRow[]>([]);\r\n  const [depositAddress, setDepositAddress] = useState<string | null>(null);\r\n  const [tokenMode, setTokenMode] = useState<string | null>(null);\r\n  const [tokenSymbols, setTokenSymbols] = useState<string[]>([]);\r\n\r\n  const [pending, setPending] = useState<PendingDepositRow[]>([]);\r\n\r\n  const [assets, setAssets] = useState<AssetRow[]>([]);\r\n  const [allowlist, setAllowlist] = useState<AllowlistRow[]>([]);\r\n  const [withdrawals, setWithdrawals] = useState<WithdrawalRow[]>([]);\r\n\r\n  const [portfolio, setPortfolio] = useState<PortfolioResponse | null>(null);\r\n  const portfolioLastLoadedAt = useRef<number>(0);\r\n\r\n  const loadSeqRef = useRef(0);\r\n  const abortRef = useRef<AbortController | null>(null);\r\n\r\n  const notifEsRef = useRef<EventSource | null>(null);\r\n  const lastNotifRefreshAtRef = useRef<number>(0);\r\n\r\n  const [assetSheetOpen, setAssetSheetOpen] = useState(false);\r\n  const [assetSearch, setAssetSearch] = useState(\"\");\r\n  const [selectedAssetId, setSelectedAssetId] = useState<string | null>(null);\r\n\r\n  const [addressSheetOpen, setAddressSheetOpen] = useState(false);\r\n  const [addAddressSheetOpen, setAddAddressSheetOpen] = useState(false);\r\n  const [selectedAddress, setSelectedAddress] = useState<string | null>(null);\r\n  const [newAddress, setNewAddress] = useState(\"\");\r\n  const [newLabel, setNewLabel] = useState(\"\");\r\n  const [newAllowlistTotp, setNewAllowlistTotp] = useState(\"\");\r\n  const [addingAllowlist, setAddingAllowlist] = useState(false);\r\n  const [allowlistActionError, setAllowlistActionError] = useState<string | null>(null);\r\n\r\n  const [withdrawAmount, setWithdrawAmount] = useState(\"\");\r\n  const [withdrawReference, setWithdrawReference] = useState(\"\");\r\n  const [withdrawTotp, setWithdrawTotp] = useState(\"\");\r\n  const [withdrawing, setWithdrawing] = useState(false);\r\n  const [withdrawResult, setWithdrawResult] = useState<any>(null);\r\n  const [withdrawActionError, setWithdrawActionError] = useState<string | null>(null);\r\n\r\n  const [txHash, setTxHash] = useState(\"\");\r\n  const [traceLoading, setTraceLoading] = useState(false);\r\n  const [trace, setTrace] = useState<TraceResponse | null>(null);\r\n  const [postLoading, setPostLoading] = useState(false);\r\n  const [post, setPost] = useState<ReportResponse | null>(null);\r\n\r\n  const load = async () => {\r\n    const seq = ++loadSeqRef.current;\r\n    abortRef.current?.abort();\r\n    const controller = new AbortController();\r\n    abortRef.current = controller;\r\n\r\n    setError(null);\r\n    setBalancesError(null);\r\n    setPendingError(null);\r\n    setWithdrawalsError(null);\r\n    setAllowlistError(null);\r\n    setPortfolioError(null);\r\n    try {\r\n      // These endpoints use the acting user identity derived from the signed session cookie.\r\n      const [addrRes, pendingRes] = await Promise.all([\r\n        fetch(\"/api/exchange/deposit/address\", {\r\n          method: \"POST\",\r\n          headers: { \"content-type\": \"application/json\" },\r\n          credentials: \"include\",\r\n          signal: controller.signal,\r\n          body: JSON.stringify({ chain: \"bsc\" }),\r\n        }),\r\n        fetch(\"/api/exchange/deposits/pending\", { cache: \"no-store\", credentials: \"include\", signal: controller.signal }),\r\n      ]);\r\n\r\n      const [assetsRes, allowlistRes, withdrawalsRes] = await Promise.all([\r\n        fetch(\"/api/exchange/assets\", { cache: \"no-store\", credentials: \"include\", signal: controller.signal }),\r\n        fetch(\"/api/exchange/withdrawals/allowlist\", { cache: \"no-store\", credentials: \"include\", signal: controller.signal }),\r\n        fetch(\"/api/exchange/withdrawals\", { cache: \"no-store\", credentials: \"include\", signal: controller.signal }),\r\n      ]);\r\n\r\n      const now = Date.now();\r\n      const shouldLoadPortfolio = now - portfolioLastLoadedAt.current > 45_000;\r\n      const portfolioRes = shouldLoadPortfolio\r\n        ? await fetch(\"/api/exchange/portfolio\", { cache: \"no-store\", credentials: \"include\", signal: controller.signal }).catch(() => null as any)\r\n        : null;\r\n\r\n      // balances endpoint uses x-user-id in production; we can still show deposit section without it.\r\n      const balRes = await fetch(\"/api/exchange/balances\", { cache: \"no-store\", credentials: \"include\", signal: controller.signal }).catch(() => null as any);\r\n\r\n      const addrJson = (await addrRes.json().catch(() => null)) as DepositAddressResponse | null;\r\n      const pendingJson = (await pendingRes.json().catch(() => null)) as PendingResponse | null;\r\n      const assetsJson = (await assetsRes.json().catch(() => null)) as AssetsResponse | null;\r\n      const allowlistJson = (await allowlistRes.json().catch(() => null)) as AllowlistResponse | null;\r\n      const withdrawalsJson = (await withdrawalsRes.json().catch(() => null)) as WithdrawalsResponse | null;\r\n      const portfolioJson = portfolioRes && portfolioRes.ok\r\n        ? ((await portfolioRes.json().catch(() => null)) as PortfolioResponse | null)\r\n        : null;\r\n\r\n      if (!addrRes.ok) throw new Error(typeof (addrJson as any)?.error === \"string\" ? (addrJson as any).error : `http_${addrRes.status}`);\r\n      if (seq !== loadSeqRef.current) return;\r\n      setDepositAddress(addrJson?.address ?? null);\r\n      const mode = addrJson?.supported?.token_mode ? String(addrJson.supported.token_mode) : null;\r\n      setTokenMode(mode);\r\n      setTokenSymbols(Array.isArray(addrJson?.supported?.token_symbols) ? (addrJson!.supported!.token_symbols as any) : []);\r\n\r\n      if (!pendingRes.ok) {\r\n        const msg = (pendingJson as any)?.error || (pendingJson as any)?.message;\r\n        setPendingError(typeof msg === \"string\" && msg.length ? msg : `Pending deposits unavailable (HTTP ${pendingRes.status}).`);\r\n        setPending([]);\r\n      } else {\r\n        setPending(Array.isArray(pendingJson?.deposits) ? pendingJson!.deposits : []);\r\n      }\r\n\r\n      const assetRows = Array.isArray(assetsJson?.assets) ? assetsJson!.assets : [];\r\n      setAssets(assetRows);\r\n      if (!selectedAssetId) {\r\n        const firstBsc = assetRows.find((a) => String(a.chain).toLowerCase() === \"bsc\");\r\n        if (firstBsc) setSelectedAssetId(firstBsc.id);\r\n      }\r\n\r\n      if (!allowlistRes.ok) {\r\n        const msg = (allowlistJson as any)?.error || (allowlistJson as any)?.message;\r\n        setAllowlistError(typeof msg === \"string\" && msg.length ? msg : `Allowlist unavailable (HTTP ${allowlistRes.status}).`);\r\n        setAllowlist([]);\r\n      } else {\r\n        const rows = Array.isArray(allowlistJson?.addresses) ? allowlistJson!.addresses : [];\r\n        setAllowlist(rows);\r\n        if (!selectedAddress) {\r\n          const firstActive = rows.find((r) => r.status === \"active\" && String(r.chain).toLowerCase() === \"bsc\");\r\n          if (firstActive) setSelectedAddress(firstActive.address);\r\n        }\r\n      }\r\n\r\n      if (!withdrawalsRes.ok) {\r\n        const msg = (withdrawalsJson as any)?.error || (withdrawalsJson as any)?.message;\r\n        setWithdrawalsError(typeof msg === \"string\" && msg.length ? msg : `Withdrawals unavailable (HTTP ${withdrawalsRes.status}).`);\r\n        setWithdrawals([]);\r\n      } else {\r\n        setWithdrawals(Array.isArray(withdrawalsJson?.withdrawals) ? withdrawalsJson!.withdrawals : []);\r\n      }\r\n\r\n      if (portfolioRes) {\r\n        if (portfolioRes.ok && portfolioJson?.ok) {\r\n          setPortfolio(portfolioJson);\r\n          portfolioLastLoadedAt.current = Date.now();\r\n        } else if (!portfolioRes.ok) {\r\n          setPortfolioError(`Activity unavailable (HTTP ${portfolioRes.status}).`);\r\n        }\r\n      }\r\n\r\n      if (balRes && balRes.ok) {\r\n        const balJson = (await balRes.json().catch(() => null)) as BalancesResponse | null;\r\n        setBalances(Array.isArray(balJson?.balances) ? balJson!.balances : []);\r\n      } else {\r\n        const status = balRes?.status;\r\n        if (status) setBalancesError(`Balances unavailable (HTTP ${status}).`);\r\n        setBalances([]);\r\n      }\r\n    } catch (e) {\r\n      if (e instanceof DOMException && e.name === \"AbortError\") return;\r\n      if (seq !== loadSeqRef.current) return;\r\n      setError(e instanceof Error ? e.message : String(e));\r\n    } finally {\r\n      if (seq === loadSeqRef.current) setLoading(false);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    void load();\r\n    const tick = () => {\r\n      if (document.visibilityState !== \"visible\") return;\r\n      void load();\r\n    };\r\n    const id = window.setInterval(tick, 15_000);\r\n    const onVis = () => {\r\n      if (document.visibilityState === \"visible\") void load();\r\n    };\r\n    document.addEventListener(\"visibilitychange\", onVis);\r\n    return () => {\r\n      window.clearInterval(id);\r\n      document.removeEventListener(\"visibilitychange\", onVis);\r\n    };\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []);\r\n\r\n  // Realtime: refresh wallet when relevant notifications arrive.\r\n  useEffect(() => {\r\n    const stop = () => {\r\n      try {\r\n        notifEsRef.current?.close();\r\n      } catch {\r\n        // ignore\r\n      }\r\n      notifEsRef.current = null;\r\n    };\r\n\r\n    const shouldRefreshForType = (t: string) => {\r\n      const type = String(t || \"\");\r\n      return type === \"deposit_credited\"\r\n        || type === \"withdrawal_approved\"\r\n        || type === \"withdrawal_rejected\"\r\n        || type === \"withdrawal_completed\"\r\n        || type === \"order_filled\"\r\n        || type === \"order_partially_filled\"\r\n        || type === \"order_canceled\"\r\n        || type === \"order_rejected\";\r\n    };\r\n\r\n    const refreshSoon = () => {\r\n      const now = Date.now();\r\n      if (now - lastNotifRefreshAtRef.current < 900) return;\r\n      lastNotifRefreshAtRef.current = now;\r\n      if (document.visibilityState !== \"visible\") return;\r\n      void load();\r\n    };\r\n\r\n    const start = () => {\r\n      if (document.visibilityState !== \"visible\") return;\r\n      if (typeof EventSource === \"undefined\") return;\r\n      if (notifEsRef.current) return;\r\n      try {\r\n        const es = new EventSource(\"/api/notifications/stream\", { withCredentials: true } as any);\r\n        es.addEventListener(\"notification\", (evt) => {\r\n          try {\r\n            const data = JSON.parse(String((evt as MessageEvent).data ?? \"{}\"));\r\n            if (shouldRefreshForType(String(data?.type ?? \"\"))) refreshSoon();\r\n          } catch {\r\n            // ignore\r\n          }\r\n        });\r\n        es.addEventListener(\"ready\", () => refreshSoon());\r\n        es.onerror = () => {\r\n          // allow browser retry; polling is the safety net\r\n        };\r\n        notifEsRef.current = es;\r\n      } catch {\r\n        stop();\r\n      }\r\n    };\r\n\r\n    const onVis = () => {\r\n      if (document.visibilityState === \"visible\") start();\r\n      else stop();\r\n    };\r\n\r\n    document.addEventListener(\"visibilitychange\", onVis);\r\n    start();\r\n    return () => {\r\n      document.removeEventListener(\"visibilitychange\", onVis);\r\n      stop();\r\n    };\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []);\r\n\r\n  const nonZeroBalances = useMemo(() => {\r\n    return balances.filter((b) => {\r\n      const a = Number(b.available);\r\n      const p = Number(b.posted);\r\n      const h = Number(b.held);\r\n      return (Number.isFinite(a) && a !== 0) || (Number.isFinite(p) && p !== 0) || (Number.isFinite(h) && h !== 0);\r\n    });\r\n  }, [balances]);\r\n\r\n  const traceTx = async () => {\r\n    const t = txHash.trim();\r\n    if (!t) return;\r\n    setTraceLoading(true);\r\n    setTrace(null);\r\n    try {\r\n      const res = await fetch(\"/api/exchange/deposits/trace\", {\r\n        method: \"POST\",\r\n        credentials: \"include\",\r\n        headers: { \"content-type\": \"application/json\" },\r\n        body: JSON.stringify({ chain: \"bsc\", tx_hash: t }),\r\n      });\r\n      const json = (await res.json().catch(() => null)) as any;\r\n      if (!res.ok) {\r\n        setTrace({ ok: false, error: String(json?.error ?? \"trace_failed\"), message: String(json?.message ?? json?.details?.message ?? \"\") });\r\n      } else {\r\n        setTrace(json as TraceResponse);\r\n      }\r\n    } catch (e) {\r\n      setTrace({ ok: false, error: e instanceof Error ? e.message : String(e) });\r\n    } finally {\r\n      setTraceLoading(false);\r\n    }\r\n  };\r\n\r\n  const postTx = async () => {\r\n    const t = txHash.trim();\r\n    if (!t) return;\r\n    setPostLoading(true);\r\n    setPost(null);\r\n    try {\r\n      const res = await fetch(\"/api/exchange/deposits/report\", {\r\n        method: \"POST\",\r\n        credentials: \"include\",\r\n        headers: { \"content-type\": \"application/json\" },\r\n        body: JSON.stringify({ chain: \"bsc\", tx_hash: t }),\r\n      });\r\n      const json = (await res.json().catch(() => null)) as any;\r\n      if (!res.ok) {\r\n        setPost({ ok: false, error: String(json?.error ?? \"post_failed\"), message: String(json?.details?.message ?? json?.message ?? \"\") });\r\n      } else {\r\n        setPost(json as ReportResponse);\r\n      }\r\n    } catch (e) {\r\n      setPost({ ok: false, error: e instanceof Error ? e.message : String(e) });\r\n    } finally {\r\n      setPostLoading(false);\r\n    }\r\n  };\r\n\r\n  const selectedAsset = useMemo(() => {\r\n    const id = selectedAssetId;\r\n    if (!id) return null;\r\n    return assets.find((a) => a.id === id) ?? null;\r\n  }, [assets, selectedAssetId]);\r\n\r\n  const selectedAllow = useMemo(() => {\r\n    const addr = selectedAddress;\r\n    if (!addr) return null;\r\n    return allowlist.find((a) => a.address === addr) ?? null;\r\n  }, [allowlist, selectedAddress]);\r\n\r\n  const filteredAssetRows = useMemo(() => {\r\n    const q = assetSearch.trim().toLowerCase();\r\n    const rows = assets.filter((a) => String(a.chain).toLowerCase() === \"bsc\");\r\n    if (!q) return rows;\r\n    return rows.filter((a) => {\r\n      const sym = String(a.symbol ?? \"\").toLowerCase();\r\n      const name = String(a.name ?? \"\").toLowerCase();\r\n      return sym.includes(q) || name.includes(q);\r\n    });\r\n  }, [assets, assetSearch]);\r\n\r\n  const addAllowlist = async () => {\r\n    const address = newAddress.trim();\r\n    if (!address) return;\r\n    setAllowlistActionError(null);\r\n    setAddingAllowlist(true);\r\n    try {\r\n      const res = await fetch(\"/api/exchange/withdrawals/allowlist\", {\r\n        method: \"POST\",\r\n        credentials: \"include\",\r\n        headers: { \"content-type\": \"application/json\" },\r\n        body: JSON.stringify({ chain: \"bsc\", address, label: newLabel.trim() || undefined, totp_code: newAllowlistTotp.trim() || undefined }),\r\n      });\r\n      const json = (await res.json().catch(() => null)) as any;\r\n      if (!res.ok) {\r\n        const msg = json?.details?.message || json?.message || json?.error;\r\n        setAllowlistActionError(typeof msg === \"string\" && msg.length ? msg : `Failed (HTTP ${res.status}).`);\r\n        return;\r\n      }\r\n      const added = json?.address?.address;\r\n      if (typeof added === \"string\" && added) setSelectedAddress(added);\r\n      setNewAddress(\"\");\r\n      setNewLabel(\"\");\r\n      setNewAllowlistTotp(\"\");\r\n      setAddAddressSheetOpen(false);\r\n      await load();\r\n    } catch (e) {\r\n      setAllowlistActionError(e instanceof Error ? e.message : String(e));\r\n    } finally {\r\n      setAddingAllowlist(false);\r\n    }\r\n  };\r\n\r\n  const requestWithdrawal = async () => {\r\n    const assetId = selectedAssetId;\r\n    const destination = selectedAddress;\r\n    const amount = withdrawAmount.trim();\r\n    if (!assetId || !destination || !amount) return;\r\n    setWithdrawActionError(null);\r\n    setWithdrawResult(null);\r\n    setWithdrawing(true);\r\n    try {\r\n      const res = await fetch(\"/api/exchange/withdrawals/request\", {\r\n        method: \"POST\",\r\n        credentials: \"include\",\r\n        headers: { \"content-type\": \"application/json\" },\r\n        body: JSON.stringify({\r\n          asset_id: assetId,\r\n          amount,\r\n          destination_address: destination,\r\n          reference: withdrawReference.trim() || undefined,\r\n          totp_code: withdrawTotp.trim() || undefined,\r\n        }),\r\n      });\r\n      const json = (await res.json().catch(() => null)) as any;\r\n      if (!res.ok) {\r\n        const msg = json?.details?.message || json?.detail?.message || json?.message || json?.error;\r\n        setWithdrawActionError(typeof msg === \"string\" && msg.length ? msg : `Failed (HTTP ${res.status}).`);\r\n        return;\r\n      }\r\n      setWithdrawResult(json);\r\n      setWithdrawAmount(\"\");\r\n      setWithdrawReference(\"\");\r\n      setWithdrawTotp(\"\");\r\n      await load();\r\n    } catch (e) {\r\n      setWithdrawActionError(e instanceof Error ? e.message : String(e));\r\n    } finally {\r\n      setWithdrawing(false);\r\n    }\r\n  };\r\n\r\n  const cancelWithdrawal = async (id: string) => {\r\n    if (!id) return;\r\n    try {\r\n      await fetch(`/api/exchange/withdrawals/${encodeURIComponent(id)}/cancel`, {\r\n        method: \"POST\",\r\n        credentials: \"include\",\r\n        headers: { \"content-type\": \"application/json\" },\r\n      });\r\n    } finally {\r\n      await load();\r\n    }\r\n  };\r\n\r\n  const scrollTo = (id: string) => {\r\n    const el = document.getElementById(id);\r\n    if (!el) return;\r\n    el.scrollIntoView({ behavior: \"smooth\", block: \"start\" });\r\n  };\r\n\r\n  return (\r\n    <main className=\"space-y-4\">\r\n      <header className=\"space-y-2\">\r\n        <div className=\"text-[11px] font-bold uppercase tracking-widest text-[var(--v2-muted)]\">Wallet</div>\r\n        <h1 className=\"text-2xl font-extrabold tracking-tight\">Balances & deposits</h1>\r\n        <p className=\"text-sm text-[var(--v2-muted)]\">Fast deposit visibility, clear statuses, mobile-first.</p>\r\n      </header>\r\n\r\n      <V2Card>\r\n        <V2CardHeader title=\"Quick actions\" subtitle=\"Deposit, withdraw, track\" />\r\n        <V2CardBody>\r\n          <div className=\"grid grid-cols-3 gap-2\">\r\n            <V2Button variant=\"secondary\" fullWidth onClick={() => scrollTo(\"v2-wallet-deposit\")}>Deposit</V2Button>\r\n            <V2Button variant=\"secondary\" fullWidth onClick={() => scrollTo(\"v2-wallet-withdraw\")}>Withdraw</V2Button>\r\n            <Link href=\"/v2/orders\" className={v2ButtonClassName({ variant: \"primary\", fullWidth: true })}>\r\n              Orders\r\n            </Link>\r\n          </div>\r\n\r\n          <div className=\"mt-3 grid grid-cols-2 gap-2\">\r\n            <div className=\"rounded-2xl border border-[var(--v2-border)] bg-[var(--v2-surface)] px-3 py-3 shadow-[var(--v2-shadow-sm)]\">\r\n              <div className=\"text-[11px] font-bold uppercase tracking-widest text-[var(--v2-muted)]\">Pending deposits</div>\r\n              <div className=\"mt-1 text-[16px] font-extrabold text-[var(--v2-text)]\">{loading ? \"…\" : String(pending.length)}</div>\r\n            </div>\r\n            <div className=\"rounded-2xl border border-[var(--v2-border)] bg-[var(--v2-surface)] px-3 py-3 shadow-[var(--v2-shadow-sm)]\">\r\n              <div className=\"text-[11px] font-bold uppercase tracking-widest text-[var(--v2-muted)]\">Open orders</div>\r\n              <div className=\"mt-1 text-[16px] font-extrabold text-[var(--v2-text)]\">{loading ? \"…\" : String(portfolio?.stats?.openOrders ?? \"—\")}</div>\r\n            </div>\r\n          </div>\r\n\r\n          {portfolioError ? (\r\n            <div className=\"mt-2 text-[12px] text-[var(--v2-muted)]\">{portfolioError}</div>\r\n          ) : portfolio?.recentFills?.length ? (\r\n            <div className=\"mt-3\">\r\n              <div className=\"mb-2 text-[11px] font-bold uppercase tracking-widest text-[var(--v2-muted)]\">Recent fills</div>\r\n              <div className=\"grid gap-2\">\r\n                {portfolio.recentFills.slice(0, 3).map((f) => (\r\n                  <div key={f.executionId} className=\"flex items-center justify-between gap-3 rounded-2xl border border-[var(--v2-border)] bg-[var(--v2-surface)] px-3 py-2 shadow-[var(--v2-shadow-sm)]\">\r\n                    <div className=\"min-w-0\">\r\n                      <div className=\"text-[13px] font-semibold text-[var(--v2-text)]\">{f.market}</div>\r\n                      <div className=\"mt-0.5 text-[11px] text-[var(--v2-muted)]\">{String(f.side).toUpperCase()} • {fmtNum(f.quantity)} @ {fmtNum(f.price)}</div>\r\n                    </div>\r\n                    <div className=\"text-right\">\r\n                      <div className=\"font-mono text-[12px] font-semibold text-[var(--v2-text)]\">{fmtNum(f.quoteAmount)}</div>\r\n                      <div className=\"mt-0.5 text-[11px] text-[var(--v2-muted)]\">{String(f.role)}</div>\r\n                    </div>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            </div>\r\n          ) : null}\r\n        </V2CardBody>\r\n      </V2Card>\r\n\r\n      {error ? (\r\n        <V2Card>\r\n          <V2CardHeader title=\"Wallet unavailable\" subtitle=\"Sign in and try again.\" />\r\n          <V2CardBody>\r\n            <div className=\"text-sm text-[var(--v2-muted)]\">{String(error)}</div>\r\n            <div className=\"mt-3\">\r\n              <V2Button variant=\"primary\" fullWidth onClick={() => void load()}>\r\n                Retry\r\n              </V2Button>\r\n            </div>\r\n          </V2CardBody>\r\n        </V2Card>\r\n      ) : null}\r\n\r\n      <V2Card>\r\n        <V2CardHeader title=\"Deposit address\" subtitle=\"BSC — your permanent address\" />\r\n        <V2CardBody>\r\n          {loading ? (\r\n            <V2Skeleton className=\"h-14 w-full\" />\r\n          ) : depositAddress ? (\r\n            <div className=\"grid gap-2\">\r\n              <div className=\"rounded-2xl border border-[var(--v2-border)] bg-[var(--v2-surface-2)] px-3 py-3\">\r\n                <div className=\"break-all font-mono text-[12px] text-[var(--v2-text)]\">{depositAddress}</div>\r\n              </div>\r\n              <div className=\"grid grid-cols-2 gap-2\">\r\n                <V2Button\r\n                  variant=\"secondary\"\r\n                  fullWidth\r\n                  onClick={() => void navigator.clipboard.writeText(depositAddress)}\r\n                >\r\n                  Copy\r\n                </V2Button>\r\n                <V2Button variant=\"primary\" fullWidth onClick={() => void load()}>\r\n                  Refresh\r\n                </V2Button>\r\n              </div>\r\n\r\n              {tokenMode === \"allowlist\" && tokenSymbols.length ? (\r\n                <div className=\"text-[12px] text-[var(--v2-muted)]\">\r\n                  Monitored tokens: <span className=\"font-semibold text-[var(--v2-text)]\">{tokenSymbols.slice(0, 10).join(\", \")}</span>\r\n                  {tokenSymbols.length > 10 ? \"…\" : \"\"}\r\n                </div>\r\n              ) : null}\r\n            </div>\r\n          ) : (\r\n            <div className=\"text-sm text-[var(--v2-muted)]\">No deposit address yet.</div>\r\n          )}\r\n        </V2CardBody>\r\n      </V2Card>\r\n\r\n      <V2Card>\r\n        <V2CardHeader title=\"Pending confirmations\" subtitle=\"Auto-updates\" />\r\n        <V2CardBody>\r\n          {pendingError ? (\r\n            <div className=\"mb-2 rounded-2xl border border-[var(--v2-border)] bg-[var(--v2-surface-2)] px-3 py-2 text-[12px] text-[var(--v2-muted)]\">\r\n              {pendingError}\r\n            </div>\r\n          ) : null}\r\n          {loading ? (\r\n            <div className=\"grid gap-2\">\r\n              <V2Skeleton className=\"h-14\" />\r\n              <V2Skeleton className=\"h-14\" />\r\n              <V2Skeleton className=\"h-14\" />\r\n            </div>\r\n          ) : pending.length === 0 ? (\r\n            <div className=\"text-sm text-[var(--v2-muted)]\">No pending deposits.</div>\r\n          ) : (\r\n            <div className=\"grid gap-2\">\r\n              {pending.slice(0, 8).map((d) => {\r\n                const ready = d.confirmations_required === 0 ? true : d.confirmations >= d.confirmations_required;\r\n                const conf = d.confirmations_required === 0 ? \"final\" : `${Math.min(d.confirmations, d.confirmations_required)}/${d.confirmations_required}`;\r\n                return (\r\n                  <div key={`${d.tx_hash}:${d.log_index}`} className=\"rounded-2xl border border-[var(--v2-border)] bg-[var(--v2-surface)] px-3 py-3 shadow-[var(--v2-shadow-sm)]\">\r\n                    <div className=\"flex items-start justify-between gap-3\">\r\n                      <div className=\"min-w-0\">\r\n                        <div className=\"font-mono text-[12px] font-semibold text-[var(--v2-text)]\" title={d.tx_hash}>\r\n                          {shortHash(d.tx_hash)}\r\n                        </div>\r\n                        <div className=\"mt-0.5 text-[12px] text-[var(--v2-muted)]\">\r\n                          {fmtNum(d.amount)} {String(d.asset_symbol).toUpperCase()}\r\n                        </div>\r\n                      </div>\r\n                      <div className=\"text-right\">\r\n                        <div className={`text-[12px] font-semibold ${ready ? \"text-[var(--up)]\" : \"text-[var(--warn)]\"}`}\r\n                        >\r\n                          {ready ? \"Ready\" : `${conf} confs`}\r\n                        </div>\r\n                        <div className=\"mt-0.5 text-[11px] text-[var(--v2-muted)]\">block {d.block_number}</div>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                );\r\n              })}\r\n            </div>\r\n          )}\r\n        </V2CardBody>\r\n      </V2Card>\r\n\r\n      <div id=\"v2-wallet-deposit\">\r\n        <V2Card>\r\n          <V2CardHeader title=\"Trace / Post deposit\" subtitle=\"Self-serve reconciliation\" />\r\n          <V2CardBody>\r\n          <div className=\"grid gap-2\">\r\n            <V2Input value={txHash} onChange={(e) => setTxHash(e.target.value)} placeholder=\"0x… tx hash\" spellCheck={false} autoCapitalize=\"none\" autoCorrect=\"off\" />\r\n\r\n            <div className=\"grid grid-cols-2 gap-2\">\r\n              <V2Button variant=\"secondary\" fullWidth disabled={traceLoading || !txHash.trim()} onClick={() => void traceTx()}>\r\n                {traceLoading ? \"Tracing…\" : \"Trace\"}\r\n              </V2Button>\r\n              <V2Button variant=\"primary\" fullWidth disabled={postLoading || !txHash.trim()} onClick={() => void postTx()}>\r\n                {postLoading ? \"Posting…\" : \"Post\"}\r\n              </V2Button>\r\n            </div>\r\n\r\n            {trace && trace.ok ? (\r\n              <div className=\"rounded-2xl border border-[var(--v2-border)] bg-[var(--v2-surface-2)] px-3 py-2 text-[13px]\">\r\n                <div className=\"font-semibold text-[var(--v2-text)]\">Verdict: {trace.verdict}</div>\r\n                {trace.diagnostic?.message ? <div className=\"mt-1 text-[var(--v2-muted)]\">{trace.diagnostic.message}</div> : null}\r\n              </div>\r\n            ) : trace && !trace.ok ? (\r\n              <div className=\"rounded-2xl border border-[var(--v2-border)] bg-[var(--down-bg)] px-3 py-2 text-[13px] font-semibold text-[var(--down)]\">\r\n                {trace.message ? trace.message : trace.error}\r\n              </div>\r\n            ) : null}\r\n\r\n            {post && post.ok ? (\r\n              <div className=\"rounded-2xl border border-[var(--v2-border)] bg-[var(--up-bg)] px-3 py-2 text-[13px] font-semibold text-[var(--up)]\">\r\n                {post.credits.length === 0\r\n                  ? \"Processed\"\r\n                  : post.credits.length === 1\r\n                    ? `${post.credits[0]!.outcome === \"duplicate\" ? \"Already credited\" : \"Credited\"}. +${post.credits[0]!.amount} ${post.credits[0]!.asset_symbol}`\r\n                    : `Processed ${post.credits.length} transfers.`}\r\n              </div>\r\n            ) : post && !post.ok ? (\r\n              <div className=\"rounded-2xl border border-[var(--v2-border)] bg-[var(--down-bg)] px-3 py-2 text-[13px] font-semibold text-[var(--down)]\">\r\n                {post.message ? post.message : post.error}\r\n              </div>\r\n            ) : null}\r\n          </div>\r\n          </V2CardBody>\r\n        </V2Card>\r\n      </div>\r\n\r\n      <div id=\"v2-wallet-withdraw\">\r\n        <V2Card>\r\n          <V2CardHeader title=\"Withdraw\" subtitle=\"BSC — allowlisted addresses only\" />\r\n          <V2CardBody>\r\n          {allowlistError ? (\r\n            <div className=\"mb-2 rounded-2xl border border-[var(--v2-border)] bg-[var(--v2-surface-2)] px-3 py-2 text-[12px] text-[var(--v2-muted)]\">\r\n              {allowlistError}\r\n            </div>\r\n          ) : null}\r\n          {withdrawActionError ? (\r\n            <div className=\"mb-2 rounded-2xl border border-[var(--v2-border)] bg-[var(--down-bg)] px-3 py-2 text-[13px] font-semibold text-[var(--down)]\">\r\n              {withdrawActionError}\r\n            </div>\r\n          ) : null}\r\n\r\n          {withdrawResult?.withdrawal?.id ? (\r\n            <div className=\"mb-2 rounded-2xl border border-[var(--v2-border)] bg-[var(--up-bg)] px-3 py-2 text-[13px] font-semibold text-[var(--up)]\">\r\n              Requested. ID {String(withdrawResult.withdrawal.id).slice(0, 8)}…\r\n              {withdrawResult.withdrawal?.fees?.network_fee_display_amount ? (\r\n                <span className=\"ml-2 text-[12px] font-medium text-[var(--v2-muted)]\">\r\n                  Fee {withdrawResult.withdrawal.fees.network_fee_display_amount} {withdrawResult.withdrawal.fees.network_fee_display_symbol}\r\n                </span>\r\n              ) : null}\r\n            </div>\r\n          ) : null}\r\n\r\n          <div className=\"grid gap-2\">\r\n            <div className=\"grid grid-cols-2 gap-2\">\r\n              <button\r\n                type=\"button\"\r\n                onClick={() => setAssetSheetOpen(true)}\r\n                className=\"h-11 rounded-xl border border-[var(--v2-border)] bg-[var(--v2-surface)] px-3 text-left text-[14px] font-semibold text-[var(--v2-text)] shadow-[var(--v2-shadow-sm)]\"\r\n              >\r\n                {selectedAsset ? String(selectedAsset.symbol).toUpperCase() : \"Asset\"}\r\n              </button>\r\n\r\n              <button\r\n                type=\"button\"\r\n                onClick={() => setAddressSheetOpen(true)}\r\n                className=\"h-11 rounded-xl border border-[var(--v2-border)] bg-[var(--v2-surface)] px-3 text-left text-[14px] font-semibold text-[var(--v2-text)] shadow-[var(--v2-shadow-sm)]\"\r\n                title={selectedAddress ?? \"\"}\r\n              >\r\n                {selectedAllow?.label ? selectedAllow.label : selectedAddress ? shortHash(selectedAddress) : \"Destination\"}\r\n              </button>\r\n            </div>\r\n\r\n            <V2Input value={withdrawAmount} onChange={(e) => setWithdrawAmount(e.target.value)} placeholder=\"Amount\" inputMode=\"decimal\" />\r\n            <V2Input value={withdrawReference} onChange={(e) => setWithdrawReference(e.target.value)} placeholder=\"Reference (optional)\" />\r\n            <V2Input value={withdrawTotp} onChange={(e) => setWithdrawTotp(e.target.value)} placeholder=\"2FA code (if required)\" inputMode=\"numeric\" maxLength={6} />\r\n\r\n            <V2Button\r\n              variant=\"primary\"\r\n              fullWidth\r\n              disabled={withdrawing || !selectedAssetId || !selectedAddress || !withdrawAmount.trim()}\r\n              onClick={() => void requestWithdrawal()}\r\n            >\r\n              {withdrawing ? \"Requesting…\" : \"Request withdrawal\"}\r\n            </V2Button>\r\n\r\n            <div className=\"text-[12px] text-[var(--v2-muted)]\">\r\n              Destination must be allowlisted. Some withdrawals require passkey step-up or 2FA.\r\n            </div>\r\n          </div>\r\n          </V2CardBody>\r\n        </V2Card>\r\n      </div>\r\n\r\n      <V2Card>\r\n        <V2CardHeader title=\"Withdrawals\" subtitle=\"Recent\" />\r\n        <V2CardBody>\r\n          {withdrawalsError ? (\r\n            <div className=\"mb-2 rounded-2xl border border-[var(--v2-border)] bg-[var(--v2-surface-2)] px-3 py-2 text-[12px] text-[var(--v2-muted)]\">\r\n              {withdrawalsError}\r\n            </div>\r\n          ) : null}\r\n\r\n          {loading ? (\r\n            <div className=\"grid gap-2\">\r\n              <V2Skeleton className=\"h-14\" />\r\n              <V2Skeleton className=\"h-14\" />\r\n            </div>\r\n          ) : withdrawals.length === 0 ? (\r\n            <div className=\"text-sm text-[var(--v2-muted)]\">No withdrawals yet.</div>\r\n          ) : (\r\n            <div className=\"grid gap-2\">\r\n              {withdrawals.slice(0, 10).map((w) => {\r\n                const status = String(w.status || \"\");\r\n                const canCancel = status === \"requested\";\r\n                return (\r\n                  <div key={w.id} className=\"rounded-2xl border border-[var(--v2-border)] bg-[var(--v2-surface)] px-3 py-3 shadow-[var(--v2-shadow-sm)]\">\r\n                    <div className=\"flex items-start justify-between gap-3\">\r\n                      <div className=\"min-w-0\">\r\n                        <div className=\"text-[13px] font-semibold text-[var(--v2-text)]\">\r\n                          {fmtNum(w.amount)} {String(w.symbol).toUpperCase()}\r\n                        </div>\r\n                        <div className=\"mt-0.5 font-mono text-[11px] text-[var(--v2-muted)]\" title={w.destination_address}>\r\n                          to {shortHash(w.destination_address)}\r\n                        </div>\r\n                        {w.tx_hash ? (\r\n                          <div className=\"mt-0.5 font-mono text-[11px] text-[var(--v2-muted)]\" title={w.tx_hash}>\r\n                            tx {shortHash(w.tx_hash)}\r\n                          </div>\r\n                        ) : null}\r\n                        {w.failure_reason ? (\r\n                          <div className=\"mt-1 text-[12px] font-semibold text-[var(--down)]\">{w.failure_reason}</div>\r\n                        ) : null}\r\n                      </div>\r\n                      <div className=\"text-right\">\r\n                        <div className=\"text-[12px] font-semibold text-[var(--v2-text)]\">{status}</div>\r\n                        {canCancel ? (\r\n                          <div className=\"mt-2\">\r\n                            <V2Button variant=\"secondary\" onClick={() => void cancelWithdrawal(w.id)}>\r\n                              Cancel\r\n                            </V2Button>\r\n                          </div>\r\n                        ) : null}\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                );\r\n              })}\r\n            </div>\r\n          )}\r\n        </V2CardBody>\r\n      </V2Card>\r\n\r\n      <V2Card>\r\n        <V2CardHeader title=\"Balances\" subtitle=\"Available / held\" />\r\n        <V2CardBody>\r\n          {balancesError ? (\r\n            <div className=\"mb-2 rounded-2xl border border-[var(--v2-border)] bg-[var(--v2-surface-2)] px-3 py-2 text-[12px] text-[var(--v2-muted)]\">\r\n              {balancesError}\r\n            </div>\r\n          ) : null}\r\n          {loading ? (\r\n            <div className=\"grid gap-2\">\r\n              <V2Skeleton className=\"h-14\" />\r\n              <V2Skeleton className=\"h-14\" />\r\n            </div>\r\n          ) : nonZeroBalances.length === 0 ? (\r\n            <div className=\"text-sm text-[var(--v2-muted)]\">No balances to display.</div>\r\n          ) : (\r\n            <div className=\"grid gap-2\">\r\n              {nonZeroBalances.slice(0, 30).map((b) => (\r\n                <div key={b.asset_id} className=\"flex items-center justify-between gap-3 rounded-2xl border border-[var(--v2-border)] bg-[var(--v2-surface)] px-3 py-3 shadow-[var(--v2-shadow-sm)]\">\r\n                  <div>\r\n                    <div className=\"text-[15px] font-semibold text-[var(--v2-text)]\">{String(b.symbol).toUpperCase()}</div>\r\n                    <div className=\"mt-0.5 text-[12px] text-[var(--v2-muted)]\">{String(b.chain).toUpperCase()}</div>\r\n                  </div>\r\n                  <div className=\"text-right\">\r\n                    <div className=\"font-mono text-[13px] font-semibold text-[var(--v2-text)]\">{fmtNum(b.available)}</div>\r\n                    <div className=\"mt-0.5 text-[11px] text-[var(--v2-muted)]\">held {fmtNum(b.held)}</div>\r\n                  </div>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          )}\r\n        </V2CardBody>\r\n      </V2Card>\r\n\r\n      <V2Sheet\r\n        open={assetSheetOpen}\r\n        title=\"Select asset\"\r\n        onClose={() => {\r\n          setAssetSheetOpen(false);\r\n          setAssetSearch(\"\");\r\n        }}\r\n      >\r\n        <div className=\"grid gap-2\">\r\n          <V2Input value={assetSearch} onChange={(e) => setAssetSearch(e.target.value)} placeholder=\"Search\" />\r\n          <div className=\"grid gap-2\">\r\n            {filteredAssetRows.slice(0, 50).map((a) => {\r\n              const active = a.id === selectedAssetId;\r\n              return (\r\n                <button\r\n                  key={a.id}\r\n                  type=\"button\"\r\n                  onClick={() => {\r\n                    setSelectedAssetId(a.id);\r\n                    setAssetSheetOpen(false);\r\n                    setAssetSearch(\"\");\r\n                  }}\r\n                  className={\r\n                    \"flex items-center justify-between rounded-2xl border px-3 py-3 text-left shadow-[var(--v2-shadow-sm)] \" +\r\n                    (active\r\n                      ? \"border-[var(--v2-border)] bg-[var(--v2-surface-2)]\"\r\n                      : \"border-[var(--v2-border)] bg-[var(--v2-surface)] hover:bg-[var(--v2-surface-2)]\")\r\n                  }\r\n                >\r\n                  <div>\r\n                    <div className=\"text-[14px] font-semibold text-[var(--v2-text)]\">{String(a.symbol).toUpperCase()}</div>\r\n                    <div className=\"mt-0.5 text-[12px] text-[var(--v2-muted)]\">{a.name ?? \"\"}</div>\r\n                  </div>\r\n                  <div className=\"text-[12px] font-semibold text-[var(--v2-muted)]\">BSC</div>\r\n                </button>\r\n              );\r\n            })}\r\n          </div>\r\n        </div>\r\n      </V2Sheet>\r\n\r\n      <V2Sheet open={addressSheetOpen} title=\"Destination\" onClose={() => setAddressSheetOpen(false)}>\r\n        <div className=\"grid gap-2\">\r\n          <V2Button\r\n            variant=\"primary\"\r\n            fullWidth\r\n            onClick={() => {\r\n              setAddressSheetOpen(false);\r\n              setAllowlistActionError(null);\r\n              setAddAddressSheetOpen(true);\r\n            }}\r\n          >\r\n            Add allowlisted address\r\n          </V2Button>\r\n\r\n          <div className=\"text-[12px] text-[var(--v2-muted)]\">Select an active allowlisted address:</div>\r\n          <div className=\"grid gap-2\">\r\n            {allowlist\r\n              .filter((a) => String(a.chain).toLowerCase() === \"bsc\" && a.status === \"active\")\r\n              .slice(0, 50)\r\n              .map((a) => {\r\n                const active = a.address === selectedAddress;\r\n                return (\r\n                  <button\r\n                    key={a.id}\r\n                    type=\"button\"\r\n                    onClick={() => {\r\n                      setSelectedAddress(a.address);\r\n                      setAddressSheetOpen(false);\r\n                    }}\r\n                    className={\r\n                      \"rounded-2xl border px-3 py-3 text-left shadow-[var(--v2-shadow-sm)] \" +\r\n                      (active\r\n                        ? \"border-[var(--v2-border)] bg-[var(--v2-surface-2)]\"\r\n                        : \"border-[var(--v2-border)] bg-[var(--v2-surface)] hover:bg-[var(--v2-surface-2)]\")\r\n                    }\r\n                  >\r\n                    <div className=\"text-[13px] font-semibold text-[var(--v2-text)]\">{a.label ? a.label : shortHash(a.address)}</div>\r\n                    <div className=\"mt-0.5 font-mono text-[11px] text-[var(--v2-muted)]\">{a.address}</div>\r\n                  </button>\r\n                );\r\n              })}\r\n          </div>\r\n        </div>\r\n      </V2Sheet>\r\n\r\n      <V2Sheet open={addAddressSheetOpen} title=\"Add allowlisted address\" onClose={() => setAddAddressSheetOpen(false)}>\r\n        <div className=\"grid gap-2\">\r\n          {allowlistActionError ? (\r\n            <div className=\"rounded-2xl border border-[var(--v2-border)] bg-[var(--down-bg)] px-3 py-2 text-[13px] font-semibold text-[var(--down)]\">\r\n              {allowlistActionError}\r\n            </div>\r\n          ) : null}\r\n          <V2Input value={newAddress} onChange={(e) => setNewAddress(e.target.value)} placeholder=\"0x… address\" spellCheck={false} autoCapitalize=\"none\" autoCorrect=\"off\" />\r\n          <V2Input value={newLabel} onChange={(e) => setNewLabel(e.target.value)} placeholder=\"Label (optional)\" />\r\n          <V2Input value={newAllowlistTotp} onChange={(e) => setNewAllowlistTotp(e.target.value)} placeholder=\"2FA code (if required)\" inputMode=\"numeric\" maxLength={6} />\r\n          <V2Button variant=\"primary\" fullWidth disabled={addingAllowlist || !newAddress.trim()} onClick={() => void addAllowlist()}>\r\n            {addingAllowlist ? \"Adding…\" : \"Add\"}\r\n          </V2Button>\r\n          <div className=\"text-[12px] text-[var(--v2-muted)]\">May require passkey step-up or 2FA.</div>\r\n        </div>\r\n      </V2Sheet>\r\n    </main>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}