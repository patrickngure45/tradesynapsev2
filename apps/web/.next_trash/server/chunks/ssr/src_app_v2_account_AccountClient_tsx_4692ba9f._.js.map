{"version":3,"sources":["../../../../src/app/v2/account/AccountClient.tsx","../../../../node_modules/%40simplewebauthn/browser/esm/helpers/bufferToBase64URLString.js","../../../../node_modules/%40simplewebauthn/browser/esm/helpers/base64URLStringToBuffer.js","../../../../node_modules/%40simplewebauthn/browser/esm/helpers/browserSupportsWebAuthn.js","../../../../node_modules/%40simplewebauthn/browser/esm/helpers/toPublicKeyCredentialDescriptor.js","../../../../node_modules/%40simplewebauthn/browser/esm/helpers/isValidDomain.js","../../../../node_modules/%40simplewebauthn/browser/esm/helpers/webAuthnError.js","../../../../node_modules/%40simplewebauthn/browser/esm/helpers/identifyRegistrationError.js","../../../../node_modules/%40simplewebauthn/browser/esm/helpers/webAuthnAbortService.js","../../../../node_modules/%40simplewebauthn/browser/esm/helpers/toAuthenticatorAttachment.js","../../../../node_modules/%40simplewebauthn/browser/esm/methods/startRegistration.js","../../../../node_modules/%40simplewebauthn/browser/esm/helpers/browserSupportsWebAuthnAutofill.js","../../../../node_modules/%40simplewebauthn/browser/esm/helpers/identifyAuthenticationError.js","../../../../node_modules/%40simplewebauthn/browser/esm/methods/startAuthentication.js","../../../../node_modules/%40simplewebauthn/browser/esm/helpers/platformAuthenticatorIsAvailable.js"],"sourcesContent":["\"use client\";\r\n\r\nimport Link from \"next/link\";\r\nimport { useEffect, useMemo, useState } from \"react\";\r\nimport { startAuthentication, startRegistration } from \"@simplewebauthn/browser\";\r\n\r\nimport { V2Button, v2ButtonClassName } from \"@/components/v2/Button\";\r\nimport { V2Card, V2CardBody, V2CardHeader } from \"@/components/v2/Card\";\r\nimport { V2Input } from \"@/components/v2/Input\";\r\nimport { V2Sheet } from \"@/components/v2/Sheet\";\r\nimport { V2Skeleton } from \"@/components/v2/Skeleton\";\r\n\r\ntype ProfileUser = {\r\n  id: string;\r\n  email: string | null;\r\n  display_name: string | null;\r\n  role: string;\r\n  status: string;\r\n  kyc_level: string;\r\n  email_verified: boolean;\r\n  totp_enabled: boolean;\r\n  country: string | null;\r\n  created_at: string;\r\n};\r\n\r\ntype ProfileResponse = { user: ProfileUser };\r\n\r\ntype PasskeysResponse = { ok: true; passkeys: Array<{ id: string; name: string | null; created_at: string; last_used_at: string | null }> };\r\n\r\nfunction msgFrom(v: unknown, fallback: string) {\r\n  if (!v || typeof v !== \"object\") return fallback;\r\n  const o = v as Record<string, unknown>;\r\n  const m = o.message;\r\n  const e = o.error;\r\n  if (typeof m === \"string\" && m.trim()) return m;\r\n  if (typeof e === \"string\" && e.trim()) return e;\r\n  return fallback;\r\n}\r\n\r\ntype KycSubmission = {\r\n  id: string;\r\n  document_type: string;\r\n  status: string;\r\n  rejection_reason: string | null;\r\n  submitted_at: string;\r\n};\r\n\r\ntype KycResponse = {\r\n  kyc_level: string;\r\n  submissions: KycSubmission[];\r\n};\r\n\r\ntype KycDocType = \"passport\" | \"national_id\" | \"drivers_license\";\r\n\r\ntype NotificationPrefs = Record<string, { in_app: boolean; email: boolean }>;\r\ntype NotificationPrefsResponse = { prefs: NotificationPrefs; known_types: string[] };\r\n\r\ntype NotificationSchedule = {\r\n  quiet_enabled: boolean;\r\n  quiet_start_min: number;\r\n  quiet_end_min: number;\r\n  tz_offset_min: number;\r\n  digest_enabled: boolean;\r\n  updated_at: string | null;\r\n};\r\n\r\ntype NotificationScheduleResponse = { schedule: NotificationSchedule };\r\n\r\ntype NotificationRow = {\r\n  id: string;\r\n  type: string;\r\n  title: string;\r\n  body: string;\r\n  is_read: boolean;\r\n  created_at: string;\r\n};\r\n\r\ntype NotificationsResponse = { notifications: NotificationRow[]; unread_count: number };\r\n\r\nfunction minToTime(min: number): string {\r\n  const m = Math.max(0, Math.min(1439, Math.trunc(min)));\r\n  const hh = Math.floor(m / 60);\r\n  const mm = m % 60;\r\n  return `${String(hh).padStart(2, \"0\")}:${String(mm).padStart(2, \"0\")}`;\r\n}\r\n\r\nfunction timeToMin(v: string): number {\r\n  const s = String(v || \"\").trim();\r\n  const m = /^([01]\\d|2[0-3]):([0-5]\\d)$/.exec(s);\r\n  if (!m) return 0;\r\n  return Number(m[1]) * 60 + Number(m[2]);\r\n}\r\n\r\nfunction prettyType(t: string): string {\r\n  const s = String(t || \"\").replaceAll(\"_\", \" \").trim();\r\n  return s ? s[0]!.toUpperCase() + s.slice(1) : \"—\";\r\n}\r\n\r\nfunction togglePill(on: boolean, labelOn: string, labelOff: string) {\r\n  return (\r\n    <span\r\n      className={\r\n        \"inline-flex items-center rounded-full border px-2 py-0.5 text-[11px] font-semibold \" +\r\n        (on\r\n          ? \"border-[var(--v2-border)] bg-[var(--up-bg)] text-[var(--up)]\"\r\n          : \"border-[var(--v2-border)] bg-[var(--v2-surface-2)] text-[var(--v2-muted)]\")\r\n      }\r\n    >\r\n      {on ? labelOn : labelOff}\r\n    </span>\r\n  );\r\n}\r\n\r\nfunction pill(ok: boolean, on: string, off: string) {\r\n  return (\r\n    <span\r\n      className={\r\n        \"inline-flex items-center rounded-full border px-2 py-0.5 text-[11px] font-semibold \" +\r\n        (ok\r\n          ? \"border-[var(--v2-border)] bg-[var(--up-bg)] text-[var(--up)]\"\r\n          : \"border-[var(--v2-border)] bg-[var(--v2-surface-2)] text-[var(--v2-muted)]\")\r\n      }\r\n    >\r\n      {ok ? on : off}\r\n    </span>\r\n  );\r\n}\r\n\r\nexport function AccountClient() {\r\n  const [loading, setLoading] = useState(true);\r\n  const [authed, setAuthed] = useState<boolean>(false);\r\n  const [error, setError] = useState<string | null>(null);\r\n\r\n  const [actionStatus, setActionStatus] = useState<{ kind: \"idle\" | \"ok\" | \"error\"; message?: string }>(\r\n    { kind: \"idle\" },\r\n  );\r\n  const [actionLoading, setActionLoading] = useState<null | \"resend_email\" | \"upgrade_kyc\">(null);\r\n\r\n  const [profile, setProfile] = useState<ProfileUser | null>(null);\r\n  const [passkeyCount, setPasskeyCount] = useState<number>(0);\r\n\r\n  const [passkeys, setPasskeys] = useState<PasskeysResponse[\"passkeys\"]>([]);\r\n  const [passkeysSupported, setPasskeysSupported] = useState(false);\r\n  const [passkeySheetOpen, setPasskeySheetOpen] = useState(false);\r\n  const [passkeyBusy, setPasskeyBusy] = useState(false);\r\n  const [passkeyStatus, setPasskeyStatus] = useState<{ kind: \"idle\" | \"ok\" | \"error\"; message?: string }>({ kind: \"idle\" });\r\n\r\n  const [totpSheetOpen, setTotpSheetOpen] = useState(false);\r\n  const [totpStep, setTotpStep] = useState<\"idle\" | \"setup\" | \"backup\">(\"idle\");\r\n  const [totpSecret, setTotpSecret] = useState<string>(\"\");\r\n  const [totpUri, setTotpUri] = useState<string>(\"\");\r\n  const [totpCode, setTotpCode] = useState<string>(\"\");\r\n  const [totpDisableCode, setTotpDisableCode] = useState<string>(\"\");\r\n  const [totpBackupCodes, setTotpBackupCodes] = useState<string[]>([]);\r\n  const [totpBusy, setTotpBusy] = useState<null | \"setup\" | \"enable\" | \"disable\">(null);\r\n  const [totpStatus, setTotpStatus] = useState<{ kind: \"idle\" | \"ok\" | \"error\"; message?: string }>({ kind: \"idle\" });\r\n\r\n  const [passwordSheetOpen, setPasswordSheetOpen] = useState(false);\r\n  const [pwCurrent, setPwCurrent] = useState<string>(\"\");\r\n  const [pwNew, setPwNew] = useState<string>(\"\");\r\n  const [pwConfirm, setPwConfirm] = useState<string>(\"\");\r\n  const [pwTotpCode, setPwTotpCode] = useState<string>(\"\");\r\n  const [pwBusy, setPwBusy] = useState(false);\r\n  const [pwStatus, setPwStatus] = useState<{ kind: \"idle\" | \"ok\" | \"error\"; message?: string }>({ kind: \"idle\" });\r\n\r\n  const [logoutAllBusy, setLogoutAllBusy] = useState(false);\r\n  const [logoutAllStatus, setLogoutAllStatus] = useState<{ kind: \"idle\" | \"ok\" | \"error\"; message?: string }>({ kind: \"idle\" });\r\n\r\n  const [kyc, setKyc] = useState<KycResponse | null>(null);\r\n  const [kycError, setKycError] = useState<string | null>(null);\r\n\r\n  const [kycSheetOpen, setKycSheetOpen] = useState(false);\r\n  const [docType, setDocType] = useState<KycDocType>(\"passport\");\r\n  const [frontFile, setFrontFile] = useState<File | null>(null);\r\n  const [backFile, setBackFile] = useState<File | null>(null);\r\n  const [selfieFile, setSelfieFile] = useState<File | null>(null);\r\n  const [kycSubmitLoading, setKycSubmitLoading] = useState(false);\r\n  const [kycSubmitStatus, setKycSubmitStatus] = useState<{ kind: \"idle\" | \"ok\" | \"error\"; message?: string }>(\r\n    { kind: \"idle\" },\r\n  );\r\n\r\n  const [notifPrefs, setNotifPrefs] = useState<NotificationPrefs | null>(null);\r\n  const [notifPrefsKnown, setNotifPrefsKnown] = useState<string[]>([]);\r\n  const [notifSchedule, setNotifSchedule] = useState<NotificationSchedule | null>(null);\r\n  const [notifError, setNotifError] = useState<string | null>(null);\r\n\r\n  const [prefsSheetOpen, setPrefsSheetOpen] = useState(false);\r\n  const [scheduleSheetOpen, setScheduleSheetOpen] = useState(false);\r\n  const [notifSaving, setNotifSaving] = useState<null | \"prefs\" | \"schedule\">(null);\r\n  const [notifStatus, setNotifStatus] = useState<{ kind: \"idle\" | \"ok\" | \"error\"; message?: string }>({ kind: \"idle\" });\r\n\r\n  const [inboxOpen, setInboxOpen] = useState(false);\r\n  const [inboxLoading, setInboxLoading] = useState(false);\r\n  const [inboxError, setInboxError] = useState<string | null>(null);\r\n  const [notifications, setNotifications] = useState<NotificationRow[]>([]);\r\n  const [unreadCount, setUnreadCount] = useState<number>(0);\r\n\r\n  const load = async () => {\r\n    setError(null);\r\n    setKycError(null);\r\n    setNotifError(null);\r\n    try {\r\n      const profileRes = await fetch(\"/api/account/profile\", { cache: \"no-store\", credentials: \"include\" });\r\n      if (!profileRes.ok) {\r\n        setAuthed(false);\r\n        setProfile(null);\r\n        setPasskeyCount(0);\r\n        setKyc(null);\r\n        setNotifPrefs(null);\r\n        setNotifSchedule(null);\r\n        return;\r\n      }\r\n      const profileJson = (await profileRes.json().catch(() => null)) as ProfileResponse | null;\r\n      if (!profileJson?.user?.id) {\r\n        setAuthed(false);\r\n        setProfile(null);\r\n        setPasskeyCount(0);\r\n        return;\r\n      }\r\n      setAuthed(true);\r\n      setProfile(profileJson.user);\r\n\r\n      // Clear transient action messages once we have fresh profile state.\r\n      setActionStatus({ kind: \"idle\" });\r\n\r\n      const passkeysRes = await fetch(\"/api/account/passkeys\", { cache: \"no-store\", credentials: \"include\" }).catch(() => null as any);\r\n      if (passkeysRes && passkeysRes.ok) {\r\n        const passkeysJson = (await passkeysRes.json().catch(() => null)) as PasskeysResponse | null;\r\n        const rows = Array.isArray(passkeysJson?.passkeys) ? passkeysJson!.passkeys : [];\r\n        setPasskeys(rows);\r\n        setPasskeyCount(rows.length);\r\n      } else {\r\n        setPasskeys([]);\r\n        setPasskeyCount(0);\r\n      }\r\n\r\n      const kycRes = await fetch(\"/api/account/kyc\", { cache: \"no-store\", credentials: \"include\" }).catch(() => null as any);\r\n      if (kycRes && kycRes.ok) {\r\n        const kycJson = (await kycRes.json().catch(() => null)) as KycResponse | null;\r\n        if (kycJson && typeof kycJson.kyc_level === \"string\" && Array.isArray(kycJson.submissions)) {\r\n          setKyc(kycJson);\r\n        } else {\r\n          setKyc(null);\r\n        }\r\n      } else {\r\n        setKyc(null);\r\n        if (kycRes && typeof kycRes.status === \"number\") setKycError(`KYC unavailable (HTTP ${kycRes.status}).`);\r\n      }\r\n\r\n      const [prefsRes, schedRes] = await Promise.all([\r\n        fetch(\"/api/account/notification-preferences\", { cache: \"no-store\", credentials: \"include\" }).catch(() => null as any),\r\n        fetch(\"/api/account/notification-schedule\", { cache: \"no-store\", credentials: \"include\" }).catch(() => null as any),\r\n      ]);\r\n\r\n      if (prefsRes && prefsRes.ok) {\r\n        const prefsJson = (await prefsRes.json().catch(() => null)) as NotificationPrefsResponse | null;\r\n        if (prefsJson && prefsJson.prefs && typeof prefsJson.prefs === \"object\") {\r\n          setNotifPrefs(prefsJson.prefs);\r\n          setNotifPrefsKnown(Array.isArray(prefsJson.known_types) ? prefsJson.known_types.map(String) : []);\r\n        } else {\r\n          setNotifPrefs(null);\r\n        }\r\n      } else {\r\n        setNotifPrefs(null);\r\n        if (prefsRes && typeof prefsRes.status === \"number\") setNotifError(`Notifications unavailable (HTTP ${prefsRes.status}).`);\r\n      }\r\n\r\n      if (schedRes && schedRes.ok) {\r\n        const schedJson = (await schedRes.json().catch(() => null)) as NotificationScheduleResponse | null;\r\n        if (schedJson?.schedule) setNotifSchedule(schedJson.schedule);\r\n        else setNotifSchedule(null);\r\n      } else {\r\n        setNotifSchedule(null);\r\n      }\r\n\r\n      // Best-effort unread count for the Notifications card.\r\n      const notifRes = await fetch(\"/api/notifications?limit=1\", { cache: \"no-store\", credentials: \"include\" }).catch(() => null as any);\r\n      if (notifRes && notifRes.ok) {\r\n        const notifJson = (await notifRes.json().catch(() => null)) as NotificationsResponse | null;\r\n        if (notifJson && typeof notifJson.unread_count === \"number\") setUnreadCount(notifJson.unread_count);\r\n      }\r\n    } catch (e) {\r\n      setError(e instanceof Error ? e.message : String(e));\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const loadInbox = async () => {\r\n    setInboxError(null);\r\n    setInboxLoading(true);\r\n    try {\r\n      const res = await fetch(\"/api/notifications?limit=50\", { cache: \"no-store\", credentials: \"include\" });\r\n      const json = (await res.json().catch(() => null)) as NotificationsResponse | null;\r\n      if (!res.ok) {\r\n        const msg = (json as any)?.message || (json as any)?.error;\r\n        throw new Error(typeof msg === \"string\" && msg.length ? msg : `http_${res.status}`);\r\n      }\r\n      setNotifications(Array.isArray(json?.notifications) ? json!.notifications : []);\r\n      setUnreadCount(typeof json?.unread_count === \"number\" ? json.unread_count : 0);\r\n    } catch (e) {\r\n      setInboxError(e instanceof Error ? e.message : String(e));\r\n    } finally {\r\n      setInboxLoading(false);\r\n    }\r\n  };\r\n\r\n  const markAllRead = async () => {\r\n    setInboxError(null);\r\n    try {\r\n      await fetch(\"/api/notifications\", {\r\n        method: \"POST\",\r\n        credentials: \"include\",\r\n        headers: { \"content-type\": \"application/json\" },\r\n        body: JSON.stringify({ mark_all_read: true }),\r\n      });\r\n    } finally {\r\n      await loadInbox();\r\n    }\r\n  };\r\n\r\n  const markOneRead = async (id: string) => {\r\n    if (!id) return;\r\n    setInboxError(null);\r\n    try {\r\n      await fetch(\"/api/notifications\", {\r\n        method: \"POST\",\r\n        credentials: \"include\",\r\n        headers: { \"content-type\": \"application/json\" },\r\n        body: JSON.stringify({ ids: [id] }),\r\n      });\r\n    } finally {\r\n      setNotifications((rows) => rows.map((r) => (r.id === id ? { ...r, is_read: true } : r)));\r\n      setUnreadCount((n) => Math.max(0, n - 1));\r\n      void loadInbox();\r\n    }\r\n  };\r\n\r\n  const setPref = (type: string, patch: Partial<{ in_app: boolean; email: boolean }>) => {\r\n    setNotifPrefs((prev) => {\r\n      if (!prev) return prev;\r\n      const cur = prev[type] ?? { in_app: true, email: false };\r\n      return { ...prev, [type]: { ...cur, ...patch } };\r\n    });\r\n  };\r\n\r\n  const savePrefs = async () => {\r\n    if (!notifPrefs) return;\r\n    setNotifStatus({ kind: \"idle\" });\r\n    setNotifSaving(\"prefs\");\r\n    try {\r\n      const res = await fetch(\"/api/account/notification-preferences\", {\r\n        method: \"PUT\",\r\n        credentials: \"include\",\r\n        headers: { \"content-type\": \"application/json\" },\r\n        body: JSON.stringify({ prefs: notifPrefs }),\r\n      });\r\n      const json = (await res.json().catch(() => null)) as any;\r\n      if (!res.ok) {\r\n        const msg = json?.message || json?.error;\r\n        setNotifStatus({ kind: \"error\", message: typeof msg === \"string\" && msg.length ? msg : `Failed (HTTP ${res.status}).` });\r\n        return;\r\n      }\r\n      setNotifStatus({ kind: \"ok\", message: \"Preferences saved.\" });\r\n      setPrefsSheetOpen(false);\r\n    } catch (e) {\r\n      setNotifStatus({ kind: \"error\", message: e instanceof Error ? e.message : String(e) });\r\n    } finally {\r\n      setNotifSaving(null);\r\n    }\r\n  };\r\n\r\n  const saveSchedule = async () => {\r\n    if (!notifSchedule) return;\r\n    setNotifStatus({ kind: \"idle\" });\r\n    setNotifSaving(\"schedule\");\r\n    try {\r\n      const res = await fetch(\"/api/account/notification-schedule\", {\r\n        method: \"PUT\",\r\n        credentials: \"include\",\r\n        headers: { \"content-type\": \"application/json\" },\r\n        body: JSON.stringify({\r\n          quiet_enabled: !!notifSchedule.quiet_enabled,\r\n          quiet_start_min: Math.max(0, Math.min(1439, Math.trunc(notifSchedule.quiet_start_min))),\r\n          quiet_end_min: Math.max(0, Math.min(1439, Math.trunc(notifSchedule.quiet_end_min))),\r\n          tz_offset_min: Math.max(-840, Math.min(840, Math.trunc(notifSchedule.tz_offset_min))),\r\n          digest_enabled: !!notifSchedule.digest_enabled,\r\n        }),\r\n      });\r\n      const json = (await res.json().catch(() => null)) as any;\r\n      if (!res.ok) {\r\n        const msg = json?.message || json?.error;\r\n        setNotifStatus({ kind: \"error\", message: typeof msg === \"string\" && msg.length ? msg : `Failed (HTTP ${res.status}).` });\r\n        return;\r\n      }\r\n      setNotifStatus({ kind: \"ok\", message: \"Schedule saved.\" });\r\n      setScheduleSheetOpen(false);\r\n      await load();\r\n    } catch (e) {\r\n      setNotifStatus({ kind: \"error\", message: e instanceof Error ? e.message : String(e) });\r\n    } finally {\r\n      setNotifSaving(null);\r\n    }\r\n  };\r\n\r\n  const readFileAsDataUrl = (file: File): Promise<string> => {\r\n    return new Promise((resolve, reject) => {\r\n      const reader = new FileReader();\r\n      reader.onerror = () => reject(new Error(\"file_read_failed\"));\r\n      reader.onload = () => resolve(String(reader.result ?? \"\"));\r\n      reader.readAsDataURL(file);\r\n    });\r\n  };\r\n\r\n  const submitKycDocuments = async () => {\r\n    setKycSubmitStatus({ kind: \"idle\" });\r\n    if (!frontFile) {\r\n      setKycSubmitStatus({ kind: \"error\", message: \"Front image is required.\" });\r\n      return;\r\n    }\r\n\r\n    // Keep this conservative: base64 expands size; route enforces 2,000,000 chars.\r\n    const maxBytes = 900_000;\r\n    if (frontFile.size > maxBytes || (backFile && backFile.size > maxBytes) || (selfieFile && selfieFile.size > maxBytes)) {\r\n      setKycSubmitStatus({ kind: \"error\", message: \"Image too large. Use smaller files (≤ 900KB each).\" });\r\n      return;\r\n    }\r\n\r\n    setKycSubmitLoading(true);\r\n    try {\r\n      const document_front = await readFileAsDataUrl(frontFile);\r\n      const document_back = backFile ? await readFileAsDataUrl(backFile) : undefined;\r\n      const selfie = selfieFile ? await readFileAsDataUrl(selfieFile) : undefined;\r\n\r\n      const res = await fetch(\"/api/account/kyc\", {\r\n        method: \"POST\",\r\n        credentials: \"include\",\r\n        headers: { \"content-type\": \"application/json\" },\r\n        body: JSON.stringify({\r\n          action: \"submit_documents\",\r\n          document_type: docType,\r\n          document_front,\r\n          document_back,\r\n          selfie,\r\n        }),\r\n      });\r\n      const json = (await res.json().catch(() => null)) as any;\r\n      if (!res.ok) {\r\n        const msg = json?.details?.message || json?.message || json?.error;\r\n        setKycSubmitStatus({ kind: \"error\", message: typeof msg === \"string\" && msg.length ? msg : `Failed (HTTP ${res.status}).` });\r\n        return;\r\n      }\r\n\r\n      setKycSubmitStatus({ kind: \"ok\", message: String(json?.message ?? \"Documents submitted\") });\r\n      setFrontFile(null);\r\n      setBackFile(null);\r\n      setSelfieFile(null);\r\n      setKycSheetOpen(false);\r\n      await load();\r\n    } catch (e) {\r\n      setKycSubmitStatus({ kind: \"error\", message: e instanceof Error ? e.message : String(e) });\r\n    } finally {\r\n      setKycSubmitLoading(false);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    void load();\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    setPasskeysSupported(typeof window !== \"undefined\" && typeof window.PublicKeyCredential !== \"undefined\");\r\n  }, []);\r\n\r\n  const refreshPasskeys = async () => {\r\n    try {\r\n      const res = await fetch(\"/api/account/passkeys\", { cache: \"no-store\", credentials: \"include\" });\r\n      if (!res.ok) return;\r\n      const json = (await res.json().catch(() => null)) as PasskeysResponse | null;\r\n      const rows = Array.isArray(json?.passkeys) ? json!.passkeys : [];\r\n      setPasskeys(rows);\r\n      setPasskeyCount(rows.length);\r\n    } catch {\r\n      // ignore\r\n    }\r\n  };\r\n\r\n  const addPasskey = async () => {\r\n    setPasskeyStatus({ kind: \"idle\" });\r\n    if (!passkeysSupported) {\r\n      setPasskeyStatus({ kind: \"error\", message: \"Passkeys aren’t supported in this browser/device.\" });\r\n      return;\r\n    }\r\n\r\n    const name = (window.prompt(\"Name this passkey (optional)\", \"This device\") ?? \"\").trim();\r\n\r\n    setPasskeyBusy(true);\r\n    try {\r\n      const optRes = await fetch(\"/api/account/passkeys/register/options\", {\r\n        method: \"POST\",\r\n        credentials: \"include\",\r\n        headers: { \"content-type\": \"application/json\" },\r\n        body: JSON.stringify(name ? { name } : {}),\r\n      });\r\n      const optJson = (await optRes.json().catch(() => ({}))) as any;\r\n      if (!optRes.ok) {\r\n        setPasskeyStatus({ kind: \"error\", message: msgFrom(optJson, \"Failed to start passkey registration\") });\r\n        return;\r\n      }\r\n\r\n      const regOptions = optJson?.options;\r\n      if (!regOptions) {\r\n        setPasskeyStatus({ kind: \"error\", message: \"Invalid passkey registration options\" });\r\n        return;\r\n      }\r\n\r\n      const attResp = await startRegistration(regOptions as Parameters<typeof startRegistration>[0]);\r\n      const verRes = await fetch(\"/api/account/passkeys/register/verify\", {\r\n        method: \"POST\",\r\n        credentials: \"include\",\r\n        headers: { \"content-type\": \"application/json\" },\r\n        body: JSON.stringify({ name: name || undefined, response: attResp }),\r\n      });\r\n      const verJson = (await verRes.json().catch(() => ({}))) as any;\r\n      if (!verRes.ok) {\r\n        setPasskeyStatus({ kind: \"error\", message: msgFrom(verJson, \"Passkey verification failed\") });\r\n        return;\r\n      }\r\n\r\n      setPasskeyStatus({ kind: \"ok\", message: \"Passkey added.\" });\r\n      await refreshPasskeys();\r\n      await load();\r\n    } catch (e) {\r\n      setPasskeyStatus({ kind: \"error\", message: e instanceof Error ? e.message : \"Passkey registration canceled\" });\r\n    } finally {\r\n      setPasskeyBusy(false);\r\n    }\r\n  };\r\n\r\n  const confirmPasskey = async () => {\r\n    setPasskeyStatus({ kind: \"idle\" });\r\n    if (!passkeysSupported) {\r\n      setPasskeyStatus({ kind: \"error\", message: \"Passkeys aren’t supported in this browser/device.\" });\r\n      return;\r\n    }\r\n\r\n    setPasskeyBusy(true);\r\n    try {\r\n      const optRes = await fetch(\"/api/account/passkeys/authenticate/options\", {\r\n        method: \"POST\",\r\n        credentials: \"include\",\r\n      });\r\n      const optJson = (await optRes.json().catch(() => ({}))) as any;\r\n      if (!optRes.ok) {\r\n        setPasskeyStatus({ kind: \"error\", message: msgFrom(optJson, \"Failed to start passkey confirmation\") });\r\n        return;\r\n      }\r\n      const authOptions = optJson?.options;\r\n      if (!authOptions) {\r\n        setPasskeyStatus({ kind: \"error\", message: \"Invalid passkey authentication options\" });\r\n        return;\r\n      }\r\n\r\n      const asrt = await startAuthentication(authOptions as Parameters<typeof startAuthentication>[0]);\r\n      const verRes = await fetch(\"/api/account/passkeys/authenticate/verify\", {\r\n        method: \"POST\",\r\n        credentials: \"include\",\r\n        headers: { \"content-type\": \"application/json\" },\r\n        body: JSON.stringify({ response: asrt }),\r\n      });\r\n      const verJson = (await verRes.json().catch(() => ({}))) as any;\r\n      if (!verRes.ok) {\r\n        setPasskeyStatus({ kind: \"error\", message: msgFrom(verJson, \"Passkey verification failed\") });\r\n        return;\r\n      }\r\n\r\n      setPasskeyStatus({ kind: \"ok\", message: \"Passkey confirmed (valid for a few minutes).\" });\r\n      await refreshPasskeys();\r\n      await load();\r\n    } catch (e) {\r\n      setPasskeyStatus({ kind: \"error\", message: e instanceof Error ? e.message : \"Passkey confirmation canceled\" });\r\n    } finally {\r\n      setPasskeyBusy(false);\r\n    }\r\n  };\r\n\r\n  const totpSetup = async () => {\r\n    setTotpStatus({ kind: \"idle\" });\r\n    setTotpBusy(\"setup\");\r\n    try {\r\n      const res = await fetch(\"/api/account/totp/setup\", { method: \"POST\", credentials: \"include\" });\r\n      const json = (await res.json().catch(() => ({}))) as any;\r\n      if (!res.ok) {\r\n        setTotpStatus({ kind: \"error\", message: msgFrom(json, \"Setup failed\") });\r\n        return;\r\n      }\r\n      setTotpSecret(String(json?.secret ?? \"\"));\r\n      setTotpUri(String(json?.uri ?? \"\"));\r\n      setTotpStep(\"setup\");\r\n    } catch (e) {\r\n      setTotpStatus({ kind: \"error\", message: e instanceof Error ? e.message : \"Network error\" });\r\n    } finally {\r\n      setTotpBusy(null);\r\n    }\r\n  };\r\n\r\n  const totpEnable = async () => {\r\n    setTotpStatus({ kind: \"idle\" });\r\n    setTotpBusy(\"enable\");\r\n    try {\r\n      const res = await fetch(\"/api/account/totp/enable\", {\r\n        method: \"POST\",\r\n        credentials: \"include\",\r\n        headers: { \"content-type\": \"application/json\" },\r\n        body: JSON.stringify({ code: totpCode }),\r\n      });\r\n      const json = (await res.json().catch(() => ({}))) as any;\r\n      if (!res.ok) {\r\n        const msg = json?.error === \"invalid_totp_code\" ? \"Invalid code — try again\" : msgFrom(json, \"Failed\");\r\n        setTotpStatus({ kind: \"error\", message: msg });\r\n        return;\r\n      }\r\n      setTotpBackupCodes(Array.isArray(json?.backup_codes) ? json.backup_codes.map(String) : []);\r\n      setTotpStep(\"backup\");\r\n      setTotpCode(\"\");\r\n      setTotpStatus({ kind: \"ok\", message: \"2FA enabled.\" });\r\n      await load();\r\n    } catch (e) {\r\n      setTotpStatus({ kind: \"error\", message: e instanceof Error ? e.message : \"Network error\" });\r\n    } finally {\r\n      setTotpBusy(null);\r\n    }\r\n  };\r\n\r\n  const totpDisable = async () => {\r\n    setTotpStatus({ kind: \"idle\" });\r\n    setTotpBusy(\"disable\");\r\n    try {\r\n      const res = await fetch(\"/api/account/totp/disable\", {\r\n        method: \"POST\",\r\n        credentials: \"include\",\r\n        headers: { \"content-type\": \"application/json\" },\r\n        body: JSON.stringify({ code: totpDisableCode }),\r\n      });\r\n      const json = (await res.json().catch(() => ({}))) as any;\r\n      if (!res.ok) {\r\n        const msg = json?.error === \"invalid_totp_code\" ? \"Invalid code\" : msgFrom(json, \"Failed\");\r\n        setTotpStatus({ kind: \"error\", message: msg });\r\n        return;\r\n      }\r\n      setTotpDisableCode(\"\");\r\n      setTotpSecret(\"\");\r\n      setTotpUri(\"\");\r\n      setTotpBackupCodes([]);\r\n      setTotpStep(\"idle\");\r\n      setTotpStatus({ kind: \"ok\", message: \"2FA disabled.\" });\r\n      await load();\r\n    } catch (e) {\r\n      setTotpStatus({ kind: \"error\", message: e instanceof Error ? e.message : \"Network error\" });\r\n    } finally {\r\n      setTotpBusy(null);\r\n    }\r\n  };\r\n\r\n  const copyToClipboard = async (text: string) => {\r\n    const v = String(text || \"\").trim();\r\n    if (!v) return;\r\n    try {\r\n      await navigator.clipboard.writeText(v);\r\n    } catch {\r\n      // ignore\r\n    }\r\n  };\r\n\r\n  const changePassword = async () => {\r\n    setPwStatus({ kind: \"idle\" });\r\n    const a = pwNew;\r\n    if (a.length < 8) {\r\n      setPwStatus({ kind: \"error\", message: \"New password must be at least 8 characters.\" });\r\n      return;\r\n    }\r\n    if (pwNew !== pwConfirm) {\r\n      setPwStatus({ kind: \"error\", message: \"Passwords do not match.\" });\r\n      return;\r\n    }\r\n\r\n    setPwBusy(true);\r\n    try {\r\n      const body: any = { currentPassword: pwCurrent, newPassword: pwNew };\r\n      if (String(pwTotpCode || \"\").trim().length === 6) body.totp_code = pwTotpCode;\r\n      const res = await fetch(\"/api/account/password\", {\r\n        method: \"POST\",\r\n        credentials: \"include\",\r\n        headers: { \"content-type\": \"application/json\" },\r\n        body: JSON.stringify(body),\r\n      });\r\n      const json = (await res.json().catch(() => ({}))) as any;\r\n      if (!res.ok) {\r\n        const msg =\r\n          json?.error === \"invalid_current_password\"\r\n            ? \"Current password is incorrect\"\r\n            : json?.error === \"totp_required\"\r\n              ? \"Enter your 2FA code\"\r\n              : json?.error === \"invalid_totp_code\"\r\n                ? \"Invalid 2FA code\"\r\n                : msgFrom(json, \"Failed to update password\");\r\n        setPwStatus({ kind: \"error\", message: msg });\r\n        return;\r\n      }\r\n      setPwStatus({ kind: \"ok\", message: \"Password updated.\" });\r\n      setPwCurrent(\"\");\r\n      setPwNew(\"\");\r\n      setPwConfirm(\"\");\r\n      setPwTotpCode(\"\");\r\n    } catch (e) {\r\n      setPwStatus({ kind: \"error\", message: e instanceof Error ? e.message : \"Network error\" });\r\n    } finally {\r\n      setPwBusy(false);\r\n    }\r\n  };\r\n\r\n  const logoutAllDevices = async () => {\r\n    if (logoutAllBusy) return;\r\n    setLogoutAllStatus({ kind: \"idle\" });\r\n    const ok = window.confirm(\"Log out all devices? You will be signed out everywhere.\");\r\n    if (!ok) return;\r\n\r\n    setLogoutAllBusy(true);\r\n    try {\r\n      const res = await fetch(\"/api/account/sessions/logout-all\", { method: \"POST\", credentials: \"include\" });\r\n      const json = (await res.json().catch(() => ({}))) as any;\r\n      if (!res.ok) {\r\n        setLogoutAllStatus({ kind: \"error\", message: msgFrom(json, \"Failed to log out all devices\") });\r\n        return;\r\n      }\r\n      setLogoutAllStatus({ kind: \"ok\", message: \"Logged out on all devices.\" });\r\n      window.location.href = \"/login\";\r\n    } catch (e) {\r\n      setLogoutAllStatus({ kind: \"error\", message: e instanceof Error ? e.message : \"Network error\" });\r\n    } finally {\r\n      setLogoutAllBusy(false);\r\n    }\r\n  };\r\n\r\n  const title = useMemo(() => {\r\n    if (!profile) return \"Account\";\r\n    const email = String(profile.email ?? \"\").trim();\r\n    if (email) return email;\r\n    return profile.display_name ? String(profile.display_name) : \"Account\";\r\n  }, [profile]);\r\n\r\n  const signOut = async () => {\r\n    try {\r\n      await fetch(\"/api/auth/logout\", { method: \"POST\", credentials: \"include\" });\r\n    } finally {\r\n      window.location.href = \"/v2\";\r\n    }\r\n  };\r\n\r\n  const resendVerificationEmail = async () => {\r\n    setActionStatus({ kind: \"idle\" });\r\n    setActionLoading(\"resend_email\");\r\n    try {\r\n      const res = await fetch(\"/api/account/verify-email\", {\r\n        method: \"POST\",\r\n        credentials: \"include\",\r\n        headers: { \"content-type\": \"application/json\" },\r\n        body: JSON.stringify({ action: \"resend\" }),\r\n      });\r\n      const json = (await res.json().catch(() => null)) as any;\r\n      if (!res.ok) {\r\n        const msg = json?.details?.message || json?.message || json?.error;\r\n        setActionStatus({ kind: \"error\", message: typeof msg === \"string\" && msg.length ? msg : `Failed (HTTP ${res.status}).` });\r\n        return;\r\n      }\r\n      setActionStatus({ kind: \"ok\", message: String(json?.message ?? \"Verification email sent\") });\r\n    } catch (e) {\r\n      setActionStatus({ kind: \"error\", message: e instanceof Error ? e.message : String(e) });\r\n    } finally {\r\n      setActionLoading(null);\r\n    }\r\n  };\r\n\r\n  const upgradeKyc = async () => {\r\n    setActionStatus({ kind: \"idle\" });\r\n    setActionLoading(\"upgrade_kyc\");\r\n    try {\r\n      const res = await fetch(\"/api/account/kyc\", {\r\n        method: \"POST\",\r\n        credentials: \"include\",\r\n        headers: { \"content-type\": \"application/json\" },\r\n        body: JSON.stringify({ action: \"upgrade\" }),\r\n      });\r\n      const json = (await res.json().catch(() => null)) as any;\r\n      if (!res.ok) {\r\n        const msg = json?.details?.message || json?.message || json?.error;\r\n        setActionStatus({ kind: \"error\", message: typeof msg === \"string\" && msg.length ? msg : `Failed (HTTP ${res.status}).` });\r\n        return;\r\n      }\r\n      setActionStatus({ kind: \"ok\", message: `KYC upgraded to ${String(json?.kyc_level ?? \"basic\")}.` });\r\n      await load();\r\n    } catch (e) {\r\n      setActionStatus({ kind: \"error\", message: e instanceof Error ? e.message : String(e) });\r\n    } finally {\r\n      setActionLoading(null);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <main className=\"space-y-4\">\r\n      <header className=\"space-y-2\">\r\n        <div className=\"text-[11px] font-bold uppercase tracking-widest text-[var(--v2-muted)]\">Account</div>\r\n        <h1 className=\"text-2xl font-extrabold tracking-tight\">{title}</h1>\r\n        <p className=\"text-sm text-[var(--v2-muted)]\">Security & verification status.</p>\r\n      </header>\r\n\r\n      {error ? (\r\n        <V2Card>\r\n          <V2CardHeader title=\"Account unavailable\" subtitle=\"Try again\" />\r\n          <V2CardBody>\r\n            <div className=\"text-sm text-[var(--v2-muted)]\">{error}</div>\r\n            <div className=\"mt-3\">\r\n              <V2Button variant=\"primary\" fullWidth onClick={() => void load()}>\r\n                Retry\r\n              </V2Button>\r\n            </div>\r\n          </V2CardBody>\r\n        </V2Card>\r\n      ) : null}\r\n\r\n      <V2Card>\r\n        <V2CardHeader title=\"Session\" subtitle=\"Signed-in status\" />\r\n        <V2CardBody>\r\n          {loading ? (\r\n            <V2Skeleton className=\"h-14\" />\r\n          ) : authed && profile ? (\r\n            <div className=\"space-y-2\">\r\n              <div className=\"flex flex-wrap items-center gap-2\">\r\n                {pill(profile.email_verified, \"Email verified\", \"Email unverified\")}\r\n                {pill(profile.totp_enabled, \"2FA on\", \"2FA off\")}\r\n                {pill(passkeyCount > 0, `Passkeys ${passkeyCount}`, \"No passkeys\")}\r\n                {pill(profile.kyc_level === \"full\", \"KYC full\", `KYC ${profile.kyc_level}`)}\r\n              </div>\r\n\r\n              {actionStatus.kind === \"ok\" ? (\r\n                <div className=\"rounded-2xl border border-[var(--v2-border)] bg-[var(--up-bg)] px-3 py-2 text-[13px] font-semibold text-[var(--up)]\">\r\n                  {actionStatus.message}\r\n                </div>\r\n              ) : actionStatus.kind === \"error\" ? (\r\n                <div className=\"rounded-2xl border border-[var(--v2-border)] bg-[var(--down-bg)] px-3 py-2 text-[13px] font-semibold text-[var(--down)]\">\r\n                  {actionStatus.message}\r\n                </div>\r\n              ) : null}\r\n\r\n              {!profile.email_verified ? (\r\n                <V2Button\r\n                  variant=\"primary\"\r\n                  fullWidth\r\n                  disabled={actionLoading !== null}\r\n                  onClick={() => void resendVerificationEmail()}\r\n                >\r\n                  {actionLoading === \"resend_email\" ? \"Sending…\" : \"Resend verification email\"}\r\n                </V2Button>\r\n              ) : null}\r\n\r\n              {profile.email_verified && profile.kyc_level === \"none\" ? (\r\n                <V2Button\r\n                  variant=\"secondary\"\r\n                  fullWidth\r\n                  disabled={actionLoading !== null}\r\n                  onClick={() => void upgradeKyc()}\r\n                >\r\n                  {actionLoading === \"upgrade_kyc\" ? \"Upgrading…\" : \"Upgrade KYC to Basic\"}\r\n                </V2Button>\r\n              ) : null}\r\n\r\n              <div className=\"grid grid-cols-2 gap-2\">\r\n                <V2Button\r\n                  variant=\"secondary\"\r\n                  fullWidth\r\n                  onClick={() => {\r\n                    setPasskeyStatus({ kind: \"idle\" });\r\n                    setPasskeySheetOpen(true);\r\n                    void refreshPasskeys();\r\n                  }}\r\n                >\r\n                  Passkeys\r\n                </V2Button>\r\n                <V2Button\r\n                  variant=\"secondary\"\r\n                  fullWidth\r\n                  onClick={() => {\r\n                    setTotpStatus({ kind: \"idle\" });\r\n                    setTotpStep(\"idle\");\r\n                    setTotpSecret(\"\");\r\n                    setTotpUri(\"\");\r\n                    setTotpBackupCodes([]);\r\n                    setTotpCode(\"\");\r\n                    setTotpDisableCode(\"\");\r\n                    setTotpSheetOpen(true);\r\n                  }}\r\n                >\r\n                  2FA (TOTP)\r\n                </V2Button>\r\n                <V2Button\r\n                  variant=\"secondary\"\r\n                  fullWidth\r\n                  onClick={() => {\r\n                    setPwStatus({ kind: \"idle\" });\r\n                    setPasswordSheetOpen(true);\r\n                  }}\r\n                >\r\n                  Change password\r\n                </V2Button>\r\n                <V2Button variant=\"secondary\" fullWidth disabled={logoutAllBusy} onClick={() => void logoutAllDevices()}>\r\n                  {logoutAllBusy ? \"Working…\" : \"Log out all\"}\r\n                </V2Button>\r\n              </div>\r\n\r\n              {logoutAllStatus.kind === \"error\" ? (\r\n                <div className=\"rounded-2xl border border-[var(--v2-border)] bg-[var(--down-bg)] px-3 py-2 text-[13px] font-semibold text-[var(--down)]\">\r\n                  {logoutAllStatus.message}\r\n                </div>\r\n              ) : null}\r\n\r\n              <div className=\"rounded-2xl border border-[var(--v2-border)] bg-[var(--v2-surface)] px-3 py-3 shadow-[var(--v2-shadow-sm)]\">\r\n                <div className=\"flex items-start justify-between gap-3\">\r\n                  <div className=\"min-w-0\">\r\n                    <div className=\"text-[13px] font-semibold text-[var(--v2-text)]\">Verification</div>\r\n                    <div className=\"mt-1 text-[12px] text-[var(--v2-muted)]\">\r\n                      KYC: <span className=\"font-semibold text-[var(--v2-text)]\">{String(kyc?.kyc_level ?? profile.kyc_level)}</span>\r\n                      {kyc?.submissions?.[0]?.status ? (\r\n                        <span className=\"ml-2\">• latest {String(kyc.submissions[0].status).replaceAll(\"_\", \" \")}</span>\r\n                      ) : null}\r\n                    </div>\r\n                    {kycError ? <div className=\"mt-1 text-[12px] text-[var(--v2-muted)]\">{kycError}</div> : null}\r\n                    {kyc?.submissions?.[0]?.rejection_reason ? (\r\n                      <div className=\"mt-1 text-[12px] font-semibold text-[var(--down)]\">\r\n                        Rejected: {kyc.submissions[0].rejection_reason}\r\n                      </div>\r\n                    ) : null}\r\n                  </div>\r\n\r\n                  {profile.email_verified && String(kyc?.kyc_level ?? profile.kyc_level) === \"basic\" ? (\r\n                    <div className=\"shrink-0\">\r\n                      <V2Button variant=\"secondary\" onClick={() => { setKycSubmitStatus({ kind: \"idle\" }); setKycSheetOpen(true); }}>\r\n                        Submit docs\r\n                      </V2Button>\r\n                    </div>\r\n                  ) : null}\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"rounded-2xl border border-[var(--v2-border)] bg-[var(--v2-surface)] px-3 py-3 shadow-[var(--v2-shadow-sm)]\">\r\n                <div className=\"flex items-start justify-between gap-3\">\r\n                  <div className=\"min-w-0\">\r\n                    <div className=\"text-[13px] font-semibold text-[var(--v2-text)]\">Notifications</div>\r\n                    <div className=\"mt-1 flex flex-wrap items-center gap-2\">\r\n                      {togglePill(!!notifSchedule?.quiet_enabled, \"Quiet hours on\", \"Quiet hours off\")}\r\n                      {togglePill(!!notifSchedule?.digest_enabled, \"Digest on\", \"Digest off\")}\r\n                      {togglePill(\r\n                        Object.values(notifPrefs ?? {}).some((p) => p.email),\r\n                        \"Email enabled\",\r\n                        \"Email off\",\r\n                      )}\r\n                      {unreadCount > 0 ? (\r\n                        <span className=\"inline-flex items-center rounded-full border border-[var(--v2-border)] bg-[var(--warn-bg)] px-2 py-0.5 text-[11px] font-semibold text-[var(--warn)]\">\r\n                          {unreadCount} unread\r\n                        </span>\r\n                      ) : null}\r\n                    </div>\r\n                    {notifError ? <div className=\"mt-1 text-[12px] text-[var(--v2-muted)]\">{notifError}</div> : null}\r\n                  </div>\r\n                  <div className=\"shrink-0 grid gap-2\">\r\n                    <V2Button variant=\"secondary\" size=\"sm\" onClick={() => { setInboxError(null); setInboxOpen(true); void loadInbox(); }}>\r\n                      Inbox\r\n                    </V2Button>\r\n                    <V2Button variant=\"secondary\" size=\"sm\" onClick={() => { setNotifStatus({ kind: \"idle\" }); setScheduleSheetOpen(true); }}>\r\n                      Schedule\r\n                    </V2Button>\r\n                    <V2Button variant=\"secondary\" size=\"sm\" onClick={() => { setNotifStatus({ kind: \"idle\" }); setPrefsSheetOpen(true); }}>\r\n                      Preferences\r\n                    </V2Button>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"rounded-2xl border border-[var(--v2-border)] bg-[var(--v2-surface)] px-3 py-3 shadow-[var(--v2-shadow-sm)]\">\r\n                <div className=\"flex items-start justify-between gap-3\">\r\n                  <div className=\"min-w-0\">\r\n                    <div className=\"text-[13px] font-semibold text-[var(--v2-text)]\">P2P</div>\r\n                    <div className=\"mt-1 text-[12px] text-[var(--v2-muted)]\">Escrow-backed marketplace and order chat.</div>\r\n                  </div>\r\n                  <div className=\"shrink-0 grid gap-2\">\r\n                    <Link href=\"/v2/p2p\" className={v2ButtonClassName({ variant: \"secondary\", size: \"sm\" })}>\r\n                      Marketplace\r\n                    </Link>\r\n                    <Link href=\"/v2/p2p/orders\" className={v2ButtonClassName({ variant: \"secondary\", size: \"sm\" })}>\r\n                      My orders\r\n                    </Link>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              <V2Button variant=\"primary\" fullWidth onClick={() => void signOut()}>\r\n                Sign out\r\n              </V2Button>\r\n            </div>\r\n          ) : (\r\n            <div className=\"space-y-3\">\r\n              <div className=\"text-sm text-[var(--v2-muted)]\">You’re not signed in.</div>\r\n              <Link href=\"/login\" className={v2ButtonClassName({ variant: \"primary\", fullWidth: true })}>\r\n                Sign in\r\n              </Link>\r\n            </div>\r\n          )}\r\n        </V2CardBody>\r\n      </V2Card>\r\n\r\n      <V2Sheet open={passkeySheetOpen} title=\"Passkeys\" onClose={() => setPasskeySheetOpen(false)}>\r\n        <div className=\"grid gap-3\">\r\n          <div className=\"text-[12px] text-[var(--v2-muted)]\">Use a device passkey (biometrics / screen lock) for stronger security.</div>\r\n\r\n          {passkeyStatus.kind === \"error\" ? (\r\n            <div className=\"rounded-2xl border border-[var(--v2-border)] bg-[var(--down-bg)] px-3 py-2 text-[13px] font-semibold text-[var(--down)]\">\r\n              {passkeyStatus.message}\r\n            </div>\r\n          ) : passkeyStatus.kind === \"ok\" ? (\r\n            <div className=\"rounded-2xl border border-[var(--v2-border)] bg-[var(--up-bg)] px-3 py-2 text-[13px] font-semibold text-[var(--up)]\">\r\n              {passkeyStatus.message}\r\n            </div>\r\n          ) : null}\r\n\r\n          {!passkeysSupported ? (\r\n            <div className=\"text-[13px] text-[var(--v2-muted)]\">Passkeys aren’t available in this browser/device.</div>\r\n          ) : (\r\n            <div className=\"grid grid-cols-2 gap-2\">\r\n              <V2Button variant=\"primary\" fullWidth disabled={passkeyBusy} onClick={() => void addPasskey()}>\r\n                {passkeyBusy ? \"Working…\" : \"Add passkey\"}\r\n              </V2Button>\r\n              <V2Button\r\n                variant=\"secondary\"\r\n                fullWidth\r\n                disabled={passkeyBusy || passkeys.length === 0}\r\n                onClick={() => void confirmPasskey()}\r\n              >\r\n                Confirm\r\n              </V2Button>\r\n            </div>\r\n          )}\r\n\r\n          <div className=\"rounded-2xl border border-[var(--v2-border)] bg-[var(--v2-surface)] px-3 py-3 shadow-[var(--v2-shadow-sm)]\">\r\n            <div className=\"text-[12px] font-semibold text-[var(--v2-text)]\">Enrolled passkeys</div>\r\n            {passkeys.length === 0 ? (\r\n              <div className=\"mt-1 text-[12px] text-[var(--v2-muted)]\">No passkeys yet.</div>\r\n            ) : (\r\n              <div className=\"mt-2 grid gap-2\">\r\n                {passkeys.map((pk) => (\r\n                  <div key={pk.id} className=\"flex items-start justify-between gap-3\">\r\n                    <div className=\"min-w-0\">\r\n                      <div className=\"text-[13px] font-semibold text-[var(--v2-text)]\">{pk.name ?? \"Passkey\"}</div>\r\n                      <div className=\"mt-0.5 text-[11px] text-[var(--v2-muted)]\">Added {new Date(pk.created_at).toLocaleDateString()}</div>\r\n                    </div>\r\n                    <div className=\"shrink-0 text-[11px] text-[var(--v2-muted)]\">\r\n                      {pk.last_used_at ? `Last used ${new Date(pk.last_used_at).toLocaleDateString()}` : \"Not used yet\"}\r\n                    </div>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </V2Sheet>\r\n\r\n      <V2Sheet open={totpSheetOpen} title=\"Two-factor authentication (2FA)\" onClose={() => setTotpSheetOpen(false)}>\r\n        <div className=\"grid gap-3\">\r\n          <div className=\"text-[12px] text-[var(--v2-muted)]\">Protect your account with a 6‑digit code from an authenticator app.</div>\r\n\r\n          {totpStatus.kind === \"error\" ? (\r\n            <div className=\"rounded-2xl border border-[var(--v2-border)] bg-[var(--down-bg)] px-3 py-2 text-[13px] font-semibold text-[var(--down)]\">\r\n              {totpStatus.message}\r\n            </div>\r\n          ) : totpStatus.kind === \"ok\" ? (\r\n            <div className=\"rounded-2xl border border-[var(--v2-border)] bg-[var(--up-bg)] px-3 py-2 text-[13px] font-semibold text-[var(--up)]\">\r\n              {totpStatus.message}\r\n            </div>\r\n          ) : null}\r\n\r\n          {profile?.totp_enabled && totpStep !== \"backup\" ? (\r\n            <div className=\"grid gap-2\">\r\n              <div className=\"text-[13px] font-semibold text-[var(--v2-text)]\">2FA is enabled</div>\r\n              <div className=\"grid grid-cols-2 gap-2\">\r\n                <V2Input\r\n                  value={totpDisableCode}\r\n                  onChange={(e) => setTotpDisableCode(e.target.value.replace(/\\D/g, \"\").slice(0, 6))}\r\n                  inputMode=\"numeric\"\r\n                  maxLength={6}\r\n                  placeholder=\"000000\"\r\n                  className=\"font-mono tracking-[0.2em]\"\r\n                  autoComplete=\"one-time-code\"\r\n                />\r\n                <V2Button\r\n                  variant=\"secondary\"\r\n                  fullWidth\r\n                  disabled={totpBusy !== null || totpDisableCode.length !== 6}\r\n                  onClick={() => void totpDisable()}\r\n                >\r\n                  {totpBusy === \"disable\" ? \"Disabling…\" : \"Disable\"}\r\n                </V2Button>\r\n              </div>\r\n              <div className=\"text-[11px] text-[var(--v2-muted)]\">Enter a current code to disable 2FA.</div>\r\n            </div>\r\n          ) : totpStep === \"idle\" ? (\r\n            <div className=\"grid gap-2\">\r\n              <div className=\"text-[13px] font-semibold text-[var(--v2-text)]\">2FA is off</div>\r\n              <V2Button variant=\"primary\" fullWidth disabled={totpBusy !== null} onClick={() => void totpSetup()}>\r\n                {totpBusy === \"setup\" ? \"Setting up…\" : \"Enable 2FA\"}\r\n              </V2Button>\r\n            </div>\r\n          ) : totpStep === \"setup\" ? (\r\n            <div className=\"grid gap-3\">\r\n              <div className=\"rounded-2xl border border-[var(--v2-border)] bg-[var(--v2-surface)] px-3 py-3 shadow-[var(--v2-shadow-sm)]\">\r\n                <div className=\"text-[12px] font-semibold text-[var(--v2-text)]\">Setup key</div>\r\n                <div className=\"mt-1 break-all rounded-xl border border-[var(--v2-border)] bg-[var(--v2-surface-2)] px-3 py-2 font-mono text-[12px] text-[var(--v2-text)]\">\r\n                  {totpSecret || \"—\"}\r\n                </div>\r\n                <div className=\"mt-2 grid grid-cols-2 gap-2\">\r\n                  <V2Button variant=\"secondary\" fullWidth onClick={() => void copyToClipboard(totpSecret)}>\r\n                    Copy key\r\n                  </V2Button>\r\n                  <V2Button variant=\"secondary\" fullWidth onClick={() => void copyToClipboard(totpUri)}>\r\n                    Copy URI\r\n                  </V2Button>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"grid grid-cols-2 gap-2\">\r\n                <V2Input\r\n                  value={totpCode}\r\n                  onChange={(e) => setTotpCode(e.target.value.replace(/\\D/g, \"\").slice(0, 6))}\r\n                  inputMode=\"numeric\"\r\n                  maxLength={6}\r\n                  placeholder=\"000000\"\r\n                  className=\"font-mono tracking-[0.2em]\"\r\n                  autoComplete=\"one-time-code\"\r\n                />\r\n                <V2Button\r\n                  variant=\"primary\"\r\n                  fullWidth\r\n                  disabled={totpBusy !== null || totpCode.length !== 6}\r\n                  onClick={() => void totpEnable()}\r\n                >\r\n                  {totpBusy === \"enable\" ? \"Verifying…\" : \"Verify\"}\r\n                </V2Button>\r\n              </div>\r\n\r\n              <V2Button\r\n                variant=\"secondary\"\r\n                fullWidth\r\n                disabled={totpBusy !== null}\r\n                onClick={() => {\r\n                  setTotpStep(\"idle\");\r\n                  setTotpStatus({ kind: \"idle\" });\r\n                }}\r\n              >\r\n                Cancel\r\n              </V2Button>\r\n            </div>\r\n          ) : totpStep === \"backup\" ? (\r\n            <div className=\"grid gap-3\">\r\n              <div className=\"text-[13px] font-semibold text-[var(--v2-text)]\">Save your backup codes</div>\r\n              <div className=\"text-[12px] text-[var(--v2-muted)]\">Store these safely. Each code can be used once if you lose your authenticator.</div>\r\n              <div className=\"grid grid-cols-2 gap-2\">\r\n                {totpBackupCodes.slice(0, 12).map((c, i) => (\r\n                  <div\r\n                    key={i}\r\n                    className=\"rounded-xl border border-[var(--v2-border)] bg-[var(--v2-surface)] px-3 py-2 text-center font-mono text-[12px] text-[var(--v2-text)]\"\r\n                  >\r\n                    {c}\r\n                  </div>\r\n                ))}\r\n              </div>\r\n              <V2Button\r\n                variant=\"primary\"\r\n                fullWidth\r\n                onClick={() => {\r\n                  setTotpStep(\"idle\");\r\n                  setTotpSheetOpen(false);\r\n                }}\r\n              >\r\n                I’ve saved them\r\n              </V2Button>\r\n            </div>\r\n          ) : null}\r\n        </div>\r\n      </V2Sheet>\r\n\r\n      <V2Sheet open={passwordSheetOpen} title=\"Change password\" onClose={() => setPasswordSheetOpen(false)}>\r\n        <div className=\"grid gap-3\">\r\n          {pwStatus.kind === \"error\" ? (\r\n            <div className=\"rounded-2xl border border-[var(--v2-border)] bg-[var(--down-bg)] px-3 py-2 text-[13px] font-semibold text-[var(--down)]\">\r\n              {pwStatus.message}\r\n            </div>\r\n          ) : pwStatus.kind === \"ok\" ? (\r\n            <div className=\"rounded-2xl border border-[var(--v2-border)] bg-[var(--up-bg)] px-3 py-2 text-[13px] font-semibold text-[var(--up)]\">\r\n              {pwStatus.message}\r\n            </div>\r\n          ) : null}\r\n\r\n          <label className=\"grid gap-1\">\r\n            <div className=\"text-[12px] font-semibold text-[var(--v2-text)]\">Current password</div>\r\n            <V2Input type=\"password\" value={pwCurrent} onChange={(e) => setPwCurrent(e.target.value)} autoComplete=\"current-password\" />\r\n          </label>\r\n\r\n          <label className=\"grid gap-1\">\r\n            <div className=\"text-[12px] font-semibold text-[var(--v2-text)]\">New password</div>\r\n            <V2Input type=\"password\" value={pwNew} onChange={(e) => setPwNew(e.target.value)} autoComplete=\"new-password\" />\r\n          </label>\r\n\r\n          <label className=\"grid gap-1\">\r\n            <div className=\"text-[12px] font-semibold text-[var(--v2-text)]\">Confirm new password</div>\r\n            <V2Input type=\"password\" value={pwConfirm} onChange={(e) => setPwConfirm(e.target.value)} autoComplete=\"new-password\" />\r\n          </label>\r\n\r\n          {profile?.totp_enabled ? (\r\n            <label className=\"grid gap-1\">\r\n              <div className=\"text-[12px] font-semibold text-[var(--v2-text)]\">2FA code</div>\r\n              <V2Input\r\n                value={pwTotpCode}\r\n                onChange={(e) => setPwTotpCode(e.target.value.replace(/\\D/g, \"\").slice(0, 6))}\r\n                inputMode=\"numeric\"\r\n                maxLength={6}\r\n                placeholder=\"000000\"\r\n                className=\"font-mono tracking-[0.2em]\"\r\n                autoComplete=\"one-time-code\"\r\n              />\r\n            </label>\r\n          ) : null}\r\n\r\n          <V2Button\r\n            variant=\"primary\"\r\n            fullWidth\r\n            disabled={pwBusy || !pwCurrent || !pwNew || !pwConfirm}\r\n            onClick={() => void changePassword()}\r\n          >\r\n            {pwBusy ? \"Updating…\" : \"Update password\"}\r\n          </V2Button>\r\n        </div>\r\n      </V2Sheet>\r\n\r\n      <V2Sheet\r\n        open={kycSheetOpen}\r\n        title=\"Submit KYC documents\"\r\n        onClose={() => {\r\n          setKycSheetOpen(false);\r\n        }}\r\n      >\r\n        <div className=\"grid gap-3\">\r\n          <div className=\"text-[12px] text-[var(--v2-muted)]\">\r\n            Upload clear photos. This sends images to the server for review.\r\n          </div>\r\n\r\n          {kycSubmitStatus.kind === \"error\" ? (\r\n            <div className=\"rounded-2xl border border-[var(--v2-border)] bg-[var(--down-bg)] px-3 py-2 text-[13px] font-semibold text-[var(--down)]\">\r\n              {kycSubmitStatus.message}\r\n            </div>\r\n          ) : kycSubmitStatus.kind === \"ok\" ? (\r\n            <div className=\"rounded-2xl border border-[var(--v2-border)] bg-[var(--up-bg)] px-3 py-2 text-[13px] font-semibold text-[var(--up)]\">\r\n              {kycSubmitStatus.message}\r\n            </div>\r\n          ) : null}\r\n\r\n          <div className=\"grid grid-cols-3 gap-2\">\r\n            {([\r\n              { id: \"passport\", label: \"Passport\" },\r\n              { id: \"national_id\", label: \"National ID\" },\r\n              { id: \"drivers_license\", label: \"Driver\" },\r\n            ] as const).map((t) => (\r\n              <button\r\n                key={t.id}\r\n                type=\"button\"\r\n                onClick={() => setDocType(t.id)}\r\n                className={\r\n                  \"h-10 rounded-xl border px-3 text-[13px] font-semibold shadow-[var(--v2-shadow-sm)] \" +\r\n                  (docType === t.id\r\n                    ? \"border-[var(--v2-border)] bg-[var(--v2-surface-2)] text-[var(--v2-text)]\"\r\n                    : \"border-[var(--v2-border)] bg-[var(--v2-surface)] text-[var(--v2-muted)] hover:bg-[var(--v2-surface-2)]\")\r\n                }\r\n              >\r\n                {t.label}\r\n              </button>\r\n            ))}\r\n          </div>\r\n\r\n          <label className=\"grid gap-1\">\r\n            <div className=\"text-[12px] font-semibold text-[var(--v2-text)]\">Front (required)</div>\r\n            <input\r\n              type=\"file\"\r\n              accept=\"image/*\"\r\n              onChange={(e) => setFrontFile(e.target.files?.[0] ?? null)}\r\n              className=\"h-11 w-full rounded-xl border border-[var(--v2-border)] bg-[var(--v2-surface)] px-3 text-[13px] text-[var(--v2-text)] shadow-[var(--v2-shadow-sm)]\"\r\n            />\r\n            {frontFile ? <div className=\"text-[11px] text-[var(--v2-muted)]\">{frontFile.name}</div> : null}\r\n          </label>\r\n\r\n          <label className=\"grid gap-1\">\r\n            <div className=\"text-[12px] font-semibold text-[var(--v2-text)]\">Back (optional)</div>\r\n            <input\r\n              type=\"file\"\r\n              accept=\"image/*\"\r\n              onChange={(e) => setBackFile(e.target.files?.[0] ?? null)}\r\n              className=\"h-11 w-full rounded-xl border border-[var(--v2-border)] bg-[var(--v2-surface)] px-3 text-[13px] text-[var(--v2-text)] shadow-[var(--v2-shadow-sm)]\"\r\n            />\r\n            {backFile ? <div className=\"text-[11px] text-[var(--v2-muted)]\">{backFile.name}</div> : null}\r\n          </label>\r\n\r\n          <label className=\"grid gap-1\">\r\n            <div className=\"text-[12px] font-semibold text-[var(--v2-text)]\">Selfie (optional)</div>\r\n            <input\r\n              type=\"file\"\r\n              accept=\"image/*\"\r\n              onChange={(e) => setSelfieFile(e.target.files?.[0] ?? null)}\r\n              className=\"h-11 w-full rounded-xl border border-[var(--v2-border)] bg-[var(--v2-surface)] px-3 text-[13px] text-[var(--v2-text)] shadow-[var(--v2-shadow-sm)]\"\r\n            />\r\n            {selfieFile ? <div className=\"text-[11px] text-[var(--v2-muted)]\">{selfieFile.name}</div> : null}\r\n          </label>\r\n\r\n          <V2Button variant=\"primary\" fullWidth disabled={kycSubmitLoading} onClick={() => void submitKycDocuments()}>\r\n            {kycSubmitLoading ? \"Submitting…\" : \"Submit\"}\r\n          </V2Button>\r\n\r\n          <div className=\"text-[11px] text-[var(--v2-muted)]\">Tip: Keep each image ≤ 900KB for reliability.</div>\r\n        </div>\r\n      </V2Sheet>\r\n\r\n      <V2Sheet open={scheduleSheetOpen} title=\"Notification schedule\" onClose={() => setScheduleSheetOpen(false)}>\r\n        <div className=\"grid gap-3\">\r\n          {notifStatus.kind === \"error\" ? (\r\n            <div className=\"rounded-2xl border border-[var(--v2-border)] bg-[var(--down-bg)] px-3 py-2 text-[13px] font-semibold text-[var(--down)]\">\r\n              {notifStatus.message}\r\n            </div>\r\n          ) : notifStatus.kind === \"ok\" ? (\r\n            <div className=\"rounded-2xl border border-[var(--v2-border)] bg-[var(--up-bg)] px-3 py-2 text-[13px] font-semibold text-[var(--up)]\">\r\n              {notifStatus.message}\r\n            </div>\r\n          ) : null}\r\n\r\n          <button\r\n            type=\"button\"\r\n            onClick={() => setNotifSchedule((s) => (s ? { ...s, quiet_enabled: !s.quiet_enabled } : s))}\r\n            className=\"flex items-center justify-between rounded-2xl border border-[var(--v2-border)] bg-[var(--v2-surface)] px-3 py-3 text-left shadow-[var(--v2-shadow-sm)]\"\r\n          >\r\n            <div>\r\n              <div className=\"text-[13px] font-semibold text-[var(--v2-text)]\">Quiet hours</div>\r\n              <div className=\"mt-0.5 text-[12px] text-[var(--v2-muted)]\">Mute non-critical alerts during set hours.</div>\r\n            </div>\r\n            {togglePill(!!notifSchedule?.quiet_enabled, \"On\", \"Off\")}\r\n          </button>\r\n\r\n          <div className=\"grid grid-cols-2 gap-2\">\r\n            <div>\r\n              <div className=\"mb-1 text-[12px] font-semibold text-[var(--v2-text)]\">Start</div>\r\n              <V2Input\r\n                type=\"time\"\r\n                value={minToTime(notifSchedule?.quiet_start_min ?? 22 * 60)}\r\n                onChange={(e) => setNotifSchedule((s) => (s ? { ...s, quiet_start_min: timeToMin(e.target.value) } : s))}\r\n              />\r\n            </div>\r\n            <div>\r\n              <div className=\"mb-1 text-[12px] font-semibold text-[var(--v2-text)]\">End</div>\r\n              <V2Input\r\n                type=\"time\"\r\n                value={minToTime(notifSchedule?.quiet_end_min ?? 8 * 60)}\r\n                onChange={(e) => setNotifSchedule((s) => (s ? { ...s, quiet_end_min: timeToMin(e.target.value) } : s))}\r\n              />\r\n            </div>\r\n          </div>\r\n\r\n          <button\r\n            type=\"button\"\r\n            onClick={() => setNotifSchedule((s) => (s ? { ...s, digest_enabled: !s.digest_enabled } : s))}\r\n            className=\"flex items-center justify-between rounded-2xl border border-[var(--v2-border)] bg-[var(--v2-surface)] px-3 py-3 text-left shadow-[var(--v2-shadow-sm)]\"\r\n          >\r\n            <div>\r\n              <div className=\"text-[13px] font-semibold text-[var(--v2-text)]\">Email digest</div>\r\n              <div className=\"mt-0.5 text-[12px] text-[var(--v2-muted)]\">Periodic summaries (if email channel enabled).</div>\r\n            </div>\r\n            {togglePill(!!notifSchedule?.digest_enabled, \"On\", \"Off\")}\r\n          </button>\r\n\r\n          <V2Button variant=\"primary\" fullWidth disabled={notifSaving === \"schedule\" || !notifSchedule} onClick={() => void saveSchedule()}>\r\n            {notifSaving === \"schedule\" ? \"Saving…\" : \"Save schedule\"}\r\n          </V2Button>\r\n        </div>\r\n      </V2Sheet>\r\n\r\n      <V2Sheet open={prefsSheetOpen} title=\"Notification preferences\" onClose={() => setPrefsSheetOpen(false)}>\r\n        <div className=\"grid gap-3\">\r\n          {notifStatus.kind === \"error\" ? (\r\n            <div className=\"rounded-2xl border border-[var(--v2-border)] bg-[var(--down-bg)] px-3 py-2 text-[13px] font-semibold text-[var(--down)]\">\r\n              {notifStatus.message}\r\n            </div>\r\n          ) : notifStatus.kind === \"ok\" ? (\r\n            <div className=\"rounded-2xl border border-[var(--v2-border)] bg-[var(--up-bg)] px-3 py-2 text-[13px] font-semibold text-[var(--up)]\">\r\n              {notifStatus.message}\r\n            </div>\r\n          ) : null}\r\n\r\n          <div className=\"text-[12px] text-[var(--v2-muted)]\">Key alerts (in-app / email). Others keep defaults.</div>\r\n\r\n          {([\r\n            \"order_filled\",\r\n            \"order_rejected\",\r\n            \"deposit_credited\",\r\n            \"withdrawal_completed\",\r\n            \"p2p_order_expiring\",\r\n            \"system\",\r\n          ] as const).map((t) => {\r\n            const cur = (notifPrefs ?? {})[t] ?? { in_app: true, email: false };\r\n            return (\r\n              <div key={t} className=\"rounded-2xl border border-[var(--v2-border)] bg-[var(--v2-surface)] px-3 py-3 shadow-[var(--v2-shadow-sm)]\">\r\n                <div className=\"flex items-start justify-between gap-3\">\r\n                  <div className=\"min-w-0\">\r\n                    <div className=\"text-[13px] font-semibold text-[var(--v2-text)]\">{prettyType(t)}</div>\r\n                    <div className=\"mt-1 flex flex-wrap items-center gap-2\">\r\n                      <button\r\n                        type=\"button\"\r\n                        onClick={() => setPref(t, { in_app: !cur.in_app })}\r\n                        className={\r\n                          \"h-9 rounded-xl border px-3 text-[12px] font-semibold shadow-[var(--v2-shadow-sm)] \" +\r\n                          (cur.in_app\r\n                            ? \"border-[var(--v2-border)] bg-[var(--v2-surface-2)] text-[var(--v2-text)]\"\r\n                            : \"border-[var(--v2-border)] bg-[var(--v2-surface)] text-[var(--v2-muted)] hover:bg-[var(--v2-surface-2)]\")\r\n                        }\r\n                      >\r\n                        In-app: {cur.in_app ? \"On\" : \"Off\"}\r\n                      </button>\r\n                      <button\r\n                        type=\"button\"\r\n                        onClick={() => setPref(t, { email: !cur.email })}\r\n                        className={\r\n                          \"h-9 rounded-xl border px-3 text-[12px] font-semibold shadow-[var(--v2-shadow-sm)] \" +\r\n                          (cur.email\r\n                            ? \"border-[var(--v2-border)] bg-[var(--v2-surface-2)] text-[var(--v2-text)]\"\r\n                            : \"border-[var(--v2-border)] bg-[var(--v2-surface)] text-[var(--v2-muted)] hover:bg-[var(--v2-surface-2)]\")\r\n                        }\r\n                      >\r\n                        Email: {cur.email ? \"On\" : \"Off\"}\r\n                      </button>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            );\r\n          })}\r\n\r\n          <V2Button variant=\"primary\" fullWidth disabled={notifSaving === \"prefs\" || !notifPrefs} onClick={() => void savePrefs()}>\r\n            {notifSaving === \"prefs\" ? \"Saving…\" : \"Save preferences\"}\r\n          </V2Button>\r\n\r\n          {notifPrefsKnown.length ? (\r\n            <div className=\"text-[11px] text-[var(--v2-muted)]\">Known types: {notifPrefsKnown.length}</div>\r\n          ) : null}\r\n        </div>\r\n      </V2Sheet>\r\n\r\n      <V2Sheet open={inboxOpen} title=\"Notifications\" onClose={() => setInboxOpen(false)}>\r\n        <div className=\"grid gap-3\">\r\n          {inboxError ? (\r\n            <div className=\"rounded-2xl border border-[var(--v2-border)] bg-[var(--down-bg)] px-3 py-2 text-[13px] font-semibold text-[var(--down)]\">\r\n              {inboxError}\r\n            </div>\r\n          ) : null}\r\n\r\n          <div className=\"grid grid-cols-2 gap-2\">\r\n            <V2Button variant=\"secondary\" fullWidth disabled={inboxLoading} onClick={() => void loadInbox()}>\r\n              Refresh\r\n            </V2Button>\r\n            <V2Button variant=\"primary\" fullWidth disabled={inboxLoading || unreadCount === 0} onClick={() => void markAllRead()}>\r\n              Mark all read\r\n            </V2Button>\r\n          </div>\r\n\r\n          {inboxLoading ? (\r\n            <V2Skeleton className=\"h-32 w-full\" />\r\n          ) : notifications.length === 0 ? (\r\n            <div className=\"text-sm text-[var(--v2-muted)]\">No notifications.</div>\r\n          ) : (\r\n            <div className=\"grid gap-2\">\r\n              {notifications.slice(0, 50).map((n) => (\r\n                <button\r\n                  key={n.id}\r\n                  type=\"button\"\r\n                  onClick={() => {\r\n                    if (!n.is_read) void markOneRead(n.id);\r\n                  }}\r\n                  className={\r\n                    \"rounded-2xl border border-[var(--v2-border)] px-3 py-3 text-left shadow-[var(--v2-shadow-sm)] \" +\r\n                    (n.is_read ? \"bg-[var(--v2-surface)]\" : \"bg-[color-mix(in_srgb,var(--warn-bg)_55%,var(--v2-surface))]\")\r\n                  }\r\n                >\r\n                  <div className=\"flex items-start justify-between gap-3\">\r\n                    <div className=\"min-w-0\">\r\n                      <div className=\"text-[13px] font-semibold text-[var(--v2-text)]\">{n.title}</div>\r\n                      <div className=\"mt-1 text-[12px] text-[var(--v2-muted)]\">{n.body}</div>\r\n                      <div className=\"mt-1 text-[11px] text-[var(--v2-muted)]\">\r\n                        {prettyType(n.type)} • {n.created_at ? new Date(n.created_at).toLocaleString() : \"\"}\r\n                      </div>\r\n                    </div>\r\n                    {!n.is_read ? (\r\n                      <span className=\"mt-0.5 inline-flex h-2 w-2 rounded-full bg-[var(--warn)]\" aria-label=\"Unread\" />\r\n                    ) : null}\r\n                  </div>\r\n                </button>\r\n              ))}\r\n            </div>\r\n          )}\r\n        </div>\r\n      </V2Sheet>\r\n    </main>\r\n  );\r\n}\r\n","/**\n * Convert the given array buffer into a Base64URL-encoded string. Ideal for converting various\n * credential response ArrayBuffers to string for sending back to the server as JSON.\n *\n * Helper method to compliment `base64URLStringToBuffer`\n */\nexport function bufferToBase64URLString(buffer) {\n    const bytes = new Uint8Array(buffer);\n    let str = '';\n    for (const charCode of bytes) {\n        str += String.fromCharCode(charCode);\n    }\n    const base64String = btoa(str);\n    return base64String.replace(/\\+/g, '-').replace(/\\//g, '_').replace(/=/g, '');\n}\n","/**\n * Convert from a Base64URL-encoded string to an Array Buffer. Best used when converting a\n * credential ID from a JSON string to an ArrayBuffer, like in allowCredentials or\n * excludeCredentials\n *\n * Helper method to compliment `bufferToBase64URLString`\n */\nexport function base64URLStringToBuffer(base64URLString) {\n    // Convert from Base64URL to Base64\n    const base64 = base64URLString.replace(/-/g, '+').replace(/_/g, '/');\n    /**\n     * Pad with '=' until it's a multiple of four\n     * (4 - (85 % 4 = 1) = 3) % 4 = 3 padding\n     * (4 - (86 % 4 = 2) = 2) % 4 = 2 padding\n     * (4 - (87 % 4 = 3) = 1) % 4 = 1 padding\n     * (4 - (88 % 4 = 0) = 4) % 4 = 0 padding\n     */\n    const padLength = (4 - (base64.length % 4)) % 4;\n    const padded = base64.padEnd(base64.length + padLength, '=');\n    // Convert to a binary string\n    const binary = atob(padded);\n    // Convert binary string to buffer\n    const buffer = new ArrayBuffer(binary.length);\n    const bytes = new Uint8Array(buffer);\n    for (let i = 0; i < binary.length; i++) {\n        bytes[i] = binary.charCodeAt(i);\n    }\n    return buffer;\n}\n","/**\n * Determine if the browser is capable of Webauthn\n */\nexport function browserSupportsWebAuthn() {\n    return _browserSupportsWebAuthnInternals.stubThis(globalThis?.PublicKeyCredential !== undefined &&\n        typeof globalThis.PublicKeyCredential === 'function');\n}\n/**\n * Make it possible to stub the return value during testing\n * @ignore Don't include this in docs output\n */\nexport const _browserSupportsWebAuthnInternals = {\n    stubThis: (value) => value,\n};\n","import { base64URLStringToBuffer } from './base64URLStringToBuffer.js';\nexport function toPublicKeyCredentialDescriptor(descriptor) {\n    const { id } = descriptor;\n    return {\n        ...descriptor,\n        id: base64URLStringToBuffer(id),\n        /**\n         * `descriptor.transports` is an array of our `AuthenticatorTransportFuture` that includes newer\n         * transports that TypeScript's DOM lib is ignorant of. Convince TS that our list of transports\n         * are fine to pass to WebAuthn since browsers will recognize the new value.\n         */\n        transports: descriptor.transports,\n    };\n}\n","/**\n * A simple test to determine if a hostname is a properly-formatted domain name\n *\n * A \"valid domain\" is defined here: https://url.spec.whatwg.org/#valid-domain\n *\n * Regex sourced from here:\n * https://www.oreilly.com/library/view/regular-expressions-cookbook/9781449327453/ch08s15.html\n */\nexport function isValidDomain(hostname) {\n    return (\n    // Consider localhost valid as well since it's okay wrt Secure Contexts\n    hostname === 'localhost' ||\n        /^([a-z0-9]+(-[a-z0-9]+)*\\.)+[a-z]{2,}$/i.test(hostname));\n}\n","/**\n * A custom Error used to return a more nuanced error detailing _why_ one of the eight documented\n * errors in the spec was raised after calling `navigator.credentials.create()` or\n * `navigator.credentials.get()`:\n *\n * - `AbortError`\n * - `ConstraintError`\n * - `InvalidStateError`\n * - `NotAllowedError`\n * - `NotSupportedError`\n * - `SecurityError`\n * - `TypeError`\n * - `UnknownError`\n *\n * Error messages were determined through investigation of the spec to determine under which\n * scenarios a given error would be raised.\n */\nexport class WebAuthnError extends Error {\n    constructor({ message, code, cause, name, }) {\n        // @ts-ignore: help Rollup understand that `cause` is okay to set\n        super(message, { cause });\n        Object.defineProperty(this, \"code\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.name = name ?? cause.name;\n        this.code = code;\n    }\n}\n","import { isValidDomain } from './isValidDomain.js';\nimport { WebAuthnError } from './webAuthnError.js';\n/**\n * Attempt to intuit _why_ an error was raised after calling `navigator.credentials.create()`\n */\nexport function identifyRegistrationError({ error, options, }) {\n    const { publicKey } = options;\n    if (!publicKey) {\n        throw Error('options was missing required publicKey property');\n    }\n    if (error.name === 'AbortError') {\n        if (options.signal instanceof AbortSignal) {\n            // https://www.w3.org/TR/webauthn-2/#sctn-createCredential (Step 16)\n            return new WebAuthnError({\n                message: 'Registration ceremony was sent an abort signal',\n                code: 'ERROR_CEREMONY_ABORTED',\n                cause: error,\n            });\n        }\n    }\n    else if (error.name === 'ConstraintError') {\n        if (publicKey.authenticatorSelection?.requireResidentKey === true) {\n            // https://www.w3.org/TR/webauthn-2/#sctn-op-make-cred (Step 4)\n            return new WebAuthnError({\n                message: 'Discoverable credentials were required but no available authenticator supported it',\n                code: 'ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT',\n                cause: error,\n            });\n        }\n        else if (\n        // @ts-ignore: `mediation` doesn't yet exist on CredentialCreationOptions but it's possible as of Sept 2024\n        options.mediation === 'conditional' &&\n            publicKey.authenticatorSelection?.userVerification === 'required') {\n            // https://w3c.github.io/webauthn/#sctn-createCredential (Step 22.4)\n            return new WebAuthnError({\n                message: 'User verification was required during automatic registration but it could not be performed',\n                code: 'ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE',\n                cause: error,\n            });\n        }\n        else if (publicKey.authenticatorSelection?.userVerification === 'required') {\n            // https://www.w3.org/TR/webauthn-2/#sctn-op-make-cred (Step 5)\n            return new WebAuthnError({\n                message: 'User verification was required but no available authenticator supported it',\n                code: 'ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT',\n                cause: error,\n            });\n        }\n    }\n    else if (error.name === 'InvalidStateError') {\n        // https://www.w3.org/TR/webauthn-2/#sctn-createCredential (Step 20)\n        // https://www.w3.org/TR/webauthn-2/#sctn-op-make-cred (Step 3)\n        return new WebAuthnError({\n            message: 'The authenticator was previously registered',\n            code: 'ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED',\n            cause: error,\n        });\n    }\n    else if (error.name === 'NotAllowedError') {\n        /**\n         * Pass the error directly through. Platforms are overloading this error beyond what the spec\n         * defines and we don't want to overwrite potentially useful error messages.\n         */\n        return new WebAuthnError({\n            message: error.message,\n            code: 'ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY',\n            cause: error,\n        });\n    }\n    else if (error.name === 'NotSupportedError') {\n        const validPubKeyCredParams = publicKey.pubKeyCredParams.filter((param) => param.type === 'public-key');\n        if (validPubKeyCredParams.length === 0) {\n            // https://www.w3.org/TR/webauthn-2/#sctn-createCredential (Step 10)\n            return new WebAuthnError({\n                message: 'No entry in pubKeyCredParams was of type \"public-key\"',\n                code: 'ERROR_MALFORMED_PUBKEYCREDPARAMS',\n                cause: error,\n            });\n        }\n        // https://www.w3.org/TR/webauthn-2/#sctn-op-make-cred (Step 2)\n        return new WebAuthnError({\n            message: 'No available authenticator supported any of the specified pubKeyCredParams algorithms',\n            code: 'ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG',\n            cause: error,\n        });\n    }\n    else if (error.name === 'SecurityError') {\n        const effectiveDomain = globalThis.location.hostname;\n        if (!isValidDomain(effectiveDomain)) {\n            // https://www.w3.org/TR/webauthn-2/#sctn-createCredential (Step 7)\n            return new WebAuthnError({\n                message: `${globalThis.location.hostname} is an invalid domain`,\n                code: 'ERROR_INVALID_DOMAIN',\n                cause: error,\n            });\n        }\n        else if (publicKey.rp.id !== effectiveDomain) {\n            // https://www.w3.org/TR/webauthn-2/#sctn-createCredential (Step 8)\n            return new WebAuthnError({\n                message: `The RP ID \"${publicKey.rp.id}\" is invalid for this domain`,\n                code: 'ERROR_INVALID_RP_ID',\n                cause: error,\n            });\n        }\n    }\n    else if (error.name === 'TypeError') {\n        if (publicKey.user.id.byteLength < 1 || publicKey.user.id.byteLength > 64) {\n            // https://www.w3.org/TR/webauthn-2/#sctn-createCredential (Step 5)\n            return new WebAuthnError({\n                message: 'User ID was not between 1 and 64 characters',\n                code: 'ERROR_INVALID_USER_ID_LENGTH',\n                cause: error,\n            });\n        }\n    }\n    else if (error.name === 'UnknownError') {\n        // https://www.w3.org/TR/webauthn-2/#sctn-op-make-cred (Step 1)\n        // https://www.w3.org/TR/webauthn-2/#sctn-op-make-cred (Step 8)\n        return new WebAuthnError({\n            message: 'The authenticator was unable to process the specified options, or could not create a new credential',\n            code: 'ERROR_AUTHENTICATOR_GENERAL_ERROR',\n            cause: error,\n        });\n    }\n    return error;\n}\n","class BaseWebAuthnAbortService {\n    constructor() {\n        Object.defineProperty(this, \"controller\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n    }\n    createNewAbortSignal() {\n        // Abort any existing calls to navigator.credentials.create() or navigator.credentials.get()\n        if (this.controller) {\n            const abortError = new Error('Cancelling existing WebAuthn API call for new one');\n            abortError.name = 'AbortError';\n            this.controller.abort(abortError);\n        }\n        const newController = new AbortController();\n        this.controller = newController;\n        return newController.signal;\n    }\n    cancelCeremony() {\n        if (this.controller) {\n            const abortError = new Error('Manually cancelling existing WebAuthn API call');\n            abortError.name = 'AbortError';\n            this.controller.abort(abortError);\n            this.controller = undefined;\n        }\n    }\n}\n/**\n * A service singleton to help ensure that only a single WebAuthn ceremony is active at a time.\n *\n * Users of **@simplewebauthn/browser** shouldn't typically need to use this, but it can help e.g.\n * developers building projects that use client-side routing to better control the behavior of\n * their UX in response to router navigation events.\n */\nexport const WebAuthnAbortService = new BaseWebAuthnAbortService();\n","const attachments = ['cross-platform', 'platform'];\n/**\n * If possible coerce a `string` value into a known `AuthenticatorAttachment`\n */\nexport function toAuthenticatorAttachment(attachment) {\n    if (!attachment) {\n        return;\n    }\n    if (attachments.indexOf(attachment) < 0) {\n        return;\n    }\n    return attachment;\n}\n","import { bufferToBase64URLString } from '../helpers/bufferToBase64URLString.js';\nimport { base64URLStringToBuffer } from '../helpers/base64URLStringToBuffer.js';\nimport { browserSupportsWebAuthn } from '../helpers/browserSupportsWebAuthn.js';\nimport { toPublicKeyCredentialDescriptor } from '../helpers/toPublicKeyCredentialDescriptor.js';\nimport { identifyRegistrationError } from '../helpers/identifyRegistrationError.js';\nimport { WebAuthnAbortService } from '../helpers/webAuthnAbortService.js';\nimport { toAuthenticatorAttachment } from '../helpers/toAuthenticatorAttachment.js';\n/**\n * Begin authenticator \"registration\" via WebAuthn attestation\n *\n * @param optionsJSON Output from **@simplewebauthn/server**'s `generateRegistrationOptions()`\n * @param useAutoRegister (Optional) Try to silently create a passkey with the password manager that the user just signed in with. Defaults to `false`.\n */\nexport async function startRegistration(options) {\n    // @ts-ignore: Intentionally check for old call structure to warn about improper API call\n    if (!options.optionsJSON && options.challenge) {\n        console.warn('startRegistration() was not called correctly. It will try to continue with the provided options, but this call should be refactored to use the expected call structure instead. See https://simplewebauthn.dev/docs/packages/browser#typeerror-cannot-read-properties-of-undefined-reading-challenge for more information.');\n        // @ts-ignore: Reassign the options, passed in as a positional argument, to the expected variable\n        options = { optionsJSON: options };\n    }\n    const { optionsJSON, useAutoRegister = false } = options;\n    if (!browserSupportsWebAuthn()) {\n        throw new Error('WebAuthn is not supported in this browser');\n    }\n    // We need to convert some values to Uint8Arrays before passing the credentials to the navigator\n    const publicKey = {\n        ...optionsJSON,\n        challenge: base64URLStringToBuffer(optionsJSON.challenge),\n        user: {\n            ...optionsJSON.user,\n            id: base64URLStringToBuffer(optionsJSON.user.id),\n        },\n        excludeCredentials: optionsJSON.excludeCredentials?.map(toPublicKeyCredentialDescriptor),\n    };\n    // Prepare options for `.create()`\n    const createOptions = {};\n    /**\n     * Try to use conditional create to register a passkey for the user with the password manager\n     * the user just used to authenticate with. The user won't be shown any prominent UI by the\n     * browser.\n     */\n    if (useAutoRegister) {\n        // @ts-ignore: `mediation` doesn't yet exist on CredentialCreationOptions but it's possible as of Sept 2024\n        createOptions.mediation = 'conditional';\n    }\n    // Finalize options\n    createOptions.publicKey = publicKey;\n    // Set up the ability to cancel this request if the user attempts another\n    createOptions.signal = WebAuthnAbortService.createNewAbortSignal();\n    // Wait for the user to complete attestation\n    let credential;\n    try {\n        credential = (await navigator.credentials.create(createOptions));\n    }\n    catch (err) {\n        throw identifyRegistrationError({ error: err, options: createOptions });\n    }\n    if (!credential) {\n        throw new Error('Registration was not completed');\n    }\n    const { id, rawId, response, type } = credential;\n    // Continue to play it safe with `getTransports()` for now, even when L3 types say it's required\n    let transports = undefined;\n    if (typeof response.getTransports === 'function') {\n        transports = response.getTransports();\n    }\n    // L3 says this is required, but browser and webview support are still not guaranteed.\n    let responsePublicKeyAlgorithm = undefined;\n    if (typeof response.getPublicKeyAlgorithm === 'function') {\n        try {\n            responsePublicKeyAlgorithm = response.getPublicKeyAlgorithm();\n        }\n        catch (error) {\n            warnOnBrokenImplementation('getPublicKeyAlgorithm()', error);\n        }\n    }\n    let responsePublicKey = undefined;\n    if (typeof response.getPublicKey === 'function') {\n        try {\n            const _publicKey = response.getPublicKey();\n            if (_publicKey !== null) {\n                responsePublicKey = bufferToBase64URLString(_publicKey);\n            }\n        }\n        catch (error) {\n            warnOnBrokenImplementation('getPublicKey()', error);\n        }\n    }\n    // L3 says this is required, but browser and webview support are still not guaranteed.\n    let responseAuthenticatorData;\n    if (typeof response.getAuthenticatorData === 'function') {\n        try {\n            responseAuthenticatorData = bufferToBase64URLString(response.getAuthenticatorData());\n        }\n        catch (error) {\n            warnOnBrokenImplementation('getAuthenticatorData()', error);\n        }\n    }\n    return {\n        id,\n        rawId: bufferToBase64URLString(rawId),\n        response: {\n            attestationObject: bufferToBase64URLString(response.attestationObject),\n            clientDataJSON: bufferToBase64URLString(response.clientDataJSON),\n            transports,\n            publicKeyAlgorithm: responsePublicKeyAlgorithm,\n            publicKey: responsePublicKey,\n            authenticatorData: responseAuthenticatorData,\n        },\n        type,\n        clientExtensionResults: credential.getClientExtensionResults(),\n        authenticatorAttachment: toAuthenticatorAttachment(credential.authenticatorAttachment),\n    };\n}\n/**\n * Visibly warn when we detect an issue related to a passkey provider intercepting WebAuthn API\n * calls\n */\nfunction warnOnBrokenImplementation(methodName, cause) {\n    console.warn(`The browser extension that intercepted this WebAuthn API call incorrectly implemented ${methodName}. You should report this error to them.\\n`, cause);\n}\n","import { browserSupportsWebAuthn } from './browserSupportsWebAuthn.js';\n/**\n * Determine if the browser supports conditional UI, so that WebAuthn credentials can\n * be shown to the user in the browser's typical password autofill popup.\n */\nexport function browserSupportsWebAuthnAutofill() {\n    if (!browserSupportsWebAuthn()) {\n        return _browserSupportsWebAuthnAutofillInternals.stubThis(new Promise((resolve) => resolve(false)));\n    }\n    /**\n     * I don't like the `as unknown` here but there's a `declare var PublicKeyCredential` in\n     * TS' DOM lib that's making it difficult for me to just go `as PublicKeyCredentialFuture` as I\n     * want. I think I'm fine with this for now since it's _supposed_ to be temporary, until TS types\n     * have a chance to catch up.\n     */\n    const globalPublicKeyCredential = globalThis\n        .PublicKeyCredential;\n    if (globalPublicKeyCredential?.isConditionalMediationAvailable === undefined) {\n        return _browserSupportsWebAuthnAutofillInternals.stubThis(new Promise((resolve) => resolve(false)));\n    }\n    return _browserSupportsWebAuthnAutofillInternals.stubThis(globalPublicKeyCredential.isConditionalMediationAvailable());\n}\n// Make it possible to stub the return value during testing\nexport const _browserSupportsWebAuthnAutofillInternals = {\n    stubThis: (value) => value,\n};\n","import { isValidDomain } from './isValidDomain.js';\nimport { WebAuthnError } from './webAuthnError.js';\n/**\n * Attempt to intuit _why_ an error was raised after calling `navigator.credentials.get()`\n */\nexport function identifyAuthenticationError({ error, options, }) {\n    const { publicKey } = options;\n    if (!publicKey) {\n        throw Error('options was missing required publicKey property');\n    }\n    if (error.name === 'AbortError') {\n        if (options.signal instanceof AbortSignal) {\n            // https://www.w3.org/TR/webauthn-2/#sctn-createCredential (Step 16)\n            return new WebAuthnError({\n                message: 'Authentication ceremony was sent an abort signal',\n                code: 'ERROR_CEREMONY_ABORTED',\n                cause: error,\n            });\n        }\n    }\n    else if (error.name === 'NotAllowedError') {\n        /**\n         * Pass the error directly through. Platforms are overloading this error beyond what the spec\n         * defines and we don't want to overwrite potentially useful error messages.\n         */\n        return new WebAuthnError({\n            message: error.message,\n            code: 'ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY',\n            cause: error,\n        });\n    }\n    else if (error.name === 'SecurityError') {\n        const effectiveDomain = globalThis.location.hostname;\n        if (!isValidDomain(effectiveDomain)) {\n            // https://www.w3.org/TR/webauthn-2/#sctn-discover-from-external-source (Step 5)\n            return new WebAuthnError({\n                message: `${globalThis.location.hostname} is an invalid domain`,\n                code: 'ERROR_INVALID_DOMAIN',\n                cause: error,\n            });\n        }\n        else if (publicKey.rpId !== effectiveDomain) {\n            // https://www.w3.org/TR/webauthn-2/#sctn-discover-from-external-source (Step 6)\n            return new WebAuthnError({\n                message: `The RP ID \"${publicKey.rpId}\" is invalid for this domain`,\n                code: 'ERROR_INVALID_RP_ID',\n                cause: error,\n            });\n        }\n    }\n    else if (error.name === 'UnknownError') {\n        // https://www.w3.org/TR/webauthn-2/#sctn-op-get-assertion (Step 1)\n        // https://www.w3.org/TR/webauthn-2/#sctn-op-get-assertion (Step 12)\n        return new WebAuthnError({\n            message: 'The authenticator was unable to process the specified options, or could not create a new assertion signature',\n            code: 'ERROR_AUTHENTICATOR_GENERAL_ERROR',\n            cause: error,\n        });\n    }\n    return error;\n}\n","import { bufferToBase64URLString } from '../helpers/bufferToBase64URLString.js';\nimport { base64URLStringToBuffer } from '../helpers/base64URLStringToBuffer.js';\nimport { browserSupportsWebAuthn } from '../helpers/browserSupportsWebAuthn.js';\nimport { browserSupportsWebAuthnAutofill } from '../helpers/browserSupportsWebAuthnAutofill.js';\nimport { toPublicKeyCredentialDescriptor } from '../helpers/toPublicKeyCredentialDescriptor.js';\nimport { identifyAuthenticationError } from '../helpers/identifyAuthenticationError.js';\nimport { WebAuthnAbortService } from '../helpers/webAuthnAbortService.js';\nimport { toAuthenticatorAttachment } from '../helpers/toAuthenticatorAttachment.js';\n/**\n * Begin authenticator \"login\" via WebAuthn assertion\n *\n * @param optionsJSON Output from **@simplewebauthn/server**'s `generateAuthenticationOptions()`\n * @param useBrowserAutofill (Optional) Initialize conditional UI to enable logging in via browser autofill prompts. Defaults to `false`.\n * @param verifyBrowserAutofillInput (Optional) Ensure a suitable `<input>` element is present when `useBrowserAutofill` is `true`. Defaults to `true`.\n */\nexport async function startAuthentication(options) {\n    // @ts-ignore: Intentionally check for old call structure to warn about improper API call\n    if (!options.optionsJSON && options.challenge) {\n        console.warn('startAuthentication() was not called correctly. It will try to continue with the provided options, but this call should be refactored to use the expected call structure instead. See https://simplewebauthn.dev/docs/packages/browser#typeerror-cannot-read-properties-of-undefined-reading-challenge for more information.');\n        // @ts-ignore: Reassign the options, passed in as a positional argument, to the expected variable\n        options = { optionsJSON: options };\n    }\n    const { optionsJSON, useBrowserAutofill = false, verifyBrowserAutofillInput = true, } = options;\n    if (!browserSupportsWebAuthn()) {\n        throw new Error('WebAuthn is not supported in this browser');\n    }\n    // We need to avoid passing empty array to avoid blocking retrieval\n    // of public key\n    let allowCredentials;\n    if (optionsJSON.allowCredentials?.length !== 0) {\n        allowCredentials = optionsJSON.allowCredentials?.map(toPublicKeyCredentialDescriptor);\n    }\n    // We need to convert some values to Uint8Arrays before passing the credentials to the navigator\n    const publicKey = {\n        ...optionsJSON,\n        challenge: base64URLStringToBuffer(optionsJSON.challenge),\n        allowCredentials,\n    };\n    // Prepare options for `.get()`\n    const getOptions = {};\n    /**\n     * Set up the page to prompt the user to select a credential for authentication via the browser's\n     * input autofill mechanism.\n     */\n    if (useBrowserAutofill) {\n        if (!(await browserSupportsWebAuthnAutofill())) {\n            throw Error('Browser does not support WebAuthn autofill');\n        }\n        // Check for an <input> with \"webauthn\" in its `autocomplete` attribute\n        const eligibleInputs = document.querySelectorAll(\"input[autocomplete$='webauthn']\");\n        // WebAuthn autofill requires at least one valid input\n        if (eligibleInputs.length < 1 && verifyBrowserAutofillInput) {\n            throw Error('No <input> with \"webauthn\" as the only or last value in its `autocomplete` attribute was detected');\n        }\n        // `CredentialMediationRequirement` doesn't know about \"conditional\" yet as of\n        // typescript@4.6.3\n        getOptions.mediation = 'conditional';\n        // Conditional UI requires an empty allow list\n        publicKey.allowCredentials = [];\n    }\n    // Finalize options\n    getOptions.publicKey = publicKey;\n    // Set up the ability to cancel this request if the user attempts another\n    getOptions.signal = WebAuthnAbortService.createNewAbortSignal();\n    // Wait for the user to complete assertion\n    let credential;\n    try {\n        credential = (await navigator.credentials.get(getOptions));\n    }\n    catch (err) {\n        throw identifyAuthenticationError({ error: err, options: getOptions });\n    }\n    if (!credential) {\n        throw new Error('Authentication was not completed');\n    }\n    const { id, rawId, response, type } = credential;\n    let userHandle = undefined;\n    if (response.userHandle) {\n        userHandle = bufferToBase64URLString(response.userHandle);\n    }\n    // Convert values to base64 to make it easier to send back to the server\n    return {\n        id,\n        rawId: bufferToBase64URLString(rawId),\n        response: {\n            authenticatorData: bufferToBase64URLString(response.authenticatorData),\n            clientDataJSON: bufferToBase64URLString(response.clientDataJSON),\n            signature: bufferToBase64URLString(response.signature),\n            userHandle,\n        },\n        type,\n        clientExtensionResults: credential.getClientExtensionResults(),\n        authenticatorAttachment: toAuthenticatorAttachment(credential.authenticatorAttachment),\n    };\n}\n","import { browserSupportsWebAuthn } from './browserSupportsWebAuthn.js';\n/**\n * Determine whether the browser can communicate with a built-in authenticator, like\n * Touch ID, Android fingerprint scanner, or Windows Hello.\n *\n * This method will _not_ be able to tell you the name of the platform authenticator.\n */\nexport function platformAuthenticatorIsAvailable() {\n    if (!browserSupportsWebAuthn()) {\n        return new Promise((resolve) => resolve(false));\n    }\n    return PublicKeyCredential.isUserVerifyingPlatformAuthenticatorAvailable();\n}\n"],"names":[],"mappings":"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","ignoreList":[1,2,3,4,5,6,7,8,9,10,11,12,13,14]}