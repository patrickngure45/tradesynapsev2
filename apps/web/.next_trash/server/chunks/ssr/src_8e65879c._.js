module.exports=[56773,a=>{"use strict";var b=a.i(187924);let c=a.i(572131).forwardRef(function({className:a="",type:c="text",...d},e){return(0,b.jsx)("input",{ref:e,type:c,className:"h-11 w-full rounded-xl border border-[var(--v2-border)] bg-[var(--v2-surface)] px-3 text-[14px] text-[var(--v2-text)] shadow-[var(--v2-shadow-sm)] outline-none placeholder:text-[color-mix(in_srgb,var(--v2-muted)_70%,transparent)] focus:ring-2 focus:ring-[var(--v2-ring)] "+a,...d})});a.s(["V2Input",0,c])},556836,a=>{"use strict";var b=a.i(187924);function c(a){let b=a?.variant??"secondary",c=a?.size??"md";return["inline-flex select-none items-center justify-center gap-2 whitespace-nowrap rounded-xl transition focus:outline-none focus:ring-2 focus:ring-[var(--v2-ring)] disabled:pointer-events-none disabled:opacity-55","lg"===c?"h-12 px-5 text-[15px]":"sm"===c?"h-9 px-3 text-[13px]":"h-11 px-4 text-[14px]","primary"===b?"bg-[var(--v2-accent)] text-white font-semibold shadow-[var(--v2-shadow-sm)] hover:brightness-105":"danger"===b?"bg-[var(--down)] text-white font-semibold shadow-[var(--v2-shadow-sm)] hover:brightness-105":"ghost"===b?"bg-transparent text-[var(--v2-text)] font-semibold hover:bg-[var(--v2-surface-2)]":"border border-[var(--v2-border)] bg-[var(--v2-surface)] text-[var(--v2-text)] font-semibold shadow-[var(--v2-shadow-sm)] hover:bg-[var(--v2-surface-2)]",a?.fullWidth?"w-full":"",a?.className??""].filter(Boolean).join(" ")}let d=a.i(572131).forwardRef(function({variant:a,size:d,fullWidth:e,className:f,type:g,...h},i){return(0,b.jsx)("button",{ref:i,type:g??"button",className:c({variant:a,size:d,fullWidth:e,className:f}),...h})});a.s(["V2Button",0,d,"v2ButtonClassName",()=>c])},214373,a=>{"use strict";var b=a.i(187924);function c({children:a,className:c=""}){return(0,b.jsx)("section",{className:"rounded-[var(--v2-radius-lg)] border border-[var(--v2-border)] bg-[var(--v2-surface)] shadow-[var(--v2-shadow-sm)] "+c,children:a})}function d({title:a,subtitle:c,right:d}){return(0,b.jsxs)("header",{className:"flex items-start justify-between gap-3 px-4 pt-4",children:[(0,b.jsxs)("div",{className:"min-w-0",children:[(0,b.jsx)("div",{className:"text-[15px] font-semibold text-[var(--v2-text)]",children:a}),c?(0,b.jsx)("div",{className:"mt-0.5 text-[13px] text-[var(--v2-muted)]",children:c}):null]}),d?(0,b.jsx)("div",{className:"shrink-0",children:d}):null]})}function e({children:a}){return(0,b.jsx)("div",{className:"px-4 pb-4 pt-3",children:a})}a.s(["V2Card",()=>c,"V2CardBody",()=>e,"V2CardHeader",()=>d])},782691,a=>{"use strict";var b=a.i(187924);function c({className:a=""}){return(0,b.jsx)("div",{className:"animate-pulse rounded-xl border border-[var(--v2-border)] bg-[var(--v2-surface-2)] "+a,"aria-hidden":"true"})}a.s(["V2Skeleton",()=>c])},138529,a=>{"use strict";var b=a.i(187924),c=a.i(238246),d=a.i(572131),e=a.i(556836),f=a.i(214373),g=a.i(56773),h=a.i(782691);function i(a){let b="number"==typeof a?a:Number(String(a));return Number.isFinite(b)?b:null}function j(a,b){let c=i(a),d=i(b);return null==c||null==d||c<=0?null:(d-c)/c*100}function k(a){let b=i(a);if(null==b)return"—";if(0===b)return"0";let c=Math.abs(b);return b.toLocaleString(void 0,{maximumFractionDigits:c>=1e3?2:c>=1?4:c>=.01?6:8})}function l(){let[a,i]=(0,d.useState)(""),[l,m]=(0,d.useState)(!0),[n,o]=(0,d.useState)(null),[p,q]=(0,d.useState)([]),[r,s]=(0,d.useState)(()=>[]),t=(0,d.useRef)(0),u=(0,d.useRef)(null),v=async()=>{let a=++t.current;u.current?.abort();let b=new AbortController;u.current=b,o(null),0===p.length&&m(!0);try{let c=await fetch("/api/exchange/markets/overview?fiat=USD",{cache:"no-store",signal:b.signal}),d=await c.json().catch(()=>null);if(!c.ok)throw Error("markets_unavailable");let e=Array.isArray(d?.markets)?d.markets:[];if(a!==t.current)return;q(e.filter(a=>"USDT"===String(a.quote_symbol).toUpperCase()))}catch(b){if(b instanceof DOMException&&"AbortError"===b.name||a!==t.current)return;0===p.length&&o(b instanceof Error?b.message:String(b))}finally{a===t.current&&m(!1)}};(0,d.useEffect)(()=>{v();let a=window.setInterval(()=>{"visible"===document.visibilityState&&v()},15e3),b=()=>{"visible"===document.visibilityState&&v()};return document.addEventListener("visibilitychange",b),()=>{window.clearInterval(a),document.removeEventListener("visibilitychange",b)}},[]);let w=a.trim().toUpperCase(),x=!!n&&0===p.length,y=(0,d.useMemo)(()=>{let a=p.map(a=>{let b=j(a.stats?.open??null,a.stats?.last??null);return{m:a,changePct:b}}).filter(a=>null!=a.changePct).slice().sort((a,b)=>{let c=a.changePct??-1/0;return(b.changePct??-1/0)-c});return{gainers:a.slice(0,3),losers:a.slice().reverse().slice(0,3)}},[p]),z=(0,d.useMemo)(()=>p.map(a=>{let b=a.stats?.open??null,c=a.stats?.last??null,d=j(b,c),e=r.includes(a.id);return{...a,open:b,last:c,changePct:d,isFav:e}}).filter(a=>!w||`${String(a.base_symbol).toUpperCase()}/${String(a.quote_symbol).toUpperCase()}`.includes(w)||String(a.symbol).toUpperCase().includes(w)).sort((a,b)=>{if(a.isFav!==b.isFav)return a.isFav?-1:1;let c=null==a.changePct?-1:Math.abs(a.changePct),d=null==b.changePct?-1:Math.abs(b.changePct);return c!==d?d-c:String(a.symbol).localeCompare(String(b.symbol))}),[p,r,w]);return(0,b.jsxs)("main",{className:"space-y-4",children:[(0,b.jsxs)("header",{className:"space-y-2",children:[(0,b.jsx)("div",{className:"text-[11px] font-bold uppercase tracking-widest text-[var(--v2-muted)]",children:"Markets"}),(0,b.jsx)("h1",{className:"text-2xl font-extrabold tracking-tight",children:"Trade USDT pairs"}),(0,b.jsx)("p",{className:"text-sm text-[var(--v2-muted)]",children:"Search, favorite, and open a market to trade."})]}),(0,b.jsx)(g.V2Input,{value:a,onChange:a=>i(a.target.value),placeholder:"Search BTC, ETH, BTC/USDT…",autoCapitalize:"none",autoCorrect:"off",spellCheck:!1}),n||l||w||!y.gainers.length&&!y.losers.length?null:(0,b.jsxs)("section",{className:"grid gap-2",children:[(0,b.jsx)("div",{className:"text-[11px] font-bold uppercase tracking-widest text-[var(--v2-muted)]",children:"Movers"}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,b.jsxs)("div",{className:"rounded-2xl border border-[var(--v2-border)] bg-[var(--v2-surface)] p-3 shadow-[var(--v2-shadow-sm)]",children:[(0,b.jsx)("div",{className:"text-[12px] font-semibold text-[var(--v2-text)]",children:"Top gainers"}),(0,b.jsxs)("div",{className:"mt-2 grid gap-2",children:[y.gainers.map(({m:a,changePct:d})=>{let e=String(a.base_symbol).toUpperCase(),f=String(a.quote_symbol).toUpperCase(),g=`${e}/${f}`,h=d??0,i=`${h>=0?"+":""}${h.toFixed(2)}%`;return(0,b.jsxs)(c.default,{href:`/v2/trade?base=${encodeURIComponent(e)}&quote=${encodeURIComponent(f)}`,className:"flex items-center justify-between gap-2 rounded-xl bg-[var(--v2-surface-2)] px-2 py-2",children:[(0,b.jsx)("div",{className:"text-[12px] font-semibold text-[var(--v2-text)]",children:g}),(0,b.jsx)("div",{className:"text-[12px] font-semibold text-[var(--up)]",children:i})]},a.id)}),0===y.gainers.length?(0,b.jsx)("div",{className:"text-[12px] text-[var(--v2-muted)]",children:"No data yet."}):null]})]}),(0,b.jsxs)("div",{className:"rounded-2xl border border-[var(--v2-border)] bg-[var(--v2-surface)] p-3 shadow-[var(--v2-shadow-sm)]",children:[(0,b.jsx)("div",{className:"text-[12px] font-semibold text-[var(--v2-text)]",children:"Top losers"}),(0,b.jsxs)("div",{className:"mt-2 grid gap-2",children:[y.losers.map(({m:a,changePct:d})=>{let e=String(a.base_symbol).toUpperCase(),f=String(a.quote_symbol).toUpperCase(),g=`${e}/${f}`,h=d??0,i=`${h>=0?"+":""}${h.toFixed(2)}%`;return(0,b.jsxs)(c.default,{href:`/v2/trade?base=${encodeURIComponent(e)}&quote=${encodeURIComponent(f)}`,className:"flex items-center justify-between gap-2 rounded-xl bg-[var(--v2-surface-2)] px-2 py-2",children:[(0,b.jsx)("div",{className:"text-[12px] font-semibold text-[var(--v2-text)]",children:g}),(0,b.jsx)("div",{className:"text-[12px] font-semibold text-[var(--down)]",children:i})]},a.id)}),0===y.losers.length?(0,b.jsx)("div",{className:"text-[12px] text-[var(--v2-muted)]",children:"No data yet."}):null]})]})]})]}),x?(0,b.jsxs)(f.V2Card,{children:[(0,b.jsx)(f.V2CardHeader,{title:"Markets unavailable",subtitle:"Check connectivity and try again."}),(0,b.jsxs)(f.V2CardBody,{children:[(0,b.jsx)("div",{className:"text-sm text-[var(--v2-muted)]",children:String(n)}),(0,b.jsx)("div",{className:"mt-3",children:(0,b.jsx)(e.V2Button,{variant:"primary",fullWidth:!0,onClick:()=>void v(),children:"Retry"})})]})]}):l?(0,b.jsxs)("div",{className:"grid gap-2",children:[(0,b.jsx)(h.V2Skeleton,{className:"h-14"}),(0,b.jsx)(h.V2Skeleton,{className:"h-14"}),(0,b.jsx)(h.V2Skeleton,{className:"h-14"}),(0,b.jsx)(h.V2Skeleton,{className:"h-14"}),(0,b.jsx)(h.V2Skeleton,{className:"h-14"})]}):0===z.length?(0,b.jsxs)(f.V2Card,{children:[(0,b.jsx)(f.V2CardHeader,{title:"No matches",subtitle:"Try a different search."}),(0,b.jsx)(f.V2CardBody,{children:(0,b.jsxs)("div",{className:"text-sm text-[var(--v2-muted)]",children:["Nothing found for “",w||"—","”."]})})]}):(0,b.jsx)("section",{className:"grid gap-2",children:z.slice(0,60).map(a=>{let d=String(a.base_symbol).toUpperCase(),e=String(a.quote_symbol).toUpperCase(),f=`${d}/${e}`,g=a.changePct,h=null==g?"—":`${g>=0?"+":""}${g.toFixed(2)}%`,i=null==g?"text-[var(--v2-muted)]":g>=0?"text-[var(--up)]":"text-[var(--down)]";return(0,b.jsxs)("div",{className:"flex items-center justify-between gap-3 rounded-2xl border border-[var(--v2-border)] bg-[var(--v2-surface)] px-3 py-3 shadow-[var(--v2-shadow-sm)]",children:[(0,b.jsxs)("div",{className:"min-w-0",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(c.default,{href:`/v2/trade?base=${encodeURIComponent(d)}&quote=${encodeURIComponent(e)}`,className:"truncate text-[15px] font-semibold text-[var(--v2-text)]",children:f}),a.is_halted?(0,b.jsx)("span",{className:"rounded-full border border-[var(--v2-border)] bg-[var(--warn-bg)] px-2 py-0.5 text-[11px] font-semibold text-[var(--warn)]",children:"Halted"}):null]}),(0,b.jsxs)("div",{className:"mt-0.5 text-[12px] text-[var(--v2-muted)]",children:["Vol: ",k(a.stats?.quote_volume??null)," ",e]})]}),(0,b.jsxs)("div",{className:"shrink-0 text-right",children:[(0,b.jsx)("div",{className:"text-[14px] font-semibold text-[var(--v2-text)]",children:k(a.last)}),(0,b.jsx)("div",{className:`text-[12px] font-semibold ${i}`,children:h})]}),(0,b.jsx)("button",{type:"button",onClick:()=>{var b;return b=a.id,void s(a=>{let c=a.includes(b)?a.filter(a=>a!==b):[...a,b];try{localStorage.setItem("cw:v2:favMarkets",JSON.stringify(c))}catch{}return c})},className:"ml-1 flex h-11 w-11 items-center justify-center rounded-2xl border shadow-[var(--v2-shadow-sm)] "+(a.isFav?"border-[color-mix(in_srgb,var(--v2-accent)_55%,transparent)] bg-[color-mix(in_srgb,var(--v2-accent)_12%,transparent)] text-[var(--v2-accent)]":"border-[var(--v2-border)] bg-[var(--v2-surface)] text-[var(--v2-muted)] hover:bg-[var(--v2-surface-2)]"),"aria-label":a.isFav?"Remove favorite":"Add favorite",title:a.isFav?"Unfavorite":"Favorite",children:(0,b.jsx)("span",{"aria-hidden":!0,children:a.isFav?"★":"☆"})})]},a.id)})})]})}a.s(["MarketsClient",()=>l])}];

//# sourceMappingURL=src_8e65879c._.js.map