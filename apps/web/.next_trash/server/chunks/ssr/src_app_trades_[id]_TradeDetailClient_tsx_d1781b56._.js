module.exports=[437641,a=>{"use strict";var b=a.i(187924),c=a.i(572131),d=a.i(392415),e=a.i(177394),f=a.i(628347),g=a.i(63836),h=a.i(247348),i=a.i(970937),j=a.i(428925),k=a.i(556836),l=a.i(214373),m=a.i(56773);function n({tradeId:a}){let[n,o]=(0,c.useState)(!0),[p,q]=(0,c.useState)(null),[r,s]=(0,c.useState)("session"),[t,u]=(0,c.useState)(null),[v,w]=(0,c.useState)(""),[x,y]=(0,c.useState)(!1),[z,A]=(0,c.useState)(""),[B,C]=(0,c.useState)(!1),[D,E]=(0,c.useState)(null),[F,G]=(0,c.useState)([]),[H,I]=(0,c.useState)([]),[J,K]=(0,c.useState)(null),[L,M]=(0,c.useState)(null),[N,O]=(0,c.useState)([]),P=(0,c.useMemo)(()=>(function(a){let b=Array.from(new Set(a.map(a=>"string"==typeof a?.type?a.type:"").filter(Boolean))).sort(),c=a.length;if(0===c)return{score:0,evidence_count:c,evidence_types:b,missing_recommendations:["upload a payment proof (receipt/bank_sms)","upload chat export"]};let d=0;(b.includes("receipt")||b.includes("bank_sms"))&&(d+=40),b.includes("chat_export")&&(d+=30),b.includes("screenshot")&&(d+=20),c>=2&&(d+=10),d=Math.max(0,Math.min(100,d));let e=[];return b.includes("receipt")||b.includes("bank_sms")||e.push("upload a payment proof (receipt/bank_sms)"),b.includes("chat_export")||e.push("upload chat export"),b.includes("screenshot")||e.push("upload screenshots"),{score:d,evidence_count:c,evidence_types:b,missing_recommendations:e}})(H),[H]),[Q,R]=(0,c.useState)("receipt"),[S,T]=(0,c.useState)(""),[U,V]=(0,c.useState)("{}"),[W,X]=(0,c.useState)(null),[Y,Z]=(0,c.useState)(!1),[$,_]=(0,c.useState)(""),[aa,ab]=(0,c.useState)("non_payment"),[ac,ad]=(0,c.useState)(!1),[ae,af]=(0,c.useState)("reviewer@local"),[ag,ah]=(0,c.useState)(""),[ai,aj]=(0,c.useState)("release_to_buyer"),[ak,al]=(0,c.useState)(""),[am,an]=(0,c.useState)(!1),[ao,ap]=(0,c.useState)(null),[aq,ar]=(0,c.useState)("info"),[as,at]=(0,c.useState)(!1),au=(0,c.useMemo)(()=>D&&z?z===D.buyer_user_id?"buyer":z===D.seller_user_id?"seller":null:null,[D,z]),av=(a,b)=>as?"Working…":D?z?(0,f.canTransitionTrade)(D.status,a)?b?.role==="buyer"&&z!==D.buyer_user_id?"Buyer only.":b?.role==="seller"&&z!==D.seller_user_id?"Seller only.":"canceled"===a&&"disputed"===D.status?"Use reviewer decision to cancel disputed trades.":"":`Not allowed from status: ${D.status}`:"Select an acting user.":"",aw=(0,c.useMemo)(()=>{let b=`/api/trades/${a}/proof-pack`,c="session"===r?t??z:z;return c?`${b}?user_id=${encodeURIComponent(c)}`:b},[a,z,r,t]),ax=(0,c.useMemo)(()=>`/api/trades/${a}/evidence/upload`,[a]),ay=(0,c.useMemo)(()=>`/api/trades/${a}/dispute`,[a]),az=(0,c.useMemo)(()=>`/api/trades/${a}/dispute/decision`,[a]);async function aA(){try{let a=await (0,g.fetchWhoAmI)();u(a.user_id)}catch(a){if(a instanceof d.ApiError&&"missing_x_user_id"===a.code)return void u(null);u(null)}}async function aB(a){if(!a)return!1;y(!0),q(null);try{return await (0,g.createSessionCookie)({userId:a,bootstrapKey:v||void 0}),await aA(),ar("success"),ap("Session cookie set."),!0}catch(a){return a instanceof d.ApiError?q({code:a.code,details:a.details}):q({code:a instanceof Error?a.message:"session_failed"}),!1}finally{y(!1)}}async function aC(){y(!0),q(null);try{await (0,g.clearSessionCookie)(),await aA(),ar("success"),ap("Signed out.")}catch(a){a instanceof d.ApiError?q({code:a.code,details:a.details}):q({code:a instanceof Error?a.message:"signout_failed"})}finally{y(!1)}}async function aD(){o(!0),q(null);try{let b="header"===r&&z?{"x-user-id":z}:{},[c,e,f,g]=await Promise.all([(0,d.fetchJsonOrThrow)(`/api/trades/${a}`,{cache:"no-store",headers:b}),(0,d.fetchJsonOrThrow)(`/api/trades/${a}/evidence`,{cache:"no-store",headers:b}),(0,d.fetchJsonOrThrow)(`/api/trades/${a}/risk`,{cache:"no-store",headers:b}),(0,d.fetchJsonOrThrow)(ay,{cache:"no-store",headers:b})]);E(c.trade??null),G(c.transitions??[]),I(e.evidence??[]),K(f.risk_assessment??null),M(g.dispute??null),O(g.decisions??[]);let h=c.trade?.buyer_user_id??"";T(a=>a||h);let i=c.trade?.buyer_user_id??"";_(a=>a||i);let j=t??c.trade?.buyer_user_id??"";A(a=>a||j)}catch(a){a instanceof d.ApiError?q({code:a.code,details:a.details}):q({code:a instanceof Error?a.message:"load_failed"})}finally{o(!1)}}async function aE(){q(null);try{if("session"===r&&t&&z&&t!==z)return void q({code:"session_user_mismatch"});await (0,d.fetchJsonOrThrow)(`/api/trades/${a}/risk`,{method:"POST",headers:{"Content-Type":"application/json",..."header"===r&&z?{"x-user-id":z}:{}},body:JSON.stringify({version:"v0"})}),await aD()}catch(a){a instanceof d.ApiError?q({code:a.code,details:a.details}):q({code:a instanceof Error?a.message:"risk_failed"})}}async function aF(){if(!W)return void q({code:"missing_file"});if(!S)return void q({code:"missing_submitted_by_user_id"});Z(!0),q(null);try{if("session"===r&&t&&S&&t!==S)return void q({code:"session_user_mismatch"});let a=new FormData;a.set("submitted_by_user_id",S),a.set("type",Q),a.set("metadata_json",U),a.set("file",W);let b={method:"POST",body:a};"header"===r&&S&&(b.headers={"x-user-id":S}),await (0,d.fetchJsonOrThrow)(ax,b),X(null),await aD()}catch(a){a instanceof d.ApiError?q({code:a.code,details:a.details}):q({code:a instanceof Error?a.message:"upload_failed"})}finally{Z(!1)}}async function aG(){if(!$)return void q({code:"missing_opened_by_user_id"});ad(!0),q(null);try{if("session"===r&&t&&$&&t!==$)return void q({code:"session_user_mismatch"});await (0,d.fetchJsonOrThrow)(ay,{method:"POST",headers:{"Content-Type":"application/json",..."header"===r?{"x-user-id":$}:{}},body:JSON.stringify({opened_by_user_id:$,reason_code:aa})}),await aD()}catch(a){a instanceof d.ApiError?q({code:a.code,details:a.details}):q({code:a instanceof Error?a.message:"open_dispute_failed"})}finally{ad(!1)}}async function aH(){if(!ae)return void q({code:"missing_decided_by"});an(!0),q(null);try{let a={"Content-Type":"application/json"};ag&&(a["x-reviewer-key"]=ag),await (0,d.fetchJsonOrThrow)(az,{method:"POST",headers:a,body:JSON.stringify({decision:ai,decided_by:ae,rationale:ak||void 0})}),al(""),await aD()}catch(a){a instanceof d.ApiError?q({code:a.code,details:a.details}):q({code:a instanceof Error?a.message:"submit_decision_failed"})}finally{an(!1)}}async function aI(b){at(!0),q(null);try{let c={created:"",awaiting_payment:"awaiting-payment",paid_marked:"paid-marked",released:"released",disputed:"",resolved:"resolved",canceled:"canceled"}[b];if(!c)return void q({code:"trade_transition_not_allowed"});let e={method:"POST"};"header"===r&&z&&(e.headers={"x-user-id":z}),await (0,d.fetchJsonOrThrow)(`/api/trades/${a}/status/${c}`,e),ar("success"),ap(`Trade moved to ${b}.`),await aD()}catch(a){a instanceof d.ApiError?q({code:a.code,details:a.details}):q({code:a instanceof Error?a.message:"transition_failed"})}finally{at(!1)}}if((0,c.useEffect)(()=>{let a=(0,h.readActingUserIdPreference)();a&&A(b=>b||a),aA(),C(!0)},[a]),(0,c.useEffect)(()=>{"session"!==r||!z||t===z||x||v&&aB(z)},[r]),(0,c.useEffect)(()=>{z&&(0,h.persistActingUserIdPreference)(z)},[z]),(0,c.useEffect)(()=>{if(B){if("header"===r&&!z||"session"===r&&!t){o(!1),q({code:"missing_x_user_id"});return}aD()}},[a,z,B,r,t]),n)return(0,b.jsx)("div",{className:"mt-6 text-[13px] text-[var(--v2-muted)]",children:"Loading…"});if(p)return(0,b.jsx)(e.ApiErrorBanner,{error:p,className:"mt-6",onRetry:()=>void aD()});if(!D)return(0,b.jsx)("div",{className:"mt-6 text-[13px] text-[var(--v2-muted)]",children:"Not found."});let aJ="h-11 w-full rounded-xl border border-[var(--v2-border)] bg-[var(--v2-surface)] px-3 text-[14px] font-semibold text-[var(--v2-text)] shadow-[var(--v2-shadow-sm)] outline-none focus:ring-2 focus:ring-[var(--v2-ring)]",aK="min-h-20 w-full rounded-xl border border-[var(--v2-border)] bg-[var(--v2-surface)] px-3 py-2 text-[13px] text-[var(--v2-text)] shadow-[var(--v2-shadow-sm)] outline-none focus:ring-2 focus:ring-[var(--v2-ring)]",aL="overflow-auto rounded-xl border border-[var(--v2-border)] bg-[var(--v2-surface-2)] px-3 py-2 font-mono text-[12px] text-[var(--v2-text)]";return(0,b.jsxs)("div",{className:"mt-6 grid gap-6",children:[(0,b.jsx)(j.Toast,{message:ao,kind:aq,onDone:()=>ap(null)}),(0,b.jsxs)(l.V2Card,{children:[(0,b.jsx)(l.V2CardHeader,{title:"Viewer",subtitle:(0,b.jsxs)("span",{children:["Auth: use a session cookie (recommended) or send"," ",(0,b.jsx)("span",{className:"font-mono",children:"x-user-id"}),"."]})}),(0,b.jsx)(l.V2CardBody,{children:(0,b.jsxs)("div",{className:"grid gap-2",children:[(0,b.jsxs)("div",{className:"flex flex-wrap items-center gap-3",children:[(0,b.jsxs)("label",{className:"flex items-center gap-2 text-[12px] text-[var(--v2-muted)]",children:[(0,b.jsx)("span",{className:"font-semibold",children:"Auth mode"}),(0,b.jsxs)("select",{className:"h-9 rounded-xl border border-[var(--v2-border)] bg-[var(--v2-surface)] px-3 text-[12px] font-semibold text-[var(--v2-text)] shadow-[var(--v2-shadow-sm)] outline-none focus:ring-2 focus:ring-[var(--v2-ring)]",value:r,onChange:a=>{let b=a.target.value;s(b),"session"!==b||!z||t===z||v&&aB(z)},children:[(0,b.jsx)("option",{value:"session",children:"session cookie"}),(0,b.jsx)("option",{value:"header",children:"x-user-id header"})]})]}),"session"===r?(0,b.jsxs)("div",{className:"flex flex-wrap items-center gap-2 text-[12px] text-[var(--v2-muted)]",children:[(0,b.jsx)("span",{className:"font-semibold",children:"Session"}),(0,b.jsx)("span",{className:"font-mono",children:t?`${t.slice(0,8)}…`:"(none)"}),(0,b.jsx)(k.V2Button,{size:"sm",variant:"secondary",disabled:!z||x,onClick:()=>void aB(z),children:"Sign in"}),(0,b.jsx)(k.V2Button,{size:"sm",variant:"secondary",disabled:x,onClick:()=>void aC(),children:"Sign out"}),(0,b.jsxs)("details",{children:[(0,b.jsx)("summary",{className:"cursor-pointer text-[11px] font-semibold text-[var(--v2-muted)]",children:"prod bootstrap"}),(0,b.jsx)("div",{className:"mt-2 grid gap-1",children:(0,b.jsxs)("label",{className:"grid gap-1",children:[(0,b.jsx)("span",{className:"text-[11px] font-semibold text-[var(--v2-muted)]",children:"x-session-bootstrap-key"}),(0,b.jsx)(m.V2Input,{className:"h-10 font-mono text-[12px]",value:v,type:"password",placeholder:"(only needed in production)",onChange:a=>w(a.target.value)})]})})]})]}):(0,b.jsx)("div",{className:"text-[12px] text-[var(--v2-muted)]",children:"Requests send x-user-id."})]}),(0,b.jsxs)("label",{className:"grid gap-1",children:[(0,b.jsx)("span",{className:"text-[12px] font-semibold text-[var(--v2-muted)]",children:"Acting user"}),(0,b.jsxs)("select",{className:aJ,value:z,onChange:a=>{let b=a.target.value;"session"!==r?A(b):(A(b),t===b||v&&(async()=>{await aB(b)||A(z)})())},children:[(0,b.jsxs)("option",{value:D.buyer_user_id,children:["buyer ",D.buyer_user_id.slice(0,8),"…"]}),(0,b.jsxs)("option",{value:D.seller_user_id,children:["seller ",D.seller_user_id.slice(0,8),"…"]})]})]})]})})]}),(0,b.jsxs)(l.V2Card,{children:[(0,b.jsx)(l.V2CardHeader,{title:"Trade",right:(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("a",{className:"text-[13px] font-semibold text-[var(--v2-accent-2)] underline",href:aw,children:"Download Proof Pack"}),(0,b.jsx)(k.V2Button,{size:"sm",variant:"secondary",onClick:async()=>{try{let a=new URL(aw,window.location.origin).toString();await (0,i.copyToClipboard)(a)?(ar("success"),ap("Proof pack link copied.")):(ar("error"),ap("Copy failed."))}catch{ar("error"),ap("Copy failed.")}},children:"Copy link"})]})}),(0,b.jsxs)(l.V2CardBody,{children:[(0,b.jsxs)("details",{className:"mt-2",children:[(0,b.jsx)("summary",{className:"cursor-pointer text-[12px] font-semibold text-[var(--v2-muted)]",children:"Verify locally"}),(0,b.jsxs)("div",{className:"mt-2 grid gap-2 text-[12px] text-[var(--v2-muted)]",children:[(0,b.jsxs)("div",{children:["Run from ",(0,b.jsx)("span",{className:"font-mono",children:"apps/web"})," after downloading the ZIP:"]}),(0,b.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[(0,b.jsx)("pre",{className:aL,children:"npm run verify:proofpack -- <path-to-zip>"}),(0,b.jsx)(k.V2Button,{size:"sm",variant:"secondary",onClick:async()=>{let a=await (0,i.copyToClipboard)("npm run verify:proofpack -- <path-to-zip>");ar(a?"success":"error"),ap(a?"Command copied.":"Copy failed.")},children:"Copy"})]}),(0,b.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[(0,b.jsx)("pre",{className:aL,children:"npm run verify:proofpack -- --require-signed <path-to-zip>"}),(0,b.jsx)(k.V2Button,{size:"sm",variant:"secondary",onClick:async()=>{let a=await (0,i.copyToClipboard)("npm run verify:proofpack -- --require-signed <path-to-zip>");ar(a?"success":"error"),ap(a?"Command copied.":"Copy failed.")},children:"Copy"})]})]})]}),F.length?(0,b.jsxs)("div",{className:"mt-3 rounded-2xl border border-[var(--v2-border)] bg-[var(--v2-surface-2)] p-3 text-[13px]",children:[(0,b.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[(0,b.jsx)("span",{className:"text-[var(--v2-muted)]",children:"Latest transition:"}),(0,b.jsxs)("span",{className:"font-mono",children:[F[F.length-1].from_status??"∅"," → ",F[F.length-1].to_status]}),(0,b.jsx)("span",{className:"text-[var(--v2-muted)]",children:"@"}),(0,b.jsx)("span",{className:"font-mono text-[12px] text-[var(--v2-muted)]",children:F[F.length-1].created_at})]}),F[F.length-1].reason_code?(0,b.jsx)("div",{className:"mt-1 font-mono text-[12px] text-[var(--v2-muted)]",children:F[F.length-1].reason_code}):null]}):null,(0,b.jsxs)("div",{className:"mt-3 grid gap-2 text-[13px] text-[var(--v2-text)]",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"text-[var(--v2-muted)]",children:"Status:"})," ",D.status]}),au?(0,b.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[(0,b.jsx)("span",{className:"text-[var(--v2-muted)]",children:"You are:"}),(0,b.jsx)("span",{className:"buyer"===au?"rounded-full border border-[color-mix(in_srgb,var(--up)_35%,var(--v2-border))] bg-[color-mix(in_srgb,var(--up)_10%,transparent)] px-2 py-0.5 text-[11px] font-semibold text-[var(--up)]":"rounded-full border border-[color-mix(in_srgb,var(--v2-accent-2)_35%,var(--v2-border))] bg-[color-mix(in_srgb,var(--v2-accent-2)_10%,transparent)] px-2 py-0.5 text-[11px] font-semibold text-[var(--v2-accent-2)]",children:au})]}):null,(0,b.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[(0,b.jsx)("span",{className:"text-[12px] text-[var(--v2-muted)]",children:"Lifecycle:"}),(0,b.jsx)(k.V2Button,{size:"sm",variant:"secondary",disabled:as||!(0,f.canTransitionTrade)(D.status,"awaiting_payment"),onClick:()=>void aI("awaiting_payment"),title:av("awaiting_payment")||"created → awaiting_payment",children:"Awaiting payment"}),(0,b.jsx)(k.V2Button,{size:"sm",variant:"secondary",disabled:as||!(0,f.canTransitionTrade)(D.status,"paid_marked")||z!==D.buyer_user_id,onClick:()=>void aI("paid_marked"),title:av("paid_marked",{role:"buyer"})||"awaiting_payment → paid_marked",children:"Mark paid (buyer)"}),(0,b.jsx)(k.V2Button,{size:"sm",variant:"secondary",disabled:as||!(0,f.canTransitionTrade)(D.status,"released")||z!==D.seller_user_id,onClick:()=>void aI("released"),title:av("released",{role:"seller"})||"paid_marked → released",children:"Release (seller)"}),(0,b.jsx)(k.V2Button,{size:"sm",variant:"secondary",disabled:as||!(0,f.canTransitionTrade)(D.status,"resolved"),onClick:()=>void aI("resolved"),title:av("resolved")||"Resolve trade",children:"Resolve"}),(0,b.jsx)(k.V2Button,{size:"sm",variant:"danger",disabled:as||"disputed"===D.status||!(0,f.canTransitionTrade)(D.status,"canceled"),onClick:()=>void aI("canceled"),title:av("canceled")||"Cancel trade",children:"Cancel"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"text-[var(--v2-muted)]",children:"Pair:"})," ",D.crypto_asset,"/",D.fiat_currency]}),(0,b.jsxs)("div",{className:"font-mono",children:[(0,b.jsx)("span",{className:"text-[var(--v2-muted)] font-sans",children:"Price:"})," ",D.price]}),(0,b.jsxs)("div",{className:"font-mono",children:[(0,b.jsx)("span",{className:"text-[var(--v2-muted)] font-sans",children:"Fair mid:"})," ",D.fair_price_mid??"—"]}),(0,b.jsxs)("div",{className:"font-mono",children:[(0,b.jsx)("span",{className:"text-[var(--v2-muted)] font-sans",children:"Deviation pct:"})," ",D.price_deviation_pct??"—"]}),(0,b.jsxs)("div",{className:"flex flex-wrap items-center gap-2 text-[12px]",children:[(0,b.jsx)("span",{className:"font-mono text-[var(--v2-muted)]",children:D.id}),(0,b.jsx)(k.V2Button,{size:"sm",variant:"secondary",onClick:async()=>{let a=await (0,i.copyToClipboard)(D.id);ar(a?"success":"error"),ap(a?"Trade ID copied.":"Copy failed.")},children:"Copy ID"}),(0,b.jsx)(k.V2Button,{size:"sm",variant:"secondary",onClick:async()=>{try{let a=z?`/trades/${D.id}?user_id=${encodeURIComponent(z)}`:`/trades/${D.id}`,b=new URL(a,window.location.origin).toString(),c=await (0,i.copyToClipboard)(b);ar(c?"success":"error"),ap(c?"Trade link copied.":"Copy failed.")}catch{ar("error"),ap("Copy failed.")}},children:"Copy link"})]})]})]})]}),(0,b.jsxs)(l.V2Card,{children:[(0,b.jsx)(l.V2CardHeader,{title:"Risk",right:(0,b.jsx)(k.V2Button,{variant:"secondary",onClick:()=>void aE(),children:"Recompute v0"})}),(0,b.jsx)(l.V2CardBody,{children:J?(0,b.jsxs)("div",{className:"mt-1 text-[13px]",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"text-[var(--v2-muted)]",children:"Score:"})," ",J.score]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"text-[var(--v2-muted)]",children:"Action:"})," ",J.recommended_action]}),(0,b.jsxs)("details",{className:"mt-3",children:[(0,b.jsx)("summary",{className:"cursor-pointer text-[12px] font-semibold text-[var(--v2-muted)]",children:"Factors JSON"}),(0,b.jsx)("pre",{className:"mt-2 "+aL,children:function(a){try{return JSON.stringify(a,null,2)}catch{return""}}(J.factors_json)})]})]}):(0,b.jsx)("div",{className:"mt-1 text-[13px] text-[var(--v2-muted)]",children:"No risk assessment yet."})})]}),(0,b.jsxs)(l.V2Card,{children:[(0,b.jsx)(l.V2CardHeader,{title:"Evidence"}),(0,b.jsxs)(l.V2CardBody,{children:[(0,b.jsxs)("div",{className:"text-[13px] text-[var(--v2-muted)]",children:["Completeness score: ",(0,b.jsx)("span",{className:"font-mono",children:P.score}),"/100",P.missing_recommendations.length?(0,b.jsxs)("span",{children:[" ","— next: ",P.missing_recommendations.join(", ")]}):null]}),(0,b.jsxs)("div",{className:"mt-3 grid gap-3",children:[(0,b.jsxs)("div",{className:"grid gap-2 md:grid-cols-2",children:[(0,b.jsxs)("label",{className:"grid gap-1",children:[(0,b.jsx)("span",{className:"text-[12px] font-semibold text-[var(--v2-muted)]",children:"Submitted by"}),(0,b.jsxs)("select",{className:aJ,value:S,onChange:a=>T(a.target.value),children:[(0,b.jsxs)("option",{value:D.buyer_user_id,children:["buyer ",D.buyer_user_id.slice(0,8),"…"]}),(0,b.jsxs)("option",{value:D.seller_user_id,children:["seller ",D.seller_user_id.slice(0,8),"…"]})]})]}),(0,b.jsxs)("label",{className:"grid gap-1",children:[(0,b.jsx)("span",{className:"text-[12px] font-semibold text-[var(--v2-muted)]",children:"Type"}),(0,b.jsxs)("select",{className:aJ,value:Q,onChange:a=>R(a.target.value),children:[(0,b.jsx)("option",{value:"receipt",children:"receipt"}),(0,b.jsx)("option",{value:"screenshot",children:"screenshot"}),(0,b.jsx)("option",{value:"bank_sms",children:"bank_sms"}),(0,b.jsx)("option",{value:"chat_export",children:"chat_export"}),(0,b.jsx)("option",{value:"other",children:"other"})]})]})]}),(0,b.jsxs)("label",{className:"grid gap-1",children:[(0,b.jsx)("span",{className:"text-[12px] font-semibold text-[var(--v2-muted)]",children:"Metadata JSON"}),(0,b.jsx)("textarea",{className:aK+" font-mono text-[12px]",value:U,onChange:a=>V(a.target.value)})]}),(0,b.jsxs)("label",{className:"grid gap-1",children:[(0,b.jsx)("span",{className:"text-[12px] font-semibold text-[var(--v2-muted)]",children:"File"}),(0,b.jsx)("input",{className:"text-[13px] text-[var(--v2-text)]",type:"file",onChange:a=>X(a.target.files?.item(0)??null)})]}),(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)(k.V2Button,{variant:"primary",disabled:Y,onClick:()=>void aF(),children:Y?"Uploading…":"Upload"}),(0,b.jsx)(k.V2Button,{variant:"ghost",onClick:()=>void aD(),children:"Refresh"})]}),(0,b.jsxs)("div",{className:"mt-2 rounded-2xl border border-[var(--v2-border)] bg-[var(--v2-surface)]",children:[(0,b.jsxs)("div",{className:"border-b border-[var(--v2-border)] px-3 py-2 text-[12px] font-semibold text-[var(--v2-muted)]",children:["Evidence objects (",H.length,")"]}),(0,b.jsxs)("ul",{className:"divide-y divide-[var(--v2-border)] text-[13px]",children:[H.map(a=>(0,b.jsxs)("li",{className:"px-3 py-2",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"text-[var(--v2-muted)]",children:a.type})," — ",a.sha256.slice(0,10),"…"]}),(0,b.jsx)("div",{className:"text-[12px] text-[var(--v2-muted)]",children:a.created_at})]}),(0,b.jsx)("div",{className:"mt-1 font-mono text-[12px] text-[var(--v2-muted)]",children:a.storage_uri})]},a.id)),0===H.length?(0,b.jsx)("li",{className:"px-3 py-3 text-[13px] text-[var(--v2-muted)]",children:"No evidence yet."}):null]})]})]})]})]}),(0,b.jsxs)(l.V2Card,{children:[(0,b.jsx)(l.V2CardHeader,{title:"Dispute"}),(0,b.jsx)(l.V2CardBody,{children:L?(0,b.jsxs)("div",{className:"grid gap-3 text-[13px]",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"text-[var(--v2-muted)]",children:"Status:"})," ",L.status]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"text-[var(--v2-muted)]",children:"Reason:"})," ",L.reason_code]}),(0,b.jsxs)("div",{className:"font-mono text-[12px] text-[var(--v2-muted)]",children:["opened_by=",L.opened_by_user_id," opened_at=",L.opened_at]}),(0,b.jsxs)("div",{className:"rounded-2xl border border-[var(--v2-border)]",children:[(0,b.jsxs)("div",{className:"border-b border-[var(--v2-border)] px-3 py-2 text-[12px] font-semibold text-[var(--v2-muted)]",children:["Decisions (",N.length,")"]}),(0,b.jsxs)("ul",{className:"divide-y divide-[var(--v2-border)] text-[13px]",children:[N.map(a=>(0,b.jsxs)("li",{className:"px-3 py-2",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"text-[var(--v2-muted)]",children:a.decision})," — ",a.decided_by]}),(0,b.jsx)("div",{className:"text-[12px] text-[var(--v2-muted)]",children:a.created_at})]}),a.rationale?(0,b.jsx)("div",{className:"mt-1 text-[12px] text-[var(--v2-muted)]",children:a.rationale}):null]},a.id)),0===N.length?(0,b.jsx)("li",{className:"px-3 py-3 text-sm text-zinc-500",children:"No decisions yet."}):null]})]}),"resolved"!==L.status?(0,b.jsxs)("div",{className:"mt-2 grid gap-2",children:[(0,b.jsx)("div",{className:"text-[13px] text-[var(--v2-muted)]",children:"Add decision (demo)"}),(0,b.jsxs)("label",{className:"grid gap-1",children:[(0,b.jsx)("span",{className:"text-[12px] font-semibold text-[var(--v2-muted)]",children:"Decided by"}),(0,b.jsx)(m.V2Input,{value:ae,onChange:a=>af(a.target.value)})]}),(0,b.jsxs)("label",{className:"grid gap-1",children:[(0,b.jsx)("span",{className:"text-[12px] font-semibold text-[var(--v2-muted)]",children:"Reviewer key (optional)"}),(0,b.jsx)(m.V2Input,{className:"font-mono text-[12px]",placeholder:"PROOFPACK_REVIEWER_KEY",value:ag,onChange:a=>ah(a.target.value)})]}),(0,b.jsxs)("label",{className:"grid gap-1",children:[(0,b.jsx)("span",{className:"text-[12px] font-semibold text-[var(--v2-muted)]",children:"Decision"}),(0,b.jsxs)("select",{className:aJ,value:ai,onChange:a=>aj(a.target.value),children:[(0,b.jsx)("option",{value:"release_to_buyer",children:"release_to_buyer"}),(0,b.jsx)("option",{value:"refund_buyer",children:"refund_buyer"}),(0,b.jsx)("option",{value:"release_to_seller",children:"release_to_seller"}),(0,b.jsx)("option",{value:"cancel_trade",children:"cancel_trade"})]})]}),(0,b.jsxs)("label",{className:"grid gap-1",children:[(0,b.jsx)("span",{className:"text-[12px] font-semibold text-[var(--v2-muted)]",children:"Rationale"}),(0,b.jsx)("textarea",{className:aK,value:ak,onChange:a=>al(a.target.value)})]}),(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)(k.V2Button,{variant:"primary",disabled:am,onClick:()=>void aH(),children:am?"Submitting…":"Submit decision"}),(0,b.jsx)(k.V2Button,{variant:"ghost",onClick:()=>void aD(),children:"Refresh"})]})]}):(0,b.jsxs)("div",{className:"mt-2 text-[13px] text-[var(--v2-muted)]",children:["Resolved at ",L.resolved_at??"—"]})]}):(0,b.jsxs)("div",{className:"mt-3 grid gap-3",children:[(0,b.jsx)("div",{className:"text-[13px] text-[var(--v2-muted)]",children:"No dispute yet."}),(0,b.jsxs)("div",{className:"grid gap-2 md:grid-cols-2",children:[(0,b.jsxs)("label",{className:"grid gap-1",children:[(0,b.jsx)("span",{className:"text-[12px] font-semibold text-[var(--v2-muted)]",children:"Opened by"}),(0,b.jsxs)("select",{className:aJ,value:$,onChange:a=>_(a.target.value),children:[(0,b.jsxs)("option",{value:D.buyer_user_id,children:["buyer ",D.buyer_user_id.slice(0,8),"…"]}),(0,b.jsxs)("option",{value:D.seller_user_id,children:["seller ",D.seller_user_id.slice(0,8),"…"]})]})]}),(0,b.jsxs)("label",{className:"grid gap-1",children:[(0,b.jsx)("span",{className:"text-[12px] font-semibold text-[var(--v2-muted)]",children:"Reason"}),(0,b.jsxs)("select",{className:aJ,value:aa,onChange:a=>ab(a.target.value),children:[(0,b.jsx)("option",{value:"non_payment",children:"non_payment"}),(0,b.jsx)("option",{value:"chargeback",children:"chargeback"}),(0,b.jsx)("option",{value:"phishing",children:"phishing"}),(0,b.jsx)("option",{value:"other",children:"other"})]})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)(k.V2Button,{variant:"primary",disabled:ac,onClick:()=>void aG(),children:ac?"Opening…":"Open dispute"}),(0,b.jsx)(k.V2Button,{variant:"ghost",onClick:()=>void aD(),children:"Refresh"})]})]})})]}),(0,b.jsxs)(l.V2Card,{children:[(0,b.jsx)(l.V2CardHeader,{title:"Transitions"}),(0,b.jsx)(l.V2CardBody,{children:(0,b.jsx)("ul",{className:"divide-y divide-[var(--v2-border)] text-[13px]",children:F.map(a=>(0,b.jsxs)("li",{className:"py-2",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"text-[var(--v2-muted)]",children:a.created_at})," — ",a.from_status??"∅"," → ",a.to_status]}),(0,b.jsx)("div",{className:"text-[12px] text-[var(--v2-muted)] font-mono",children:a.reason_code??""})]},a.id))})})]})]})}a.s(["TradeDetailClient",()=>n],437641)}];

//# sourceMappingURL=src_app_trades_%5Bid%5D_TradeDetailClient_tsx_d1781b56._.js.map