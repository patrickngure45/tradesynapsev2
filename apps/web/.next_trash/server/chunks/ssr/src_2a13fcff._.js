module.exports=[556836,a=>{"use strict";var b=a.i(187924);function c(a){let b=a?.variant??"secondary",c=a?.size??"md";return["inline-flex select-none items-center justify-center gap-2 whitespace-nowrap rounded-xl transition focus:outline-none focus:ring-2 focus:ring-[var(--v2-ring)] disabled:pointer-events-none disabled:opacity-55","lg"===c?"h-12 px-5 text-[15px]":"sm"===c?"h-9 px-3 text-[13px]":"h-11 px-4 text-[14px]","primary"===b?"bg-[var(--v2-accent)] text-white font-semibold shadow-[var(--v2-shadow-sm)] hover:brightness-105":"danger"===b?"bg-[var(--down)] text-white font-semibold shadow-[var(--v2-shadow-sm)] hover:brightness-105":"ghost"===b?"bg-transparent text-[var(--v2-text)] font-semibold hover:bg-[var(--v2-surface-2)]":"border border-[var(--v2-border)] bg-[var(--v2-surface)] text-[var(--v2-text)] font-semibold shadow-[var(--v2-shadow-sm)] hover:bg-[var(--v2-surface-2)]",a?.fullWidth?"w-full":"",a?.className??""].filter(Boolean).join(" ")}let d=a.i(572131).forwardRef(function({variant:a,size:d,fullWidth:e,className:f,type:g,...h},i){return(0,b.jsx)("button",{ref:i,type:g??"button",className:c({variant:a,size:d,fullWidth:e,className:f}),...h})});a.s(["V2Button",0,d,"v2ButtonClassName",()=>c])},214373,a=>{"use strict";var b=a.i(187924);function c({children:a,className:c=""}){return(0,b.jsx)("section",{className:"rounded-[var(--v2-radius-lg)] border border-[var(--v2-border)] bg-[var(--v2-surface)] shadow-[var(--v2-shadow-sm)] "+c,children:a})}function d({title:a,subtitle:c,right:d}){return(0,b.jsxs)("header",{className:"flex items-start justify-between gap-3 px-4 pt-4",children:[(0,b.jsxs)("div",{className:"min-w-0",children:[(0,b.jsx)("div",{className:"text-[15px] font-semibold text-[var(--v2-text)]",children:a}),c?(0,b.jsx)("div",{className:"mt-0.5 text-[13px] text-[var(--v2-muted)]",children:c}):null]}),d?(0,b.jsx)("div",{className:"shrink-0",children:d}):null]})}function e({children:a}){return(0,b.jsx)("div",{className:"px-4 pb-4 pt-3",children:a})}a.s(["V2Card",()=>c,"V2CardBody",()=>e,"V2CardHeader",()=>d])},782691,a=>{"use strict";var b=a.i(187924);function c({className:a=""}){return(0,b.jsx)("div",{className:"animate-pulse rounded-xl border border-[var(--v2-border)] bg-[var(--v2-surface-2)] "+a,"aria-hidden":"true"})}a.s(["V2Skeleton",()=>c])},392415,a=>{"use strict";class b extends Error{code;details;status;requestId;constructor(a,b){super(b?.requestId?`${a} (req ${b.requestId})`:a),this.name="ApiError",this.code=a,this.details=b?.details,this.status=b?.status,this.requestId=b?.requestId}}function c(a){return new Promise(b=>setTimeout(b,Math.max(0,Math.floor(a))))}async function d(a,d){let e=d?{...d,credentials:d.credentials??"same-origin"}:{credentials:"same-origin"},f=(e?.method??"GET").toUpperCase();if(["POST","PUT","PATCH","DELETE"].includes(f)){let a=function(){if("u"<typeof document)return null;let a=document.cookie.match(/(?:^|;\s*)__csrf=([^;]+)/);return a?.[1]??null}();if(a){let b=new Headers(e?.headers);b.has("x-csrf-token")||b.set("x-csrf-token",a),e.headers=b}}let g=(e?.method??"GET").toUpperCase(),h="GET"===g||"HEAD"===g,i=2*!!h,j=null;for(let d=0;d<=i;d+=1)try{let f=await fetch(a,e),g=f.headers.get("x-request-id")??void 0,j=await f.text().catch(()=>""),k=(f.headers.get("content-type")??"").includes("text/html")||function(a){let b=String(a??"").trimStart();return b.startsWith("<!DOCTYPE html")||b.startsWith("<html")||b.startsWith("<!doctype html")}(j),l=k?{_raw:"<html/>"}:function(a){try{return a?JSON.parse(a):null}catch{return{_raw:a}}}(j);if(!f.ok){if(h&&(502===f.status||503===f.status||504===f.status)&&d<i){await c(250*Math.pow(2,d));continue}if(l&&"object"==typeof l&&"error"in l){let a="string"==typeof l.error?l.error:`http_${f.status}`,c=void 0!==l.details?l.details:"string"==typeof l.message?l.message:k?{message:`Upstream error (HTTP ${f.status}). Please retry.`}:void 0;throw new b(a,{details:c,status:f.status,requestId:g})}if(l&&"object"==typeof l&&"message"in l){let a="string"==typeof l.message?l.message:l;throw new b(`http_${f.status}`,{details:a,status:f.status,requestId:g})}let a=k?{message:`Upstream error (HTTP ${f.status}). Please retry.`}:l;throw new b(`http_${f.status}`,{details:a,status:f.status,requestId:g})}return l}catch(a){if(j=a,h&&d<i){await c(250*Math.pow(2,d));continue}throw a}throw j}a.s(["ApiError",()=>b,"fetchJsonOrThrow",()=>d])},113107,a=>{"use strict";var b=a.i(187924),c=a.i(572131),d=a.i(392415),e=a.i(556836),f=a.i(214373),g=a.i(782691);function h(){let[a,h]=(0,c.useState)(!0),[i,j]=(0,c.useState)(null),[k,l]=(0,c.useState)([]),[m,n]=(0,c.useState)(null);async function o(){j(null),h(!0);try{let a=await (0,d.fetchJsonOrThrow)("/api/exchange/admin/markets",{cache:"no-store"});l(Array.isArray(a.markets)?a.markets:[])}catch(a){a instanceof d.ApiError?j(a.code):j("Network error")}finally{h(!1)}}(0,c.useEffect)(()=>{o()},[]);let p=(0,c.useMemo)(()=>k.filter(a=>"enabled"===a.status).length,[k]),q=(0,c.useMemo)(()=>k.filter(a=>"disabled"===a.status).length,[k]);async function r(a,b){j(null),n(a);try{await (0,d.fetchJsonOrThrow)(`/api/exchange/admin/markets/${a}/status`,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({status:b})}),await o()}catch(a){a instanceof d.ApiError?j(a.code):j("Network error")}finally{n(null)}}return a?(0,b.jsx)(g.V2Skeleton,{className:"h-40"}):(0,b.jsxs)("div",{className:"grid gap-4",children:[i?(0,b.jsxs)("div",{className:"rounded-2xl border border-[var(--v2-border)] bg-[var(--warn-bg)] px-4 py-3 text-[13px] font-semibold text-[var(--v2-text)]",children:["Error: ",(0,b.jsx)("span",{className:"font-extrabold",children:i})]}):null,(0,b.jsxs)(f.V2Card,{children:[(0,b.jsx)(f.V2CardHeader,{title:"Summary",subtitle:`Enabled ${p} \xb7 Disabled ${q}`,right:(0,b.jsx)(e.V2Button,{size:"sm",variant:"ghost",onClick:()=>void o(),children:"Refresh"})}),(0,b.jsx)(f.V2CardBody,{children:(0,b.jsxs)("div",{className:"grid gap-2 text-[13px]",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between gap-3",children:[(0,b.jsx)("div",{className:"text-[var(--v2-muted)]",children:"Total markets"}),(0,b.jsx)("div",{className:"font-semibold text-[var(--v2-text)]",children:k.length})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between gap-3",children:[(0,b.jsx)("div",{className:"text-[var(--v2-muted)]",children:"Enabled"}),(0,b.jsx)("div",{className:"font-semibold text-[var(--v2-text)]",children:p})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between gap-3",children:[(0,b.jsx)("div",{className:"text-[var(--v2-muted)]",children:"Disabled"}),(0,b.jsx)("div",{className:"font-semibold text-[var(--v2-text)]",children:q})]})]})})]}),0===k.length?(0,b.jsx)("div",{className:"rounded-2xl border border-[var(--v2-border)] bg-[var(--v2-surface)] px-6 py-10 text-center text-[13px] text-[var(--v2-muted)] shadow-[var(--v2-shadow-sm)]",children:"No markets."}):(0,b.jsx)("section",{className:"overflow-hidden rounded-2xl border border-[var(--v2-border)] bg-[var(--v2-surface)] shadow-[var(--v2-shadow-md)]",children:(0,b.jsxs)("table",{className:"w-full text-[13px]",children:[(0,b.jsx)("thead",{className:"bg-[var(--v2-surface-2)]",children:(0,b.jsxs)("tr",{className:"text-left text-[11px] font-extrabold uppercase tracking-widest text-[var(--v2-muted)]",children:[(0,b.jsx)("th",{className:"px-4 py-3",children:"Market"}),(0,b.jsx)("th",{className:"px-4 py-3",children:"Status"}),(0,b.jsx)("th",{className:"px-4 py-3",children:"Fees"}),(0,b.jsx)("th",{className:"px-4 py-3 text-right",children:"Actions"})]})}),(0,b.jsx)("tbody",{children:k.map(a=>{let c="enabled"===a.status,d=m===a.id;return(0,b.jsxs)("tr",{className:"border-t border-[var(--v2-border)]",children:[(0,b.jsxs)("td",{className:"px-4 py-3",children:[(0,b.jsx)("div",{className:"font-semibold text-[var(--v2-text)]",children:a.symbol}),(0,b.jsx)("div",{className:"mt-0.5 font-mono text-[11px] text-[var(--v2-muted)]",children:a.id})]}),(0,b.jsx)("td",{className:"px-4 py-3",children:(0,b.jsx)("span",{className:"inline-flex items-center rounded-full border px-2 py-0.5 text-[11px] font-semibold "+(c?"border-[color-mix(in_srgb,var(--up)_40%,var(--v2-border))] text-[var(--up)]":"border-[color-mix(in_srgb,var(--warn)_40%,var(--v2-border))] text-[var(--warn)]"),children:c?"enabled":"disabled"})}),(0,b.jsxs)("td",{className:"px-4 py-3 text-[12px] text-[var(--v2-muted)]",children:["maker ",a.maker_fee_bps,"bps · taker ",a.taker_fee_bps,"bps"]}),(0,b.jsx)("td",{className:"px-4 py-3 text-right",children:c?(0,b.jsx)(e.V2Button,{size:"sm",variant:"secondary",disabled:d,onClick:()=>void r(a.id,"disabled"),children:d?"…":"Disable"}):(0,b.jsx)(e.V2Button,{size:"sm",variant:"primary",disabled:d,onClick:()=>void r(a.id,"enabled"),children:d?"…":"Enable"})})]},a.id)})})]})})]})}a.s(["AdminMarketsClient",()=>h])}];

//# sourceMappingURL=src_2a13fcff._.js.map