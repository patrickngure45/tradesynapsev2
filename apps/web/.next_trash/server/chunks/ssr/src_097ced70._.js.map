{"version":3,"sources":["../../../../src/components/v2/Input.tsx","../../../../src/components/v2/Button.tsx","../../../../src/components/v2/Card.tsx","../../../../src/components/v2/Skeleton.tsx","../../../../src/components/v2/Tabs.tsx","../../../../src/components/v2/Sheet.tsx","../../../../src/app/v2/p2p/P2PClient.tsx"],"sourcesContent":["import * as React from \"react\";\r\n\r\nexport type V2InputProps = Omit<React.InputHTMLAttributes<HTMLInputElement>, \"className\"> & {\r\n  className?: string;\r\n};\r\n\r\nexport const V2Input = React.forwardRef<HTMLInputElement, V2InputProps>(function V2Input(\r\n  { className = \"\", type = \"text\", ...props },\r\n  ref,\r\n) {\r\n  return (\r\n    <input\r\n      ref={ref}\r\n      type={type}\r\n      className={\r\n        \"h-11 w-full rounded-xl border border-[var(--v2-border)] bg-[var(--v2-surface)] px-3 text-[14px] text-[var(--v2-text)] shadow-[var(--v2-shadow-sm)] outline-none placeholder:text-[color-mix(in_srgb,var(--v2-muted)_70%,transparent)] focus:ring-2 focus:ring-[var(--v2-ring)] \" +\r\n        className\r\n      }\r\n      {...props}\r\n    />\r\n  );\r\n});\r\n","import * as React from \"react\";\r\n\r\nexport type V2ButtonVariant = \"primary\" | \"secondary\" | \"ghost\" | \"danger\";\r\nexport type V2ButtonSize = \"sm\" | \"md\" | \"lg\";\r\n\r\nexport function v2ButtonClassName(options?: {\r\n  variant?: V2ButtonVariant;\r\n  size?: V2ButtonSize;\r\n  fullWidth?: boolean;\r\n  className?: string;\r\n}): string {\r\n  const variant: V2ButtonVariant = options?.variant ?? \"secondary\";\r\n  const size: V2ButtonSize = options?.size ?? \"md\";\r\n\r\n  const base =\r\n    \"inline-flex select-none items-center justify-center gap-2 whitespace-nowrap rounded-xl transition focus:outline-none focus:ring-2 focus:ring-[var(--v2-ring)] disabled:pointer-events-none disabled:opacity-55\";\r\n\r\n  const sizeClass =\r\n    size === \"lg\" ? \"h-12 px-5 text-[15px]\" : size === \"sm\" ? \"h-9 px-3 text-[13px]\" : \"h-11 px-4 text-[14px]\";\r\n\r\n  const variantClass =\r\n    variant === \"primary\"\r\n      ? \"bg-[var(--v2-accent)] text-white font-semibold shadow-[var(--v2-shadow-sm)] hover:brightness-105\"\r\n      : variant === \"danger\"\r\n        ? \"bg-[var(--down)] text-white font-semibold shadow-[var(--v2-shadow-sm)] hover:brightness-105\"\r\n        : variant === \"ghost\"\r\n          ? \"bg-transparent text-[var(--v2-text)] font-semibold hover:bg-[var(--v2-surface-2)]\"\r\n          : \"border border-[var(--v2-border)] bg-[var(--v2-surface)] text-[var(--v2-text)] font-semibold shadow-[var(--v2-shadow-sm)] hover:bg-[var(--v2-surface-2)]\";\r\n\r\n  const widthClass = options?.fullWidth ? \"w-full\" : \"\";\r\n  const extra = options?.className ?? \"\";\r\n\r\n  return [base, sizeClass, variantClass, widthClass, extra].filter(Boolean).join(\" \");\r\n}\r\n\r\nexport type V2ButtonProps = Omit<React.ButtonHTMLAttributes<HTMLButtonElement>, \"className\"> & {\r\n  variant?: V2ButtonVariant;\r\n  size?: V2ButtonSize;\r\n  fullWidth?: boolean;\r\n  className?: string;\r\n};\r\n\r\nexport const V2Button = React.forwardRef<HTMLButtonElement, V2ButtonProps>(function V2Button(\r\n  { variant, size, fullWidth, className, type, ...props },\r\n  ref,\r\n) {\r\n  return (\r\n    <button\r\n      ref={ref}\r\n      type={type ?? \"button\"}\r\n      className={v2ButtonClassName({ variant, size, fullWidth, className })}\r\n      {...props}\r\n    />\r\n  );\r\n});\r\n","import type { ReactNode } from \"react\";\r\n\r\nexport function V2Card({\r\n  children,\r\n  className = \"\",\r\n}: {\r\n  children: ReactNode;\r\n  className?: string;\r\n}) {\r\n  return (\r\n    <section\r\n      className={\r\n        \"rounded-[var(--v2-radius-lg)] border border-[var(--v2-border)] bg-[var(--v2-surface)] shadow-[var(--v2-shadow-sm)] \" +\r\n        className\r\n      }\r\n    >\r\n      {children}\r\n    </section>\r\n  );\r\n}\r\n\r\nexport function V2CardHeader({\r\n  title,\r\n  subtitle,\r\n  right,\r\n}: {\r\n  title: ReactNode;\r\n  subtitle?: ReactNode;\r\n  right?: ReactNode;\r\n}) {\r\n  return (\r\n    <header className=\"flex items-start justify-between gap-3 px-4 pt-4\">\r\n      <div className=\"min-w-0\">\r\n        <div className=\"text-[15px] font-semibold text-[var(--v2-text)]\">{title}</div>\r\n        {subtitle ? <div className=\"mt-0.5 text-[13px] text-[var(--v2-muted)]\">{subtitle}</div> : null}\r\n      </div>\r\n      {right ? <div className=\"shrink-0\">{right}</div> : null}\r\n    </header>\r\n  );\r\n}\r\n\r\nexport function V2CardBody({ children }: { children: ReactNode }) {\r\n  return <div className=\"px-4 pb-4 pt-3\">{children}</div>;\r\n}\r\n","export function V2Skeleton({ className = \"\" }: { className?: string }) {\r\n  return (\r\n    <div\r\n      className={\r\n        \"animate-pulse rounded-xl border border-[var(--v2-border)] bg-[var(--v2-surface-2)] \" + className\r\n      }\r\n      aria-hidden=\"true\"\r\n    />\r\n  );\r\n}\r\n","\"use client\";\r\n\r\ntype Tab = { id: string; label: string };\r\n\r\nexport function V2Tabs({\r\n  tabs,\r\n  activeId,\r\n  onChange,\r\n}: {\r\n  tabs: Tab[];\r\n  activeId: string;\r\n  onChange: (id: string) => void;\r\n}) {\r\n  return (\r\n    <div\r\n      className=\"grid gap-1 rounded-2xl border border-[var(--v2-border)] bg-[var(--v2-surface)] p-1 shadow-[var(--v2-shadow-sm)]\"\r\n      style={{ gridTemplateColumns: `repeat(${Math.max(1, tabs.length)}, minmax(0, 1fr))` }}\r\n      role=\"tablist\"\r\n    >\r\n      {tabs.map((t) => {\r\n        const active = t.id === activeId;\r\n        return (\r\n          <button\r\n            key={t.id}\r\n            type=\"button\"\r\n            role=\"tab\"\r\n            aria-selected={active}\r\n            className={\r\n              \"h-10 rounded-xl text-[13px] font-semibold transition \" +\r\n              (active\r\n                ? \"bg-[var(--v2-surface-2)] text-[var(--v2-text)]\"\r\n                : \"text-[var(--v2-muted)] hover:bg-[var(--v2-surface-2)]/70\")\r\n            }\r\n            onClick={() => onChange(t.id)}\r\n          >\r\n            {t.label}\r\n          </button>\r\n        );\r\n      })}\r\n    </div>\r\n  );\r\n}\r\n","\"use client\";\r\n\r\nimport { useEffect } from \"react\";\r\n\r\nexport function V2Sheet({\r\n  open,\r\n  title,\r\n  onClose,\r\n  children,\r\n}: {\r\n  open: boolean;\r\n  title?: string;\r\n  onClose: () => void;\r\n  children: React.ReactNode;\r\n}) {\r\n  useEffect(() => {\r\n    if (!open) return;\r\n    const onKeyDown = (e: KeyboardEvent) => {\r\n      if (e.key === \"Escape\") onClose();\r\n    };\r\n    document.addEventListener(\"keydown\", onKeyDown);\r\n\r\n    const prevOverflow = document.documentElement.style.overflow;\r\n    document.documentElement.style.overflow = \"hidden\";\r\n\r\n    return () => {\r\n      document.removeEventListener(\"keydown\", onKeyDown);\r\n      document.documentElement.style.overflow = prevOverflow;\r\n    };\r\n  }, [open, onClose]);\r\n\r\n  if (!open) return null;\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 z-[100]\">\r\n      <button\r\n        type=\"button\"\r\n        className=\"absolute inset-0 bg-black/40\"\r\n        aria-label=\"Close\"\r\n        onClick={onClose}\r\n      />\r\n\r\n      <div\r\n        className=\"absolute inset-x-0 bottom-0 mx-auto w-full max-w-xl rounded-t-[28px] border border-[var(--v2-border)] bg-[var(--v2-surface)] shadow-[var(--v2-shadow-md)]\"\r\n        style={{ paddingBottom: \"env(safe-area-inset-bottom)\" }}\r\n        role=\"dialog\"\r\n        aria-modal=\"true\"\r\n      >\r\n        <div className=\"flex items-center justify-between gap-3 px-4 pb-2 pt-3\">\r\n          <div className=\"min-w-0\">\r\n            {title ? <div className=\"truncate text-[15px] font-semibold text-[var(--v2-text)]\">{title}</div> : null}\r\n          </div>\r\n          <button\r\n            type=\"button\"\r\n            onClick={onClose}\r\n            className=\"h-9 rounded-xl px-3 text-[13px] font-semibold text-[var(--v2-muted)] hover:bg-[var(--v2-surface-2)]\"\r\n          >\r\n            Close\r\n          </button>\r\n        </div>\r\n        <div className=\"max-h-[70dvh] overflow-auto px-4 pb-4 pt-2\">{children}</div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","\"use client\";\r\n\r\nimport Link from \"next/link\";\r\nimport { useEffect, useMemo, useRef, useState } from \"react\";\r\nimport { useRouter } from \"next/navigation\";\r\n\r\nimport { V2Button } from \"@/components/v2/Button\";\r\nimport { V2Card, V2CardBody, V2CardHeader } from \"@/components/v2/Card\";\r\nimport { V2Input } from \"@/components/v2/Input\";\r\nimport { V2Sheet } from \"@/components/v2/Sheet\";\r\nimport { V2Skeleton } from \"@/components/v2/Skeleton\";\r\nimport { V2Tabs } from \"@/components/v2/Tabs\";\r\n\r\ntype P2PAd = {\r\n  id: string;\r\n  user_id: string;\r\n  side: \"BUY\" | \"SELL\"; // maker side\r\n  fiat_currency: string;\r\n  fixed_price: string | null;\r\n  remaining_amount: string;\r\n  min_limit: string;\r\n  max_limit: string;\r\n  payment_window_minutes: number;\r\n  payment_methods?: string[];\r\n  email?: string;\r\n  display_name?: string | null;\r\n  completed_count?: number;\r\n  rep_positive?: number;\r\n  rep_negative?: number;\r\n  rep_total?: number;\r\n  terms?: string | null;\r\n  is_verified_agent?: boolean;\r\n  highlighted_until?: string | null;\r\n};\r\n\r\ntype AdsResponse = { ads?: P2PAd[] };\r\n\r\ntype PaymentMethod = {\r\n  id: string;\r\n  identifier: string;\r\n  name: string;\r\n  details: any;\r\n};\r\n\r\ntype PaymentMethodsResponse = { methods?: PaymentMethod[] };\r\n\r\ntype CreateOrderResponse =\r\n  | { success: true; order_id: string }\r\n  | { error: string; message?: string; details?: any };\r\n\r\nfunction toNum(v: unknown): number | null {\r\n  const n = typeof v === \"number\" ? v : Number(String(v));\r\n  return Number.isFinite(n) ? n : null;\r\n}\r\n\r\nfunction fmtMoney(v: string | null | undefined, fiat: string): string {\r\n  const n = toNum(v);\r\n  if (n == null) return \"—\";\r\n  try {\r\n    return new Intl.NumberFormat(undefined, {\r\n      style: \"currency\",\r\n      currency: fiat,\r\n      currencyDisplay: \"code\",\r\n      maximumFractionDigits: 2,\r\n    }).format(n);\r\n  } catch {\r\n    return `${n.toLocaleString()} ${fiat}`;\r\n  }\r\n}\r\n\r\nfunction fmtNum(v: string | null | undefined): string {\r\n  const n = toNum(v);\r\n  if (n == null) return \"—\";\r\n  if (n === 0) return \"0\";\r\n  const abs = Math.abs(n);\r\n  const decimals = abs >= 1000 ? 2 : abs >= 1 ? 4 : abs >= 0.01 ? 6 : 8;\r\n  return n.toLocaleString(undefined, { maximumFractionDigits: decimals });\r\n}\r\n\r\nfunction clampNum(n: number, min: number, max: number): number {\r\n  if (!Number.isFinite(n)) return min;\r\n  return Math.min(max, Math.max(min, n));\r\n}\r\n\r\nexport function P2PClient() {\r\n  const router = useRouter();\r\n\r\n  const [tab, setTab] = useState<\"BUY\" | \"SELL\">(\"BUY\");\r\n\r\n  const asset = \"USDT\";\r\n  const fiat = \"USD\";\r\n\r\n  const [amountFiat, setAmountFiat] = useState(\"\");\r\n\r\n  const [ads, setAds] = useState<P2PAd[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState<string | null>(null);\r\n\r\n  const hasLoadedRef = useRef(false);\r\n  const tabRef = useRef<\"BUY\" | \"SELL\">(\"BUY\");\r\n  const amountFiatRef = useRef<string>(\"\");\r\n\r\n  const loadSeqRef = useRef(0);\r\n  const abortRef = useRef<AbortController | null>(null);\r\n\r\n  const load = async () => {\r\n    const seq = ++loadSeqRef.current;\r\n    abortRef.current?.abort();\r\n    const controller = new AbortController();\r\n    abortRef.current = controller;\r\n\r\n    setError(null);\r\n    if (!hasLoadedRef.current) setLoading(true);\r\n\r\n    try {\r\n      const qs = new URLSearchParams({ side: tabRef.current, asset, fiat });\r\n      const n = toNum(amountFiatRef.current);\r\n      if (n != null && n > 0) qs.set(\"amount\", String(n));\r\n\r\n      const res = await fetch(`/api/p2p/ads?${qs.toString()}`, { cache: \"no-store\", signal: controller.signal });\r\n      const json = (await res.json().catch(() => null)) as AdsResponse | null;\r\n      if (!res.ok) {\r\n        const code = typeof (json as any)?.error === \"string\" ? (json as any).error : `http_${res.status}`;\r\n        throw new Error(code);\r\n      }\r\n\r\n      if (seq !== loadSeqRef.current) return;\r\n      setAds(Array.isArray(json?.ads) ? json!.ads : []);\r\n      hasLoadedRef.current = true;\r\n    } catch (e) {\r\n      if (e instanceof DOMException && e.name === \"AbortError\") return;\r\n      if (seq !== loadSeqRef.current) return;\r\n      if (!hasLoadedRef.current) setError(e instanceof Error ? e.message : String(e));\r\n    } finally {\r\n      if (seq === loadSeqRef.current) setLoading(false);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    tabRef.current = tab;\r\n  }, [tab]);\r\n\r\n  useEffect(() => {\r\n    amountFiatRef.current = amountFiat;\r\n  }, [amountFiat]);\r\n\r\n  useEffect(() => {\r\n    void load();\r\n    let timeoutId: number | null = null;\r\n\r\n    const stopTimer = () => {\r\n      if (!timeoutId) return;\r\n      window.clearTimeout(timeoutId);\r\n      timeoutId = null;\r\n    };\r\n\r\n    const schedule = () => {\r\n      stopTimer();\r\n      const delayMs = 35_000;\r\n      timeoutId = window.setTimeout(() => {\r\n        timeoutId = null;\r\n        if (document.visibilityState === \"visible\") void load();\r\n        schedule();\r\n      }, delayMs);\r\n    };\r\n\r\n    const onVis = () => {\r\n      if (document.visibilityState === \"visible\") {\r\n        void load();\r\n        schedule();\r\n      } else {\r\n        stopTimer();\r\n      }\r\n    };\r\n    document.addEventListener(\"visibilitychange\", onVis);\r\n    schedule();\r\n    return () => {\r\n      document.removeEventListener(\"visibilitychange\", onVis);\r\n      stopTimer();\r\n      abortRef.current?.abort();\r\n    };\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    void load();\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [tab]);\r\n\r\n  useEffect(() => {\r\n    const t = window.setTimeout(() => {\r\n      if (document.visibilityState !== \"visible\") return;\r\n      void load();\r\n    }, 250);\r\n    return () => window.clearTimeout(t);\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [amountFiat]);\r\n\r\n  const tabs = useMemo(\r\n    () => [\r\n      { id: \"BUY\", label: \"Buy\" },\r\n      { id: \"SELL\", label: \"Sell\" },\r\n    ],\r\n    [],\r\n  );\r\n\r\n  const [takeSheetOpen, setTakeSheetOpen] = useState(false);\r\n  const [takeAd, setTakeAd] = useState<P2PAd | null>(null);\r\n  const [takeAmount, setTakeAmount] = useState(\"\");\r\n  const [takeError, setTakeError] = useState<string | null>(null);\r\n  const [taking, setTaking] = useState(false);\r\n\r\n  const [methods, setMethods] = useState<PaymentMethod[]>([]);\r\n  const [methodsLoaded, setMethodsLoaded] = useState(false);\r\n  const [selectedMethodId, setSelectedMethodId] = useState<string | null>(null);\r\n\r\n  const needsSellerMethod = tab === \"SELL\";\r\n\r\n  const openTake = (ad: P2PAd) => {\r\n    setTakeAd(ad);\r\n    setTakeError(null);\r\n    setTakeAmount(\"\");\r\n    setSelectedMethodId(null);\r\n    setTakeSheetOpen(true);\r\n  };\r\n\r\n  const loadMyMethods = async () => {\r\n    if (methodsLoaded) return;\r\n    try {\r\n      const res = await fetch(\"/api/p2p/payment-methods\", { cache: \"no-store\", credentials: \"include\" });\r\n      const json = (await res.json().catch(() => null)) as PaymentMethodsResponse | null;\r\n      if (res.ok) {\r\n        const rows = Array.isArray(json?.methods) ? json!.methods : [];\r\n        setMethods(rows);\r\n      }\r\n    } finally {\r\n      setMethodsLoaded(true);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (!takeSheetOpen) return;\r\n    if (!needsSellerMethod) return;\r\n    void loadMyMethods();\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [takeSheetOpen, needsSellerMethod]);\r\n\r\n  const createOrder = async () => {\r\n    if (!takeAd || taking) return;\r\n\r\n    const min = toNum(takeAd.min_limit) ?? 0;\r\n    const max = toNum(takeAd.max_limit) ?? 0;\r\n\r\n    const raw = toNum(takeAmount);\r\n    if (raw == null || raw <= 0) {\r\n      setTakeError(\"Enter an amount.\");\r\n      return;\r\n    }\r\n\r\n    const amount = max > 0 ? clampNum(raw, min || 0, max) : raw;\r\n    if (min > 0 && amount < min) {\r\n      setTakeError(`Minimum is ${fmtNum(String(min))} ${fiat}.`);\r\n      return;\r\n    }\r\n    if (max > 0 && amount > max) {\r\n      setTakeError(`Maximum is ${fmtNum(String(max))} ${fiat}.`);\r\n      return;\r\n    }\r\n\r\n    if (needsSellerMethod && !selectedMethodId) {\r\n      setTakeError(\"Select a payout method (required to sell).\");\r\n      return;\r\n    }\r\n\r\n    setTaking(true);\r\n    setTakeError(null);\r\n\r\n    try {\r\n      const res = await fetch(\"/api/p2p/orders\", {\r\n        method: \"POST\",\r\n        headers: { \"content-type\": \"application/json\" },\r\n        credentials: \"include\",\r\n        body: JSON.stringify({\r\n          ad_id: takeAd.id,\r\n          amount_fiat: amount,\r\n          ...(needsSellerMethod ? { payment_method_id: selectedMethodId } : {}),\r\n        }),\r\n      });\r\n      const json = (await res.json().catch(() => null)) as CreateOrderResponse | null;\r\n      if (!res.ok) {\r\n        const code = typeof (json as any)?.error === \"string\" ? (json as any).error : `http_${res.status}`;\r\n        throw new Error(code);\r\n      }\r\n      const orderId = typeof (json as any)?.order_id === \"string\" ? (json as any).order_id : null;\r\n      if (!orderId) throw new Error(\"order_create_failed\");\r\n\r\n      setTakeSheetOpen(false);\r\n      router.push(`/v2/p2p/orders/${encodeURIComponent(orderId)}`);\r\n    } catch (e) {\r\n      setTakeError(e instanceof Error ? e.message : String(e));\r\n    } finally {\r\n      setTaking(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <main className=\"space-y-4\">\r\n      <header className=\"space-y-2\">\r\n        <div className=\"flex items-center justify-between gap-2\">\r\n          <div>\r\n            <div className=\"text-[11px] font-bold uppercase tracking-widest text-[var(--v2-muted)]\">P2P</div>\r\n            <h1 className=\"text-2xl font-extrabold tracking-tight\">Buy / sell {asset}</h1>\r\n          </div>\r\n          <Link\r\n            href=\"/v2/p2p/orders\"\r\n            className=\"rounded-xl border border-[var(--v2-border)] bg-[var(--v2-surface)] px-3 py-2 text-[12px] font-semibold text-[var(--v2-text)]\"\r\n          >\r\n            My orders\r\n          </Link>\r\n        </div>\r\n        <p className=\"text-sm text-[var(--v2-muted)]\">Escrow-backed trades. Choose an ad and place an order.</p>\r\n      </header>\r\n\r\n      <V2Tabs tabs={tabs} activeId={tab} onChange={(id) => setTab(id as any)} />\r\n\r\n      <V2Input\r\n        value={amountFiat}\r\n        onChange={(e) => setAmountFiat(e.target.value)}\r\n        placeholder={`Optional amount (${fiat})`}\r\n        inputMode=\"decimal\"\r\n      />\r\n\r\n      {error && ads.length === 0 ? (\r\n        <V2Card>\r\n          <V2CardHeader title=\"Marketplace unavailable\" subtitle=\"Try again in a moment.\" />\r\n          <V2CardBody>\r\n            <div className=\"text-sm text-[var(--v2-muted)]\">{String(error)}</div>\r\n            <div className=\"mt-3\">\r\n              <V2Button variant=\"primary\" fullWidth onClick={() => void load()}>\r\n                Retry\r\n              </V2Button>\r\n            </div>\r\n          </V2CardBody>\r\n        </V2Card>\r\n      ) : loading && ads.length === 0 ? (\r\n        <div className=\"grid gap-2\">\r\n          <V2Skeleton className=\"h-20\" />\r\n          <V2Skeleton className=\"h-20\" />\r\n          <V2Skeleton className=\"h-20\" />\r\n        </div>\r\n      ) : ads.length === 0 ? (\r\n        <V2Card>\r\n          <V2CardHeader title=\"No ads available\" subtitle=\"Try switching side or changing the amount.\" />\r\n          <V2CardBody>\r\n            <div className=\"text-sm text-[var(--v2-muted)]\">We couldn’t find matching ads right now.</div>\r\n          </V2CardBody>\r\n        </V2Card>\r\n      ) : (\r\n        <section className=\"grid gap-2\">\r\n          {ads.map((ad) => {\r\n            const maker = String(ad.display_name || ad.email || \"Trader\");\r\n            const priceText = fmtMoney(ad.fixed_price, fiat);\r\n            const minText = fmtMoney(ad.min_limit, fiat);\r\n            const maxText = fmtMoney(ad.max_limit, fiat);\r\n            const remText = `${fmtNum(ad.remaining_amount)} ${asset}`;\r\n            const pm = Array.isArray(ad.payment_methods) ? ad.payment_methods : [];\r\n\r\n            return (\r\n              <div\r\n                key={ad.id}\r\n                className={\r\n                  \"rounded-2xl border border-[var(--v2-border)] bg-[var(--v2-surface)] px-3 py-3 shadow-[var(--v2-shadow-sm)]\" +\r\n                  (ad.highlighted_until ? \" ring-1 ring-[color-mix(in_srgb,var(--v2-accent)_35%,transparent)]\" : \"\")\r\n                }\r\n              >\r\n                <div className=\"flex items-start justify-between gap-3\">\r\n                  <div className=\"min-w-0\">\r\n                    <div className=\"flex flex-wrap items-center gap-2\">\r\n                      <div className=\"truncate text-[15px] font-semibold text-[var(--v2-text)]\">{maker}</div>\r\n                      {ad.is_verified_agent ? (\r\n                        <span className=\"rounded-full border border-[var(--v2-border)] bg-[var(--v2-surface-2)] px-2 py-0.5 text-[11px] font-semibold text-[var(--v2-muted)]\">\r\n                          Verified\r\n                        </span>\r\n                      ) : null}\r\n                    </div>\r\n                    <div className=\"mt-1 text-[12px] text-[var(--v2-muted)]\">\r\n                      Limit {minText} – {maxText} · Remaining {remText}\r\n                    </div>\r\n                    {pm.length ? (\r\n                      <div className=\"mt-2 flex flex-wrap gap-1\">\r\n                        {pm.slice(0, 4).map((x) => (\r\n                          <span\r\n                            key={x}\r\n                            className=\"rounded-full border border-[var(--v2-border)] bg-[var(--v2-surface-2)] px-2 py-0.5 text-[11px] font-semibold text-[var(--v2-muted)]\"\r\n                          >\r\n                            {String(x)}\r\n                          </span>\r\n                        ))}\r\n                      </div>\r\n                    ) : null}\r\n                  </div>\r\n\r\n                  <div className=\"shrink-0 text-right\">\r\n                    <div className=\"text-[13px] font-semibold text-[var(--v2-muted)]\">Price</div>\r\n                    <div className=\"mt-0.5 font-mono text-[14px] font-semibold text-[var(--v2-text)]\">{priceText}</div>\r\n                    <div className=\"mt-2\">\r\n                      <V2Button variant=\"primary\" size=\"sm\" onClick={() => openTake(ad)}>\r\n                        Take\r\n                      </V2Button>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            );\r\n          })}\r\n        </section>\r\n      )}\r\n\r\n      <V2Sheet open={takeSheetOpen} onClose={() => setTakeSheetOpen(false)} title=\"Take ad\">\r\n        {!takeAd ? (\r\n          <div className=\"text-sm text-[var(--v2-muted)]\">No ad selected.</div>\r\n        ) : (\r\n          <div className=\"space-y-3\">\r\n            <div className=\"rounded-2xl border border-[var(--v2-border)] bg-[var(--v2-surface)] px-3 py-3\">\r\n              <div className=\"text-[12px] font-semibold text-[var(--v2-muted)]\">Price</div>\r\n              <div className=\"mt-1 font-mono text-[16px] font-semibold text-[var(--v2-text)]\">{fmtMoney(takeAd.fixed_price, fiat)}</div>\r\n              <div className=\"mt-1 text-[12px] text-[var(--v2-muted)]\">\r\n                Limit {fmtMoney(takeAd.min_limit, fiat)} – {fmtMoney(takeAd.max_limit, fiat)}\r\n              </div>\r\n            </div>\r\n\r\n            <V2Input\r\n              value={takeAmount}\r\n              onChange={(e) => setTakeAmount(e.target.value)}\r\n              placeholder={`Amount (${fiat})`}\r\n              inputMode=\"decimal\"\r\n            />\r\n\r\n            {needsSellerMethod ? (\r\n              <div className=\"rounded-2xl border border-[var(--v2-border)] bg-[var(--v2-surface)] px-3 py-3\">\r\n                <div className=\"text-[12px] font-semibold text-[var(--v2-text)]\">Payout method</div>\r\n                <div className=\"mt-1 text-[12px] text-[var(--v2-muted)]\">Required when you sell (so the buyer can pay you).</div>\r\n\r\n                {!methodsLoaded ? (\r\n                  <div className=\"mt-3 grid gap-2\">\r\n                    <V2Skeleton className=\"h-10\" />\r\n                    <V2Skeleton className=\"h-10\" />\r\n                  </div>\r\n                ) : methods.length === 0 ? (\r\n                  <div className=\"mt-2 text-[12px] text-[var(--v2-muted)]\">\r\n                    No payment methods found. Add one from the legacy P2P page for now.\r\n                  </div>\r\n                ) : (\r\n                  <div className=\"mt-2 grid gap-2\">\r\n                    {methods.slice(0, 6).map((m) => {\r\n                      const active = selectedMethodId === m.id;\r\n                      return (\r\n                        <button\r\n                          key={m.id}\r\n                          type=\"button\"\r\n                          onClick={() => setSelectedMethodId(m.id)}\r\n                          className={\r\n                            \"flex w-full items-center justify-between gap-2 rounded-xl border px-3 py-2 text-left\" +\r\n                            (active\r\n                              ? \" border-[color-mix(in_srgb,var(--v2-accent)_55%,transparent)] bg-[color-mix(in_srgb,var(--v2-accent)_12%,transparent)]\"\r\n                              : \" border-[var(--v2-border)] bg-[var(--v2-surface-2)]\")\r\n                          }\r\n                        >\r\n                          <div className=\"min-w-0\">\r\n                            <div className=\"truncate text-[13px] font-semibold text-[var(--v2-text)]\">{String(m.name || m.identifier)}</div>\r\n                            <div className=\"truncate text-[11px] text-[var(--v2-muted)]\">{String(m.identifier)}</div>\r\n                          </div>\r\n                          <div className=\"text-[12px] font-semibold text-[var(--v2-muted)]\">{active ? \"Selected\" : \"Select\"}</div>\r\n                        </button>\r\n                      );\r\n                    })}\r\n                  </div>\r\n                )}\r\n              </div>\r\n            ) : null}\r\n\r\n            {takeError ? <div className=\"text-sm text-[var(--down)]\">{takeError}</div> : null}\r\n\r\n            <V2Button variant=\"primary\" fullWidth disabled={taking} onClick={() => void createOrder()}>\r\n              {taking ? \"Creating…\" : \"Create order\"}\r\n            </V2Button>\r\n\r\n            <Link href=\"/p2p\" className=\"block text-center text-[12px] font-semibold text-[var(--v2-muted)]\">\r\n              Need advanced options? Open legacy P2P.\r\n            </Link>\r\n          </div>\r\n        )}\r\n      </V2Sheet>\r\n    </main>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}