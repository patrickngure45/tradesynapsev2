{"version":3,"sources":["../../../../src/components/v2/Input.tsx","../../../../src/components/v2/Button.tsx","../../../../src/components/v2/Card.tsx","../../../../src/components/v2/Skeleton.tsx","../../../../src/app/v2/markets/MarketsClient.tsx"],"sourcesContent":["import * as React from \"react\";\r\n\r\nexport type V2InputProps = Omit<React.InputHTMLAttributes<HTMLInputElement>, \"className\"> & {\r\n  className?: string;\r\n};\r\n\r\nexport const V2Input = React.forwardRef<HTMLInputElement, V2InputProps>(function V2Input(\r\n  { className = \"\", type = \"text\", ...props },\r\n  ref,\r\n) {\r\n  return (\r\n    <input\r\n      ref={ref}\r\n      type={type}\r\n      className={\r\n        \"h-11 w-full rounded-xl border border-[var(--v2-border)] bg-[var(--v2-surface)] px-3 text-[14px] text-[var(--v2-text)] shadow-[var(--v2-shadow-sm)] outline-none placeholder:text-[color-mix(in_srgb,var(--v2-muted)_70%,transparent)] focus:ring-2 focus:ring-[var(--v2-ring)] \" +\r\n        className\r\n      }\r\n      {...props}\r\n    />\r\n  );\r\n});\r\n","import * as React from \"react\";\r\n\r\nexport type V2ButtonVariant = \"primary\" | \"secondary\" | \"ghost\" | \"danger\";\r\nexport type V2ButtonSize = \"sm\" | \"md\" | \"lg\";\r\n\r\nexport function v2ButtonClassName(options?: {\r\n  variant?: V2ButtonVariant;\r\n  size?: V2ButtonSize;\r\n  fullWidth?: boolean;\r\n  className?: string;\r\n}): string {\r\n  const variant: V2ButtonVariant = options?.variant ?? \"secondary\";\r\n  const size: V2ButtonSize = options?.size ?? \"md\";\r\n\r\n  const base =\r\n    \"inline-flex select-none items-center justify-center gap-2 whitespace-nowrap rounded-xl transition focus:outline-none focus:ring-2 focus:ring-[var(--v2-ring)] disabled:pointer-events-none disabled:opacity-55\";\r\n\r\n  const sizeClass =\r\n    size === \"lg\" ? \"h-12 px-5 text-[15px]\" : size === \"sm\" ? \"h-9 px-3 text-[13px]\" : \"h-11 px-4 text-[14px]\";\r\n\r\n  const variantClass =\r\n    variant === \"primary\"\r\n      ? \"bg-[var(--v2-accent)] text-white font-semibold shadow-[var(--v2-shadow-sm)] hover:brightness-105\"\r\n      : variant === \"danger\"\r\n        ? \"bg-[var(--down)] text-white font-semibold shadow-[var(--v2-shadow-sm)] hover:brightness-105\"\r\n        : variant === \"ghost\"\r\n          ? \"bg-transparent text-[var(--v2-text)] font-semibold hover:bg-[var(--v2-surface-2)]\"\r\n          : \"border border-[var(--v2-border)] bg-[var(--v2-surface)] text-[var(--v2-text)] font-semibold shadow-[var(--v2-shadow-sm)] hover:bg-[var(--v2-surface-2)]\";\r\n\r\n  const widthClass = options?.fullWidth ? \"w-full\" : \"\";\r\n  const extra = options?.className ?? \"\";\r\n\r\n  return [base, sizeClass, variantClass, widthClass, extra].filter(Boolean).join(\" \");\r\n}\r\n\r\nexport type V2ButtonProps = Omit<React.ButtonHTMLAttributes<HTMLButtonElement>, \"className\"> & {\r\n  variant?: V2ButtonVariant;\r\n  size?: V2ButtonSize;\r\n  fullWidth?: boolean;\r\n  className?: string;\r\n};\r\n\r\nexport const V2Button = React.forwardRef<HTMLButtonElement, V2ButtonProps>(function V2Button(\r\n  { variant, size, fullWidth, className, type, ...props },\r\n  ref,\r\n) {\r\n  return (\r\n    <button\r\n      ref={ref}\r\n      type={type ?? \"button\"}\r\n      className={v2ButtonClassName({ variant, size, fullWidth, className })}\r\n      {...props}\r\n    />\r\n  );\r\n});\r\n","import type { ReactNode } from \"react\";\r\n\r\nexport function V2Card({\r\n  children,\r\n  className = \"\",\r\n}: {\r\n  children: ReactNode;\r\n  className?: string;\r\n}) {\r\n  return (\r\n    <section\r\n      className={\r\n        \"rounded-[var(--v2-radius-lg)] border border-[var(--v2-border)] bg-[var(--v2-surface)] shadow-[var(--v2-shadow-sm)] \" +\r\n        className\r\n      }\r\n    >\r\n      {children}\r\n    </section>\r\n  );\r\n}\r\n\r\nexport function V2CardHeader({\r\n  title,\r\n  subtitle,\r\n  right,\r\n}: {\r\n  title: ReactNode;\r\n  subtitle?: ReactNode;\r\n  right?: ReactNode;\r\n}) {\r\n  return (\r\n    <header className=\"flex items-start justify-between gap-3 px-4 pt-4\">\r\n      <div className=\"min-w-0\">\r\n        <div className=\"text-[15px] font-semibold text-[var(--v2-text)]\">{title}</div>\r\n        {subtitle ? <div className=\"mt-0.5 text-[13px] text-[var(--v2-muted)]\">{subtitle}</div> : null}\r\n      </div>\r\n      {right ? <div className=\"shrink-0\">{right}</div> : null}\r\n    </header>\r\n  );\r\n}\r\n\r\nexport function V2CardBody({ children }: { children: ReactNode }) {\r\n  return <div className=\"px-4 pb-4 pt-3\">{children}</div>;\r\n}\r\n","export function V2Skeleton({ className = \"\" }: { className?: string }) {\r\n  return (\r\n    <div\r\n      className={\r\n        \"animate-pulse rounded-xl border border-[var(--v2-border)] bg-[var(--v2-surface-2)] \" + className\r\n      }\r\n      aria-hidden=\"true\"\r\n    />\r\n  );\r\n}\r\n","\"use client\";\r\n\r\nimport Link from \"next/link\";\r\nimport { useEffect, useMemo, useRef, useState } from \"react\";\r\n\r\nimport { V2Button } from \"@/components/v2/Button\";\r\nimport { V2Card, V2CardBody, V2CardHeader } from \"@/components/v2/Card\";\r\nimport { V2Input } from \"@/components/v2/Input\";\r\nimport { V2Skeleton } from \"@/components/v2/Skeleton\";\r\n\r\ntype MarketOverviewRow = {\r\n  id: string;\r\n  chain: string;\r\n  symbol: string;\r\n  status: string;\r\n  is_halted: boolean;\r\n  base_symbol: string;\r\n  quote_symbol: string;\r\n  stats: null | {\r\n    open: string;\r\n    last: string;\r\n    high: string;\r\n    low: string;\r\n    volume: string;\r\n    quote_volume: string;\r\n    trade_count: number;\r\n  };\r\n};\r\n\r\ntype MarketsOverviewResponse = {\r\n  fiat: string;\r\n  markets: MarketOverviewRow[];\r\n};\r\n\r\nfunction toNum(v: unknown): number | null {\r\n  const n = typeof v === \"number\" ? v : Number(String(v));\r\n  return Number.isFinite(n) ? n : null;\r\n}\r\n\r\nfunction pctChange(open: string | null | undefined, last: string | null | undefined): number | null {\r\n  const o = toNum(open);\r\n  const l = toNum(last);\r\n  if (o == null || l == null) return null;\r\n  if (o <= 0) return null;\r\n  return ((l - o) / o) * 100;\r\n}\r\n\r\nfunction fmtPrice(v: string | null | undefined): string {\r\n  const n = toNum(v);\r\n  if (n == null) return \"—\";\r\n  if (n === 0) return \"0\";\r\n  const abs = Math.abs(n);\r\n  const decimals = abs >= 1000 ? 2 : abs >= 1 ? 4 : abs >= 0.01 ? 6 : 8;\r\n  return n.toLocaleString(undefined, { maximumFractionDigits: decimals });\r\n}\r\n\r\nfunction readFavs(): string[] {\r\n  if (typeof window === \"undefined\") return [];\r\n  try {\r\n    const raw = localStorage.getItem(\"cw:v2:favMarkets\") ?? \"\";\r\n    const arr = JSON.parse(raw);\r\n    return Array.isArray(arr) ? (arr as any[]).map((x) => String(x)).filter(Boolean) : [];\r\n  } catch {\r\n    return [];\r\n  }\r\n}\r\n\r\nfunction writeFavs(ids: string[]) {\r\n  try {\r\n    localStorage.setItem(\"cw:v2:favMarkets\", JSON.stringify(ids));\r\n  } catch {\r\n    // ignore\r\n  }\r\n}\r\n\r\nexport function MarketsClient() {\r\n  const [query, setQuery] = useState(\"\");\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState<string | null>(null);\r\n  const [markets, setMarkets] = useState<MarketOverviewRow[]>([]);\r\n  const [favs, setFavs] = useState<string[]>(() => readFavs());\r\n\r\n  const loadSeqRef = useRef(0);\r\n  const abortRef = useRef<AbortController | null>(null);\r\n\r\n  const load = async () => {\r\n    const seq = ++loadSeqRef.current;\r\n    abortRef.current?.abort();\r\n    const controller = new AbortController();\r\n    abortRef.current = controller;\r\n\r\n    setError(null);\r\n    if (markets.length === 0) setLoading(true);\r\n    try {\r\n      const res = await fetch(\"/api/exchange/markets/overview?fiat=USD\", { cache: \"no-store\", signal: controller.signal });\r\n      const json = (await res.json().catch(() => null)) as MarketsOverviewResponse | null;\r\n      if (!res.ok) throw new Error(\"markets_unavailable\");\r\n      const rows = Array.isArray(json?.markets) ? json!.markets : [];\r\n      // v1: USDT quote only\r\n      if (seq !== loadSeqRef.current) return;\r\n      setMarkets(rows.filter((m) => String(m.quote_symbol).toUpperCase() === \"USDT\"));\r\n    } catch (e) {\r\n      if (e instanceof DOMException && e.name === \"AbortError\") return;\r\n      // If we already have data, keep it; don't wipe the UI on transient refresh errors.\r\n      if (seq !== loadSeqRef.current) return;\r\n      if (markets.length === 0) setError(e instanceof Error ? e.message : String(e));\r\n    } finally {\r\n      if (seq === loadSeqRef.current) setLoading(false);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    void load();\r\n    const tick = () => {\r\n      if (document.visibilityState !== \"visible\") return;\r\n      void load();\r\n    };\r\n    const id = window.setInterval(tick, 15_000);\r\n    const onVis = () => {\r\n      if (document.visibilityState === \"visible\") void load();\r\n    };\r\n    document.addEventListener(\"visibilitychange\", onVis);\r\n    return () => {\r\n      window.clearInterval(id);\r\n      document.removeEventListener(\"visibilitychange\", onVis);\r\n    };\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []);\r\n\r\n  const normalizedQuery = query.trim().toUpperCase();\r\n\r\n  const showError = Boolean(error) && markets.length === 0;\r\n\r\n  const movers = useMemo(() => {\r\n    const base = markets\r\n      .map((m) => {\r\n        const open = m.stats?.open ?? null;\r\n        const last = m.stats?.last ?? null;\r\n        const chg = pctChange(open, last);\r\n        return { m, changePct: chg };\r\n      })\r\n      .filter((x) => x.changePct != null);\r\n\r\n    const sorted = base\r\n      .slice()\r\n      .sort((a, b) => {\r\n        const aa = a.changePct ?? -Infinity;\r\n        const bb = b.changePct ?? -Infinity;\r\n        return bb - aa;\r\n      });\r\n\r\n    const gainers = sorted.slice(0, 3);\r\n    const losers = sorted.slice().reverse().slice(0, 3);\r\n    return { gainers, losers };\r\n  }, [markets]);\r\n\r\n  const rows = useMemo(() => {\r\n    const base = markets\r\n      .map((m) => {\r\n        const open = m.stats?.open ?? null;\r\n        const last = m.stats?.last ?? null;\r\n        const chg = pctChange(open, last);\r\n        const fav = favs.includes(m.id);\r\n        return {\r\n          ...m,\r\n          open,\r\n          last,\r\n          changePct: chg,\r\n          isFav: fav,\r\n        };\r\n      })\r\n      .filter((m) => {\r\n        if (!normalizedQuery) return true;\r\n        const sym = `${String(m.base_symbol).toUpperCase()}/${String(m.quote_symbol).toUpperCase()}`;\r\n        return sym.includes(normalizedQuery) || String(m.symbol).toUpperCase().includes(normalizedQuery);\r\n      })\r\n      .sort((a, b) => {\r\n        // Favorites first\r\n        if (a.isFav !== b.isFav) return a.isFav ? -1 : 1;\r\n        // Then by absolute 24h move (descending)\r\n        const am = a.changePct == null ? -1 : Math.abs(a.changePct);\r\n        const bm = b.changePct == null ? -1 : Math.abs(b.changePct);\r\n        if (am !== bm) return bm - am;\r\n        return String(a.symbol).localeCompare(String(b.symbol));\r\n      });\r\n\r\n    return base;\r\n  }, [markets, favs, normalizedQuery]);\r\n\r\n  const toggleFav = (id: string) => {\r\n    setFavs((prev) => {\r\n      const next = prev.includes(id) ? prev.filter((x) => x !== id) : [...prev, id];\r\n      writeFavs(next);\r\n      return next;\r\n    });\r\n  };\r\n\r\n  return (\r\n    <main className=\"space-y-4\">\r\n      <header className=\"space-y-2\">\r\n        <div className=\"text-[11px] font-bold uppercase tracking-widest text-[var(--v2-muted)]\">Markets</div>\r\n        <h1 className=\"text-2xl font-extrabold tracking-tight\">Trade USDT pairs</h1>\r\n        <p className=\"text-sm text-[var(--v2-muted)]\">Search, favorite, and open a market to trade.</p>\r\n      </header>\r\n\r\n      <V2Input\r\n        value={query}\r\n        onChange={(e) => setQuery(e.target.value)}\r\n        placeholder=\"Search BTC, ETH, BTC/USDT…\"\r\n        autoCapitalize=\"none\"\r\n        autoCorrect=\"off\"\r\n        spellCheck={false}\r\n      />\r\n\r\n      {!error && !loading && !normalizedQuery && (movers.gainers.length || movers.losers.length) ? (\r\n        <section className=\"grid gap-2\">\r\n          <div className=\"text-[11px] font-bold uppercase tracking-widest text-[var(--v2-muted)]\">Movers</div>\r\n          <div className=\"grid grid-cols-2 gap-2\">\r\n            <div className=\"rounded-2xl border border-[var(--v2-border)] bg-[var(--v2-surface)] p-3 shadow-[var(--v2-shadow-sm)]\">\r\n              <div className=\"text-[12px] font-semibold text-[var(--v2-text)]\">Top gainers</div>\r\n              <div className=\"mt-2 grid gap-2\">\r\n                {movers.gainers.map(({ m, changePct }) => {\r\n                  const base = String(m.base_symbol).toUpperCase();\r\n                  const quote = String(m.quote_symbol).toUpperCase();\r\n                  const label = `${base}/${quote}`;\r\n                  const c = changePct ?? 0;\r\n                  const t = `${c >= 0 ? \"+\" : \"\"}${c.toFixed(2)}%`;\r\n                  return (\r\n                    <Link\r\n                      key={m.id}\r\n                      href={`/v2/trade?base=${encodeURIComponent(base)}&quote=${encodeURIComponent(quote)}`}\r\n                      className=\"flex items-center justify-between gap-2 rounded-xl bg-[var(--v2-surface-2)] px-2 py-2\"\r\n                    >\r\n                      <div className=\"text-[12px] font-semibold text-[var(--v2-text)]\">{label}</div>\r\n                      <div className=\"text-[12px] font-semibold text-[var(--up)]\">{t}</div>\r\n                    </Link>\r\n                  );\r\n                })}\r\n                {movers.gainers.length === 0 ? (\r\n                  <div className=\"text-[12px] text-[var(--v2-muted)]\">No data yet.</div>\r\n                ) : null}\r\n              </div>\r\n            </div>\r\n            <div className=\"rounded-2xl border border-[var(--v2-border)] bg-[var(--v2-surface)] p-3 shadow-[var(--v2-shadow-sm)]\">\r\n              <div className=\"text-[12px] font-semibold text-[var(--v2-text)]\">Top losers</div>\r\n              <div className=\"mt-2 grid gap-2\">\r\n                {movers.losers.map(({ m, changePct }) => {\r\n                  const base = String(m.base_symbol).toUpperCase();\r\n                  const quote = String(m.quote_symbol).toUpperCase();\r\n                  const label = `${base}/${quote}`;\r\n                  const c = changePct ?? 0;\r\n                  const t = `${c >= 0 ? \"+\" : \"\"}${c.toFixed(2)}%`;\r\n                  return (\r\n                    <Link\r\n                      key={m.id}\r\n                      href={`/v2/trade?base=${encodeURIComponent(base)}&quote=${encodeURIComponent(quote)}`}\r\n                      className=\"flex items-center justify-between gap-2 rounded-xl bg-[var(--v2-surface-2)] px-2 py-2\"\r\n                    >\r\n                      <div className=\"text-[12px] font-semibold text-[var(--v2-text)]\">{label}</div>\r\n                      <div className=\"text-[12px] font-semibold text-[var(--down)]\">{t}</div>\r\n                    </Link>\r\n                  );\r\n                })}\r\n                {movers.losers.length === 0 ? (\r\n                  <div className=\"text-[12px] text-[var(--v2-muted)]\">No data yet.</div>\r\n                ) : null}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </section>\r\n      ) : null}\r\n\r\n      {showError ? (\r\n        <V2Card>\r\n          <V2CardHeader title=\"Markets unavailable\" subtitle=\"Check connectivity and try again.\" />\r\n          <V2CardBody>\r\n            <div className=\"text-sm text-[var(--v2-muted)]\">{String(error)}</div>\r\n            <div className=\"mt-3\">\r\n              <V2Button variant=\"primary\" fullWidth onClick={() => void load()}>\r\n                Retry\r\n              </V2Button>\r\n            </div>\r\n          </V2CardBody>\r\n        </V2Card>\r\n      ) : loading ? (\r\n        <div className=\"grid gap-2\">\r\n          <V2Skeleton className=\"h-14\" />\r\n          <V2Skeleton className=\"h-14\" />\r\n          <V2Skeleton className=\"h-14\" />\r\n          <V2Skeleton className=\"h-14\" />\r\n          <V2Skeleton className=\"h-14\" />\r\n        </div>\r\n      ) : rows.length === 0 ? (\r\n        <V2Card>\r\n          <V2CardHeader title=\"No matches\" subtitle=\"Try a different search.\" />\r\n          <V2CardBody>\r\n            <div className=\"text-sm text-[var(--v2-muted)]\">Nothing found for “{normalizedQuery || \"—\"}”.</div>\r\n          </V2CardBody>\r\n        </V2Card>\r\n      ) : (\r\n        <section className=\"grid gap-2\">\r\n          {rows.slice(0, 60).map((m) => {\r\n            const base = String(m.base_symbol).toUpperCase();\r\n            const quote = String(m.quote_symbol).toUpperCase();\r\n            const label = `${base}/${quote}`;\r\n            const change = m.changePct;\r\n            const changeText = change == null ? \"—\" : `${change >= 0 ? \"+\" : \"\"}${change.toFixed(2)}%`;\r\n            const changeClass = change == null ? \"text-[var(--v2-muted)]\" : change >= 0 ? \"text-[var(--up)]\" : \"text-[var(--down)]\";\r\n\r\n            return (\r\n              <div\r\n                key={m.id}\r\n                className=\"flex items-center justify-between gap-3 rounded-2xl border border-[var(--v2-border)] bg-[var(--v2-surface)] px-3 py-3 shadow-[var(--v2-shadow-sm)]\"\r\n              >\r\n                <div className=\"min-w-0\">\r\n                  <div className=\"flex items-center gap-2\">\r\n                    <Link\r\n                      href={`/v2/trade?base=${encodeURIComponent(base)}&quote=${encodeURIComponent(quote)}`}\r\n                      className=\"truncate text-[15px] font-semibold text-[var(--v2-text)]\"\r\n                    >\r\n                      {label}\r\n                    </Link>\r\n                    {m.is_halted ? (\r\n                      <span className=\"rounded-full border border-[var(--v2-border)] bg-[var(--warn-bg)] px-2 py-0.5 text-[11px] font-semibold text-[var(--warn)]\">\r\n                        Halted\r\n                      </span>\r\n                    ) : null}\r\n                  </div>\r\n                  <div className=\"mt-0.5 text-[12px] text-[var(--v2-muted)]\">Vol: {fmtPrice(m.stats?.quote_volume ?? null)} {quote}</div>\r\n                </div>\r\n\r\n                <div className=\"shrink-0 text-right\">\r\n                  <div className=\"text-[14px] font-semibold text-[var(--v2-text)]\">{fmtPrice(m.last)}</div>\r\n                  <div className={`text-[12px] font-semibold ${changeClass}`}>{changeText}</div>\r\n                </div>\r\n\r\n                <button\r\n                  type=\"button\"\r\n                  onClick={() => toggleFav(m.id)}\r\n                  className={\r\n                    \"ml-1 flex h-11 w-11 items-center justify-center rounded-2xl border shadow-[var(--v2-shadow-sm)] \" +\r\n                    (m.isFav\r\n                      ? \"border-[color-mix(in_srgb,var(--v2-accent)_55%,transparent)] bg-[color-mix(in_srgb,var(--v2-accent)_12%,transparent)] text-[var(--v2-accent)]\"\r\n                      : \"border-[var(--v2-border)] bg-[var(--v2-surface)] text-[var(--v2-muted)] hover:bg-[var(--v2-surface-2)]\")\r\n                  }\r\n                  aria-label={m.isFav ? \"Remove favorite\" : \"Add favorite\"}\r\n                  title={m.isFav ? \"Unfavorite\" : \"Favorite\"}\r\n                >\r\n                  <span aria-hidden>{m.isFav ? \"★\" : \"☆\"}</span>\r\n                </button>\r\n              </div>\r\n            );\r\n          })}\r\n        </section>\r\n      )}\r\n    </main>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}