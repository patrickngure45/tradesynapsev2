module.exports=[214373,a=>{"use strict";var b=a.i(187924);function c({children:a,className:c=""}){return(0,b.jsx)("section",{className:"rounded-[var(--v2-radius-lg)] border border-[var(--v2-border)] bg-[var(--v2-surface)] shadow-[var(--v2-shadow-sm)] "+c,children:a})}function d({title:a,subtitle:c,right:d}){return(0,b.jsxs)("header",{className:"flex items-start justify-between gap-3 px-4 pt-4",children:[(0,b.jsxs)("div",{className:"min-w-0",children:[(0,b.jsx)("div",{className:"text-[15px] font-semibold text-[var(--v2-text)]",children:a}),c?(0,b.jsx)("div",{className:"mt-0.5 text-[13px] text-[var(--v2-muted)]",children:c}):null]}),d?(0,b.jsx)("div",{className:"shrink-0",children:d}):null]})}function e({children:a}){return(0,b.jsx)("div",{className:"px-4 pb-4 pt-3",children:a})}a.s(["V2Card",()=>c,"V2CardBody",()=>e,"V2CardHeader",()=>d])},782691,a=>{"use strict";var b=a.i(187924);function c({className:a=""}){return(0,b.jsx)("div",{className:"animate-pulse rounded-xl border border-[var(--v2-border)] bg-[var(--v2-surface-2)] "+a,"aria-hidden":"true"})}a.s(["V2Skeleton",()=>c])},392415,a=>{"use strict";class b extends Error{code;details;status;requestId;constructor(a,b){super(b?.requestId?`${a} (req ${b.requestId})`:a),this.name="ApiError",this.code=a,this.details=b?.details,this.status=b?.status,this.requestId=b?.requestId}}function c(a){return new Promise(b=>setTimeout(b,Math.max(0,Math.floor(a))))}async function d(a,d){let e=d?{...d,credentials:d.credentials??"same-origin"}:{credentials:"same-origin"},f=(e?.method??"GET").toUpperCase();if(["POST","PUT","PATCH","DELETE"].includes(f)){let a=function(){if("u"<typeof document)return null;let a=document.cookie.match(/(?:^|;\s*)__csrf=([^;]+)/);return a?.[1]??null}();if(a){let b=new Headers(e?.headers);b.has("x-csrf-token")||b.set("x-csrf-token",a),e.headers=b}}let g=(e?.method??"GET").toUpperCase(),h="GET"===g||"HEAD"===g,i=2*!!h,j=null;for(let d=0;d<=i;d+=1)try{let f=await fetch(a,e),g=f.headers.get("x-request-id")??void 0,j=await f.text().catch(()=>""),k=(f.headers.get("content-type")??"").includes("text/html")||function(a){let b=String(a??"").trimStart();return b.startsWith("<!DOCTYPE html")||b.startsWith("<html")||b.startsWith("<!doctype html")}(j),l=k?{_raw:"<html/>"}:function(a){try{return a?JSON.parse(a):null}catch{return{_raw:a}}}(j);if(!f.ok){if(h&&(502===f.status||503===f.status||504===f.status)&&d<i){await c(250*Math.pow(2,d));continue}if(l&&"object"==typeof l&&"error"in l){let a="string"==typeof l.error?l.error:`http_${f.status}`,c=void 0!==l.details?l.details:"string"==typeof l.message?l.message:k?{message:`Upstream error (HTTP ${f.status}). Please retry.`}:void 0;throw new b(a,{details:c,status:f.status,requestId:g})}if(l&&"object"==typeof l&&"message"in l){let a="string"==typeof l.message?l.message:l;throw new b(`http_${f.status}`,{details:a,status:f.status,requestId:g})}let a=k?{message:`Upstream error (HTTP ${f.status}). Please retry.`}:l;throw new b(`http_${f.status}`,{details:a,status:f.status,requestId:g})}return l}catch(a){if(j=a,h&&d<i){await c(250*Math.pow(2,d));continue}throw a}throw j}a.s(["ApiError",()=>b,"fetchJsonOrThrow",()=>d])},513730,a=>{"use strict";var b=a.i(187924),c=a.i(572131),d=a.i(392415),e=a.i(214373),f=a.i(782691);function g(a){if(!Number.isFinite(a)||a<=0)return"0s";if(a<1)return`${Math.round(1e3*a)}ms`;if(a<60)return`${Math.round(10*a)/10}s`;let b=Math.floor(a/60),c=Math.round(a-60*b);if(b<60)return`${b}m ${c}s`;let d=Math.floor(b/60);return`${d}h ${b-60*d}m`}function h(){let[a,h]=(0,c.useState)(!0),[i,j]=(0,c.useState)(null),[k,l]=(0,c.useState)(null);function m(a){let b=k?.[a]?.distribution_all_time??[],c=b.reduce((a,b)=>a+(Number.isFinite(b.count)?b.count:0),0);return{rows:b,total:c}}(0,c.useEffect)(()=>{let a=!1;return(async()=>{h(!0),j(null);try{let b=await (0,d.fetchJsonOrThrow)("/api/admin/arcade/transparency",{cache:"no-store"});a||l(b)}catch(b){if(a)return;b instanceof d.ApiError?j(b.code):j("Network error")}finally{a||h(!1)}})(),()=>{a=!0}},[]);let n=(0,c.useMemo)(()=>m("daily_drop"),[k]),o=(0,c.useMemo)(()=>m("calendar_daily"),[k]),p=(0,c.useMemo)(()=>m("time_vault"),[k]),q=(0,c.useMemo)(()=>m("boost_draft"),[k]),r=(0,c.useMemo)(()=>m("ai_oracle"),[k]),s=(0,c.useMemo)(()=>{let a=(k?.latency_7d??[]).map(a=>({module:a.module,n:Number(a.n)||0,p50_s:Number(a.p50_s)||0,p95_s:Number(a.p95_s)||0,avg_s:Number(a.avg_s)||0})).filter(a=>a.n>0);return a.sort((a,b)=>b.p95_s-a.p95_s),a},[k]),t=(0,c.useMemo)(()=>{let a=(k?.overdue??[]).map(a=>({module:a.module,count:Number(a.count)||0})).filter(a=>a.count>0);return a.sort((a,b)=>b.count-a.count),a},[k]);return a?(0,b.jsx)(f.V2Skeleton,{className:"h-40"}):i?(0,b.jsxs)("div",{className:"rounded-2xl border border-[var(--v2-border)] bg-[var(--warn-bg)] px-6 py-5 text-[13px] font-semibold text-[var(--v2-text)]",children:["Error: ",(0,b.jsx)("span",{className:"font-extrabold",children:i})]}):k?(0,b.jsxs)("div",{className:"grid gap-6",children:[(0,b.jsx)("section",{className:"grid gap-4 md:grid-cols-4",children:[{k:"Actions",v:k.counts.actions_total,sub:"Total commits"},{k:"Resolved",v:k.counts.actions_resolved,sub:"Reveals completed"},{k:"Inventory",v:k.counts.inventory_quantity,sub:"Total items"},{k:"Stacks",v:k.counts.inventory_rows,sub:"Unique items"}].map(a=>(0,b.jsxs)(e.V2Card,{className:"p-4",children:[(0,b.jsx)("div",{className:"text-[11px] font-extrabold uppercase tracking-widest text-[var(--v2-muted)]",children:a.k}),(0,b.jsx)("div",{className:"mt-2 text-2xl font-extrabold tracking-tight text-[var(--v2-text)]",children:a.v}),(0,b.jsx)("div",{className:"mt-1 text-[12px] text-[var(--v2-muted)]",children:a.sub})]},a.k))}),[{key:"daily_drop",title:"Daily drop distribution",dist:n},{key:"calendar_daily",title:"Calendar distribution",dist:o},{key:"time_vault",title:"Time vault distribution",dist:p},{key:"boost_draft",title:"Boost draft distribution",dist:q},{key:"ai_oracle",title:"AI Oracle tier distribution",dist:r}].map(a=>(0,b.jsxs)(e.V2Card,{className:"p-5",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsxs)("span",{className:"relative inline-flex h-2.5 w-2.5 shrink-0 items-center justify-center",children:[(0,b.jsx)("span",{className:"absolute inline-flex h-2.5 w-2.5 rounded-full bg-[var(--v2-accent)]"}),(0,b.jsx)("span",{className:"absolute inline-flex h-4.5 w-4.5 rounded-full bg-[var(--v2-ring)]"})]}),(0,b.jsx)("div",{className:"text-[11px] font-extrabold uppercase tracking-widest text-[var(--v2-muted)]",children:a.title}),(0,b.jsx)("div",{className:"h-px flex-1 bg-[var(--v2-border)]"})]}),0===a.dist.total?(0,b.jsx)("div",{className:"mt-5 text-[13px] text-[var(--v2-muted)]",children:"No resolved actions yet."}):(0,b.jsx)("div",{className:"mt-5 grid gap-3",children:a.dist.rows.map(c=>{let d,e=Math.round(1e4*c.count/Math.max(1,a.dist.total))/100,f="legendary"===(d=String(c.rarity??"").toLowerCase())?{dot:"bg-[var(--warn)]",bg:"bg-[var(--warn-bg)]",text:"text-[var(--warn)]"}:"epic"===d?{dot:"bg-[var(--v2-accent-2)]",bg:"bg-[color-mix(in_srgb,var(--v2-accent-2)_12%,transparent)]",text:"text-[var(--v2-accent-2)]"}:"rare"===d?{dot:"bg-[var(--v2-accent)]",bg:"bg-[color-mix(in_srgb,var(--v2-accent)_10%,transparent)]",text:"text-[var(--v2-accent)]"}:{dot:"bg-[var(--v2-border)]",bg:"bg-[var(--v2-surface-2)]",text:"text-[var(--v2-muted)]"};return(0,b.jsxs)("div",{className:"rounded-xl border border-[var(--v2-border)] bg-[var(--v2-surface-2)] p-4",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between gap-3",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("span",{className:`h-2.5 w-2.5 rounded-full ${f.dot}`,"aria-hidden":!0}),(0,b.jsx)("div",{className:"text-[13px] font-semibold text-[var(--v2-text)]",children:c.rarity})]}),(0,b.jsxs)("div",{className:"text-[12px] text-[var(--v2-muted)]",children:[c.count," · ",e,"%"]})]}),(0,b.jsx)("div",{className:"mt-3 h-2 w-full overflow-hidden rounded-full bg-[var(--v2-surface)]",children:(0,b.jsx)("div",{className:`h-full ${f.bg}`,style:{width:`${Math.min(100,Math.max(0,e))}%`}})})]},c.rarity)})})]},a.key)),(0,b.jsxs)(e.V2Card,{className:"p-5",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsxs)("span",{className:"relative inline-flex h-2.5 w-2.5 shrink-0 items-center justify-center",children:[(0,b.jsx)("span",{className:"absolute inline-flex h-2.5 w-2.5 rounded-full bg-[var(--v2-accent)]"}),(0,b.jsx)("span",{className:"absolute inline-flex h-4.5 w-4.5 rounded-full bg-[var(--v2-ring)]"})]}),(0,b.jsx)("div",{className:"text-[11px] font-extrabold uppercase tracking-widest text-[var(--v2-muted)]",children:"Resolution latency (7d)"}),(0,b.jsx)("div",{className:"h-px flex-1 bg-[var(--v2-border)]"})]}),0===s.length?(0,b.jsx)("div",{className:"mt-5 text-[13px] text-[var(--v2-muted)]",children:"No resolved actions in the last 7 days."}):(0,b.jsx)("div",{className:"mt-5 grid gap-2",children:s.map(a=>(0,b.jsxs)("div",{className:"grid gap-2 rounded-xl border border-[var(--v2-border)] bg-[var(--v2-surface-2)] p-4 md:grid-cols-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-[12px] font-semibold text-[var(--v2-text)]",children:a.module}),(0,b.jsxs)("div",{className:"mt-1 text-[12px] text-[var(--v2-muted)]",children:["n=",a.n]})]}),(0,b.jsxs)("div",{className:"text-[12px] text-[var(--v2-muted)]",children:[(0,b.jsx)("span",{className:"font-semibold text-[var(--v2-text)]",children:"p50"})," ",g(a.p50_s)]}),(0,b.jsxs)("div",{className:"text-[12px] text-[var(--v2-muted)]",children:[(0,b.jsx)("span",{className:"font-semibold text-[var(--v2-text)]",children:"p95"})," ",g(a.p95_s)]}),(0,b.jsxs)("div",{className:"text-[12px] text-[var(--v2-muted)]",children:[(0,b.jsx)("span",{className:"font-semibold text-[var(--v2-text)]",children:"avg"})," ",g(a.avg_s)]})]},a.module))})]}),(0,b.jsxs)(e.V2Card,{className:"p-5",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsxs)("span",{className:"relative inline-flex h-2.5 w-2.5 shrink-0 items-center justify-center",children:[(0,b.jsx)("span",{className:"absolute inline-flex h-2.5 w-2.5 rounded-full bg-[var(--warn)]"}),(0,b.jsx)("span",{className:"absolute inline-flex h-4.5 w-4.5 rounded-full bg-[var(--v2-ring)]"})]}),(0,b.jsx)("div",{className:"text-[11px] font-extrabold uppercase tracking-widest text-[var(--v2-muted)]",children:"Overdue actions"}),(0,b.jsx)("div",{className:"h-px flex-1 bg-[var(--v2-border)]"})]}),0===t.length?(0,b.jsx)("div",{className:"mt-5 text-[13px] text-[var(--v2-muted)]",children:"No overdue actions right now."}):(0,b.jsx)("div",{className:"mt-5 grid gap-2",children:t.map(a=>(0,b.jsxs)("div",{className:"flex items-center justify-between gap-3 rounded-xl border border-[var(--v2-border)] bg-[var(--v2-surface-2)] px-4 py-3",children:[(0,b.jsx)("div",{className:"text-[13px] font-semibold text-[var(--v2-text)]",children:a.module}),(0,b.jsxs)("div",{className:"text-[12px] font-extrabold text-[var(--v2-muted)]",children:["×",a.count]})]},a.module))})]})]}):(0,b.jsx)("div",{className:"rounded-2xl border border-[var(--v2-border)] bg-[var(--v2-surface)] px-6 py-10 text-center text-[13px] text-[var(--v2-muted)] shadow-[var(--v2-shadow-sm)]",children:"No data yet."})}a.s(["AdminArcadeTransparencyClient",()=>h])}];

//# sourceMappingURL=src_a3fc987f._.js.map